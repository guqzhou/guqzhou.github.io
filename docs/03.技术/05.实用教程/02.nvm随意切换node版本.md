---
title: nvm随意切换node版本
date: 2023-02-05 23:02:07
permalink: /pages/080410/
categories: 
  - 技术
  - 实用教程
tags: 
  - 
---
## mac 下安装
### 1.安装Homebrew自动安装
```javascript
// Homebrew安装
/bin/zsh -c "$(curl -fsSL https://gitee.com/cunkai/HomebrewCN/raw/master/Homebrew.sh)"
 
// Homebrew卸载
/bin/zsh -c "$(curl -fsSL https://gitee.com/cunkai/HomebrewCN/raw/master/HomebrewUninstall.sh)"
```
![image-202301300543768](https://cdn.staticaly.com/gh/guqzhou/photo_gallery@master/blog/202301300543768.png)
一直往下安装，若报错，[点击下载安装插件](https://sourceforge.net/projects/git-osx-installer/),不报错，请忽略

![image-20230206010908470](https://cdn.staticaly.com/gh/guqzhou/photo_gallery@master/blog/202302060109529.png)输入brew -v 出现brew版本号，说明安装成功

### 2..nvm安装
```javascript
brew install nvm
```

编辑配置文件，vim ~/.bash_profile

```javascript
export NVM_DIR=~/.nvm
// 加入以下两条配置文件,nvm切换镜像源，解决node下载卡/失败的问题
export NVM_NODEJS_ORG_MIRROR=http://npm.taobao.org/mirrors/node
export NVM_IOJS_ORG_MIRROR=http://npm.taobao.org/mirrors/iojs
```

编辑配置文件，vim ~/.zshrc

```js
[ -s "/opt/homebrew/opt/nvm/nvm.sh" ] && \. "/opt/homebrew/opt/nvm/nvm.sh"  # This loads nvm
[ -s "/opt/homebrew/opt/nvm/etc/bash_completion.d/nvm" ] && \. "/opt/homebrew/opt/nvm/etc/
bash_completion.d/nvm"
```



保存文件

```js
source ~/.bash_profile
source ~/.zshrc
```

查看一下配置是否生效

```js
% echo $NVM_DIR
/Users/your-username/.nvm
```



### 3.常用指令

```javascript
nvm ls-remote  // 查看所有的node可用版本
nvm list  // 查看已安装node版本
nvm install 版本号  // 下载指定node版本，如nvm install v11.14.0
nvm use 版本号  // 使用指定版本
nvm alias default  // 设置默认版本，每次启动终端都使用该版本
```

[比较全的指令](#_5-nvm常用命令)




## window下安装

### 1.卸载node
如果你已经安装了node，那么你需要先卸载node，如果你没有安装那直接跳过这一步到下一步。

打开控制面板 -> 打开程序和功能 -> 右上角搜索输入node -> 右键卸载

为了确保彻底删除node在看看你的node安装目录中还有没有node文件夹，有的话一起删除。再看看C:\Users\用户名 文件夹下有没有.npmrc以及.yarnrc等等统统删除。再去看看你的环境变量有没有node相关的，有的话也一起删除了。（环境变量node相关的就是安装node的时候配置的那些，详情看安装的那篇文章）

### 2.安装nvm
去github [下载最新的nvm](https://github.com/coreybutler/nvm-windows/releases) 找到 nvm-setup.zip 点击下载

![image-20230206001948632](https://cdn.staticaly.com/gh/guqzhou/photo_gallery@master/blog/202302060019904.png)

### 3.配置镜像
安装完nvm后先不要着急安装node。

找到nvm安装路径 -> 找到 settings.txt 文件 -> 配置下载源

![image-202302060029535](https://cdn.staticaly.com/gh/guqzhou/photo_gallery@master/blog/202302060029535.png)

### 4.nvm安装node版本
在终端输入 nvm list available， 查看网络可以安装的版本。

![image-20230206003301369](https://cdn.staticaly.com/gh/guqzhou/photo_gallery@master/blog/202302060033446.png)

选择一个版本安装，比如 `nvm install 14.14.0`

![image-20230206003419828](https://cdn.staticaly.com/gh/guqzhou/photo_gallery@master/blog/202302060034875.png)

使用这个版本的node，`nvm use 14.14.0`。输入`node -v` 和 `npm -v`可以查询到node和npm的版本号

![image-20230206003454775](https://cdn.staticaly.com/gh/guqzhou/photo_gallery@master/blog/202302060034819.png)

输入`nvm list` 查看已经安装的node，`*`号表示当前使用的node版本。

![image-20230206003520075](https://cdn.staticaly.com/gh/guqzhou/photo_gallery@master/blog/202302060035112.png)

### 5.nvm常用命令

![image-20230206003831577](https://cdn.staticaly.com/gh/guqzhou/photo_gallery@master/blog/202302060038651.png)

### 6.卸载nvm

可以通过下面方式卸载或找到nvm安装路径，直接将文件删掉。

![image-20230206004010036](https://cdn.staticaly.com/gh/guqzhou/photo_gallery@master/blog/202302060040071.png)

此电脑 -> 右键属性 -> 高级系统设置 -> 环境变量 -> 找到nvm相关的 -> 删除

![image-20230206004105595](https://cdn.staticaly.com/gh/guqzhou/photo_gallery@master/blog/202302060041631.png)

> 参考
> 
> [https://blog.csdn.net/HuangsTing/article/details/113857145](https://blog.csdn.net/HuangsTing/article/details/113857145)
