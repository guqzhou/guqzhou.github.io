---
title: 高德地图的基本使用
date: 2023-02-09 02:06:21
permalink: /pages/ca9566/
categories: 
  - 前端
  - gis
tags: 
  - 
---

## 创建地图
1. 引入地图api
```js
<script type="text/javascript">
        window._AMapSecurityConfig = {
            securityJsCode:'42afa2376728cb9aa46375fb41229b42',
        }
</script>
<script type="text/javascript" src="https://webapi.amap.com/maps?v=2.0&key=819edf10babf7a0e2b03f14294415b72"></script> 
```
2. 创建容器
```html
<div id="map"></div>
```
3. 给地图容器设置宽高
```css
#map {
    width: 100%;
    height: 100%;
}
```
## 图层
```javascript
var traffic = new AMap.TileLayer.Traffic({
	  'autoRefresh': true,     //是否自动刷新，默认为false
	  'interval': 180,         //刷新间隔，默认180s
	    });
	
map.add(traffic); //通过add方法添加图层
```
## 控件
```javascript
AMap.plugin([
		'AMap.ToolBar', // 工具条
		'AMap.Scale', // 比例尺
		'AMap.HawkEye', // 缩略图
		'AMap.MapType',  // 切换控件
		'AMap.Geolocation' // 经纬度
	],function(){
		 // 在图面添加工具条控件，工具条控件集成了缩放、平移、定位等功能按钮在内的组合控件
		    map.addControl(new AMap.ToolBar());
		
		    // 在图面添加比例尺控件，展示地图在当前层级和纬度下的比例尺
		    map.addControl(new AMap.Scale());
		
		    // 在图面添加鹰眼控件，在地图右下角显示地图的缩略图
		    map.addControl(new AMap.HawkEye({isOpen:true}));
		   
		    // 在图面添加类别切换控件，实现默认图层与卫星图、实施交通图层之间切换的控制
		    map.addControl(new AMap.MapType());
		   
		    // 在图面添加定位控件，用来获取和展示用户主机所在的经纬度位置
		    map.addControl(new AMap.Geolocation());
	})
```
## 事件
```javascript
//  监听地图的点击事件
	map.on('click', (e) => {
		console.log(666,e)
	})
```
## 覆盖物
```javascript
map.on('click', (e) => {
		// 创建点对象
		var marker = new AMap.Marker({
			position: e.lnglat
		}) 
		// 添加到地图
		map.add(marker)
		console.log(666,e)
	})
```
