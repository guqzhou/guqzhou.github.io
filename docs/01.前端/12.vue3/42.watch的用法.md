---
title: watch的用法
date: 2023-11-26 16:36:05
permalink: /pages/0c6cdd/
categories: 
  - 前端
  - vue3
tags: 
  - 
---
## watch的用法
我们用ref或者reactive所包裹起来的变量才能被watch监听到
### 用法
```vue
<script>
const message = ref('11')
watch(message, (newVal, oldVal) => {
  
}, {
  // deep: true 深度监听  而reactive不需要开启默认开启
})


let message2 = reactive({
   foo: {
     name: '李四'
   }
})
watch([message], (newVal, oldVal) => {
   // 任意一个值发生变化就会监听
})

// 如果我们只想监听单一属性需要改成函数
watch(() => message2.foo.name, (newVal, oldVal) => {
})

</script>
```

### 配置项 :sunny:
|  属性   | 说明  | 类型 |
| :----: | :----: | :-----: |
|  deep  | 深度监听，reactive默认开启  | boolean |
| immediate  | 立即执行一次 | boolean |
|  flush | 默认pre组件更新之前调用，sync同步执行，post是组件更新之后执行 | string |



