<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>小程序笔记 | guqzhou</title>
    <meta name="generator" content="VuePress 1.9.10">
    <link rel="icon" href="/img/logo.ico">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.css">
    <script src="https://cdn.staticfile.org/twikoo/1.6.8/twikoo.all.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/meting@2.0.1/dist/Meting.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.3/jquery.min.js"></script>
    <script src="https://unpkg.co/gsap@3/dist/gsap.min.js"></script>
    <link rel="stylesheet" href="https://at.alicdn.com/t/c/font_3865008_vm4ka2g2vxo.css">
    <meta name="description" content="">
    <meta name="keywords" content="前端博客,个人技术博客,前端,前端开发,前端框架,web前端,前端面试题,技术文档,学习,面试,JavaScript,js,ES6,TypeScript,vue,python,css3,html5,Node,git,github,markdown">
    <meta name="baidu-site-verification" content="codeva-y12HAIMG1M">
    <meta name="theme-color" content="#11a8cd">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="referrer" content="no-referrer-when-downgrade">
    <link rel="preload" href="/assets/css/0.styles.ca234663.css" as="style"><link rel="preload" href="/assets/js/app.f0d510fd.js" as="script"><link rel="preload" href="/assets/js/3.d1eeecfb.js" as="script"><link rel="preload" href="/assets/js/138.9264f3bb.js" as="script"><link rel="preload" href="/assets/js/1.cbee4a77.js" as="script"><link rel="preload" href="/assets/js/31.0fc347f8.js" as="script"><link rel="prefetch" href="/assets/js/10.8806cecd.js"><link rel="prefetch" href="/assets/js/100.e51d8ed6.js"><link rel="prefetch" href="/assets/js/101.dc4fe2b3.js"><link rel="prefetch" href="/assets/js/102.c4059dff.js"><link rel="prefetch" href="/assets/js/103.87f54009.js"><link rel="prefetch" href="/assets/js/104.69b0ffff.js"><link rel="prefetch" href="/assets/js/105.aac47732.js"><link rel="prefetch" href="/assets/js/106.b7cb2906.js"><link rel="prefetch" href="/assets/js/107.aead86ce.js"><link rel="prefetch" href="/assets/js/108.e165c6be.js"><link rel="prefetch" href="/assets/js/109.5b760a03.js"><link rel="prefetch" href="/assets/js/11.714f898e.js"><link rel="prefetch" href="/assets/js/110.01933c33.js"><link rel="prefetch" href="/assets/js/111.724476f8.js"><link rel="prefetch" href="/assets/js/112.9ddbe814.js"><link rel="prefetch" href="/assets/js/113.b94e0b66.js"><link rel="prefetch" href="/assets/js/114.c3c001be.js"><link rel="prefetch" href="/assets/js/115.e291b8c7.js"><link rel="prefetch" href="/assets/js/116.7e322f7e.js"><link rel="prefetch" href="/assets/js/117.6762d5e1.js"><link rel="prefetch" href="/assets/js/118.9ffa222a.js"><link rel="prefetch" href="/assets/js/119.741b30bd.js"><link rel="prefetch" href="/assets/js/12.38983efe.js"><link rel="prefetch" href="/assets/js/120.99468baa.js"><link rel="prefetch" href="/assets/js/121.60221552.js"><link rel="prefetch" href="/assets/js/122.51dbcec7.js"><link rel="prefetch" href="/assets/js/123.32ea8552.js"><link rel="prefetch" href="/assets/js/124.f2d4d9e4.js"><link rel="prefetch" href="/assets/js/125.a59ced4f.js"><link rel="prefetch" href="/assets/js/126.dc2d3ce2.js"><link rel="prefetch" href="/assets/js/127.f7fe509e.js"><link rel="prefetch" href="/assets/js/128.793a346e.js"><link rel="prefetch" href="/assets/js/129.b7f7a8c4.js"><link rel="prefetch" href="/assets/js/13.2648035e.js"><link rel="prefetch" href="/assets/js/130.78821926.js"><link rel="prefetch" href="/assets/js/131.a2bf32b1.js"><link rel="prefetch" href="/assets/js/132.de2c2578.js"><link rel="prefetch" href="/assets/js/133.225324f1.js"><link rel="prefetch" href="/assets/js/134.3094b47b.js"><link rel="prefetch" href="/assets/js/135.a0ec3f40.js"><link rel="prefetch" href="/assets/js/136.6a8f6268.js"><link rel="prefetch" href="/assets/js/137.3a0ae68a.js"><link rel="prefetch" href="/assets/js/139.791769a3.js"><link rel="prefetch" href="/assets/js/14.259a68cb.js"><link rel="prefetch" href="/assets/js/140.4c63d918.js"><link rel="prefetch" href="/assets/js/141.aaefc5f8.js"><link rel="prefetch" href="/assets/js/142.49ccd407.js"><link rel="prefetch" href="/assets/js/143.f2d0d846.js"><link rel="prefetch" href="/assets/js/144.10af8227.js"><link rel="prefetch" href="/assets/js/145.0011de97.js"><link rel="prefetch" href="/assets/js/146.bb5187b5.js"><link rel="prefetch" href="/assets/js/147.90d354f7.js"><link rel="prefetch" href="/assets/js/148.acbd8bf4.js"><link rel="prefetch" href="/assets/js/149.4ca8dcc4.js"><link rel="prefetch" href="/assets/js/15.5e1bc847.js"><link rel="prefetch" href="/assets/js/150.78837761.js"><link rel="prefetch" href="/assets/js/151.2a4f2bef.js"><link rel="prefetch" href="/assets/js/152.4f41c132.js"><link rel="prefetch" href="/assets/js/153.edf1a7be.js"><link rel="prefetch" href="/assets/js/154.0a7944c8.js"><link rel="prefetch" href="/assets/js/155.461599d3.js"><link rel="prefetch" href="/assets/js/156.02f9f131.js"><link rel="prefetch" href="/assets/js/157.5ccdc493.js"><link rel="prefetch" href="/assets/js/158.05abd2db.js"><link rel="prefetch" href="/assets/js/159.acad0b04.js"><link rel="prefetch" href="/assets/js/16.1d9649ff.js"><link rel="prefetch" href="/assets/js/160.dc4ff814.js"><link rel="prefetch" href="/assets/js/161.db551e46.js"><link rel="prefetch" href="/assets/js/162.818739c3.js"><link rel="prefetch" href="/assets/js/163.f88c3e7e.js"><link rel="prefetch" href="/assets/js/164.6385ad2d.js"><link rel="prefetch" href="/assets/js/165.73815288.js"><link rel="prefetch" href="/assets/js/166.a10ed891.js"><link rel="prefetch" href="/assets/js/167.cfd1a485.js"><link rel="prefetch" href="/assets/js/168.e50d4fc8.js"><link rel="prefetch" href="/assets/js/169.5ef51970.js"><link rel="prefetch" href="/assets/js/17.70e91b66.js"><link rel="prefetch" href="/assets/js/170.29a0e459.js"><link rel="prefetch" href="/assets/js/171.3d042bed.js"><link rel="prefetch" href="/assets/js/172.1eb18afe.js"><link rel="prefetch" href="/assets/js/173.4b76c00d.js"><link rel="prefetch" href="/assets/js/174.ca18f09c.js"><link rel="prefetch" href="/assets/js/175.f9357627.js"><link rel="prefetch" href="/assets/js/176.45a34f75.js"><link rel="prefetch" href="/assets/js/177.f7e59c57.js"><link rel="prefetch" href="/assets/js/178.594e153b.js"><link rel="prefetch" href="/assets/js/179.994297f0.js"><link rel="prefetch" href="/assets/js/18.e9dfd354.js"><link rel="prefetch" href="/assets/js/180.6dd658b8.js"><link rel="prefetch" href="/assets/js/181.4211746f.js"><link rel="prefetch" href="/assets/js/182.270b9b57.js"><link rel="prefetch" href="/assets/js/183.61204a0e.js"><link rel="prefetch" href="/assets/js/184.11d8cc1b.js"><link rel="prefetch" href="/assets/js/185.b3700e98.js"><link rel="prefetch" href="/assets/js/186.9dd7afb3.js"><link rel="prefetch" href="/assets/js/187.4e65e09d.js"><link rel="prefetch" href="/assets/js/188.084679b5.js"><link rel="prefetch" href="/assets/js/189.56601066.js"><link rel="prefetch" href="/assets/js/19.0af72837.js"><link rel="prefetch" href="/assets/js/190.3299b199.js"><link rel="prefetch" href="/assets/js/191.3f57b76e.js"><link rel="prefetch" href="/assets/js/192.589ecc04.js"><link rel="prefetch" href="/assets/js/193.3c64b6f4.js"><link rel="prefetch" href="/assets/js/194.b66fc5f2.js"><link rel="prefetch" href="/assets/js/195.2988433c.js"><link rel="prefetch" href="/assets/js/196.7b686d07.js"><link rel="prefetch" href="/assets/js/197.54b736c3.js"><link rel="prefetch" href="/assets/js/198.fc5001e1.js"><link rel="prefetch" href="/assets/js/199.2e8df090.js"><link rel="prefetch" href="/assets/js/2.4e154e5c.js"><link rel="prefetch" href="/assets/js/20.2c2f78c5.js"><link rel="prefetch" href="/assets/js/200.0a2f2415.js"><link rel="prefetch" href="/assets/js/201.f9f05185.js"><link rel="prefetch" href="/assets/js/202.dd0a96cf.js"><link rel="prefetch" href="/assets/js/203.a93e3b36.js"><link rel="prefetch" href="/assets/js/204.503c9dbe.js"><link rel="prefetch" href="/assets/js/205.0e07892b.js"><link rel="prefetch" href="/assets/js/206.c79c5717.js"><link rel="prefetch" href="/assets/js/207.8fc4e148.js"><link rel="prefetch" href="/assets/js/208.f2d23c41.js"><link rel="prefetch" href="/assets/js/209.84a36e02.js"><link rel="prefetch" href="/assets/js/21.3da6b55b.js"><link rel="prefetch" href="/assets/js/210.04546c0c.js"><link rel="prefetch" href="/assets/js/211.c3361367.js"><link rel="prefetch" href="/assets/js/212.0080b348.js"><link rel="prefetch" href="/assets/js/213.cf7a3865.js"><link rel="prefetch" href="/assets/js/214.d0f5b09e.js"><link rel="prefetch" href="/assets/js/215.9b63e0c6.js"><link rel="prefetch" href="/assets/js/216.7747539a.js"><link rel="prefetch" href="/assets/js/217.ae5f9fd3.js"><link rel="prefetch" href="/assets/js/218.a525d3d2.js"><link rel="prefetch" href="/assets/js/219.11ec7226.js"><link rel="prefetch" href="/assets/js/22.2ea6ebf7.js"><link rel="prefetch" href="/assets/js/220.dced8ffb.js"><link rel="prefetch" href="/assets/js/221.4a8819e4.js"><link rel="prefetch" href="/assets/js/222.8473e137.js"><link rel="prefetch" href="/assets/js/223.61cb0c52.js"><link rel="prefetch" href="/assets/js/224.3e5de5f0.js"><link rel="prefetch" href="/assets/js/225.6cdcc5eb.js"><link rel="prefetch" href="/assets/js/226.bec0690f.js"><link rel="prefetch" href="/assets/js/227.3297ec5b.js"><link rel="prefetch" href="/assets/js/228.9aeade46.js"><link rel="prefetch" href="/assets/js/229.e665e6b0.js"><link rel="prefetch" href="/assets/js/23.1627d05d.js"><link rel="prefetch" href="/assets/js/230.39c7443a.js"><link rel="prefetch" href="/assets/js/231.85d6121c.js"><link rel="prefetch" href="/assets/js/232.cd88c3a2.js"><link rel="prefetch" href="/assets/js/233.bf299280.js"><link rel="prefetch" href="/assets/js/234.5f482f7f.js"><link rel="prefetch" href="/assets/js/235.51c07ebb.js"><link rel="prefetch" href="/assets/js/236.191a6095.js"><link rel="prefetch" href="/assets/js/237.0e14bec6.js"><link rel="prefetch" href="/assets/js/238.430189e3.js"><link rel="prefetch" href="/assets/js/239.785855c5.js"><link rel="prefetch" href="/assets/js/24.73557009.js"><link rel="prefetch" href="/assets/js/240.5e0d4aa5.js"><link rel="prefetch" href="/assets/js/241.615e5bc0.js"><link rel="prefetch" href="/assets/js/242.87134a70.js"><link rel="prefetch" href="/assets/js/243.53faa4ba.js"><link rel="prefetch" href="/assets/js/244.fc25b87c.js"><link rel="prefetch" href="/assets/js/245.a579ccf7.js"><link rel="prefetch" href="/assets/js/246.6d7463de.js"><link rel="prefetch" href="/assets/js/247.9a23031f.js"><link rel="prefetch" href="/assets/js/248.3c87f517.js"><link rel="prefetch" href="/assets/js/249.152ef831.js"><link rel="prefetch" href="/assets/js/25.7750713c.js"><link rel="prefetch" href="/assets/js/250.747e4634.js"><link rel="prefetch" href="/assets/js/251.0dedb8ad.js"><link rel="prefetch" href="/assets/js/252.cd393699.js"><link rel="prefetch" href="/assets/js/253.d2786fe3.js"><link rel="prefetch" href="/assets/js/254.334069ed.js"><link rel="prefetch" href="/assets/js/255.6d39850f.js"><link rel="prefetch" href="/assets/js/256.0fc2fec7.js"><link rel="prefetch" href="/assets/js/257.293f5cdc.js"><link rel="prefetch" href="/assets/js/258.31f27e75.js"><link rel="prefetch" href="/assets/js/259.a1ce519c.js"><link rel="prefetch" href="/assets/js/26.9da4c026.js"><link rel="prefetch" href="/assets/js/260.11cff26f.js"><link rel="prefetch" href="/assets/js/261.4699bfb0.js"><link rel="prefetch" href="/assets/js/262.a0ce2ef3.js"><link rel="prefetch" href="/assets/js/263.a9749652.js"><link rel="prefetch" href="/assets/js/264.6d5123b8.js"><link rel="prefetch" href="/assets/js/265.8a1b70a1.js"><link rel="prefetch" href="/assets/js/266.a48944d5.js"><link rel="prefetch" href="/assets/js/267.9955b4f7.js"><link rel="prefetch" href="/assets/js/268.429f4b48.js"><link rel="prefetch" href="/assets/js/269.acb7bb44.js"><link rel="prefetch" href="/assets/js/27.34890f87.js"><link rel="prefetch" href="/assets/js/270.b2ce68b3.js"><link rel="prefetch" href="/assets/js/271.779a28f5.js"><link rel="prefetch" href="/assets/js/272.059dae04.js"><link rel="prefetch" href="/assets/js/273.192948b4.js"><link rel="prefetch" href="/assets/js/274.a6d6e12b.js"><link rel="prefetch" href="/assets/js/275.a00192ac.js"><link rel="prefetch" href="/assets/js/276.feb803ac.js"><link rel="prefetch" href="/assets/js/277.b3386705.js"><link rel="prefetch" href="/assets/js/278.99657f86.js"><link rel="prefetch" href="/assets/js/279.2c988b2a.js"><link rel="prefetch" href="/assets/js/28.39095678.js"><link rel="prefetch" href="/assets/js/280.c6fb4bfd.js"><link rel="prefetch" href="/assets/js/281.5a31af33.js"><link rel="prefetch" href="/assets/js/282.df41c2bd.js"><link rel="prefetch" href="/assets/js/283.aa246ea3.js"><link rel="prefetch" href="/assets/js/284.856b5363.js"><link rel="prefetch" href="/assets/js/285.2f842d71.js"><link rel="prefetch" href="/assets/js/286.b17d2b9e.js"><link rel="prefetch" href="/assets/js/287.3e8befe4.js"><link rel="prefetch" href="/assets/js/288.9789fbb7.js"><link rel="prefetch" href="/assets/js/289.8f67c9a7.js"><link rel="prefetch" href="/assets/js/29.8952f907.js"><link rel="prefetch" href="/assets/js/290.6f6fbcc7.js"><link rel="prefetch" href="/assets/js/291.44cf839e.js"><link rel="prefetch" href="/assets/js/292.823eeadd.js"><link rel="prefetch" href="/assets/js/293.d9d3ff0a.js"><link rel="prefetch" href="/assets/js/294.de2f61d6.js"><link rel="prefetch" href="/assets/js/295.00b45e11.js"><link rel="prefetch" href="/assets/js/296.8b66cade.js"><link rel="prefetch" href="/assets/js/297.e05543c4.js"><link rel="prefetch" href="/assets/js/298.476d1921.js"><link rel="prefetch" href="/assets/js/299.edc9c863.js"><link rel="prefetch" href="/assets/js/30.03b98376.js"><link rel="prefetch" href="/assets/js/300.f17a1aa5.js"><link rel="prefetch" href="/assets/js/301.6792542f.js"><link rel="prefetch" href="/assets/js/302.7f8869d3.js"><link rel="prefetch" href="/assets/js/303.a1150520.js"><link rel="prefetch" href="/assets/js/304.8ccfcfb3.js"><link rel="prefetch" href="/assets/js/305.42b6e4b1.js"><link rel="prefetch" href="/assets/js/306.2a9974f8.js"><link rel="prefetch" href="/assets/js/307.09259590.js"><link rel="prefetch" href="/assets/js/308.84eeaa32.js"><link rel="prefetch" href="/assets/js/309.42f67892.js"><link rel="prefetch" href="/assets/js/310.ef763589.js"><link rel="prefetch" href="/assets/js/311.831510f8.js"><link rel="prefetch" href="/assets/js/312.ccd42adb.js"><link rel="prefetch" href="/assets/js/313.ba53487c.js"><link rel="prefetch" href="/assets/js/314.e3ea9123.js"><link rel="prefetch" href="/assets/js/315.b2750ad5.js"><link rel="prefetch" href="/assets/js/316.f7a96d8f.js"><link rel="prefetch" href="/assets/js/317.dbef6b1c.js"><link rel="prefetch" href="/assets/js/318.c2cbd2a8.js"><link rel="prefetch" href="/assets/js/319.7aa95784.js"><link rel="prefetch" href="/assets/js/32.e7ea78c3.js"><link rel="prefetch" href="/assets/js/320.698d4e90.js"><link rel="prefetch" href="/assets/js/321.c77ab840.js"><link rel="prefetch" href="/assets/js/322.32d6be99.js"><link rel="prefetch" href="/assets/js/323.edd87e3a.js"><link rel="prefetch" href="/assets/js/324.2fcb60fe.js"><link rel="prefetch" href="/assets/js/325.65d3dd8a.js"><link rel="prefetch" href="/assets/js/326.d6d13aee.js"><link rel="prefetch" href="/assets/js/327.1d93b4bd.js"><link rel="prefetch" href="/assets/js/328.397bfbaa.js"><link rel="prefetch" href="/assets/js/329.cb42738f.js"><link rel="prefetch" href="/assets/js/33.c55dd11b.js"><link rel="prefetch" href="/assets/js/330.b06d9798.js"><link rel="prefetch" href="/assets/js/331.661ce39e.js"><link rel="prefetch" href="/assets/js/332.d90c1cf3.js"><link rel="prefetch" href="/assets/js/333.c47b7662.js"><link rel="prefetch" href="/assets/js/334.03274aa0.js"><link rel="prefetch" href="/assets/js/335.9c4b132a.js"><link rel="prefetch" href="/assets/js/336.986d51d3.js"><link rel="prefetch" href="/assets/js/337.957dfa38.js"><link rel="prefetch" href="/assets/js/338.7045882c.js"><link rel="prefetch" href="/assets/js/339.5601a6c6.js"><link rel="prefetch" href="/assets/js/34.ea205d2a.js"><link rel="prefetch" href="/assets/js/340.f2f35c44.js"><link rel="prefetch" href="/assets/js/341.9aa27228.js"><link rel="prefetch" href="/assets/js/342.2334adf4.js"><link rel="prefetch" href="/assets/js/343.b455e136.js"><link rel="prefetch" href="/assets/js/344.ed8811c9.js"><link rel="prefetch" href="/assets/js/345.c67bc730.js"><link rel="prefetch" href="/assets/js/346.4a35918f.js"><link rel="prefetch" href="/assets/js/347.45fa27ce.js"><link rel="prefetch" href="/assets/js/348.03dab967.js"><link rel="prefetch" href="/assets/js/349.72f0b4fa.js"><link rel="prefetch" href="/assets/js/35.a181dc0e.js"><link rel="prefetch" href="/assets/js/350.e5924a74.js"><link rel="prefetch" href="/assets/js/351.f9c6a1ea.js"><link rel="prefetch" href="/assets/js/352.4ae54682.js"><link rel="prefetch" href="/assets/js/353.84ee5a54.js"><link rel="prefetch" href="/assets/js/354.292df50b.js"><link rel="prefetch" href="/assets/js/36.3d610c47.js"><link rel="prefetch" href="/assets/js/37.4f35c386.js"><link rel="prefetch" href="/assets/js/38.d70e4c22.js"><link rel="prefetch" href="/assets/js/39.4b0621f2.js"><link rel="prefetch" href="/assets/js/4.ded2133d.js"><link rel="prefetch" href="/assets/js/40.9de5e0a2.js"><link rel="prefetch" href="/assets/js/41.84512a47.js"><link rel="prefetch" href="/assets/js/42.bb11265e.js"><link rel="prefetch" href="/assets/js/43.ea3d3753.js"><link rel="prefetch" href="/assets/js/44.86e3da78.js"><link rel="prefetch" href="/assets/js/45.e3fb7460.js"><link rel="prefetch" href="/assets/js/46.58ef6118.js"><link rel="prefetch" href="/assets/js/47.8e32c795.js"><link rel="prefetch" href="/assets/js/48.db3df67c.js"><link rel="prefetch" href="/assets/js/49.1bcdb405.js"><link rel="prefetch" href="/assets/js/5.8a2fa9c1.js"><link rel="prefetch" href="/assets/js/50.ce3467f9.js"><link rel="prefetch" href="/assets/js/51.57bd8514.js"><link rel="prefetch" href="/assets/js/52.0a47f61b.js"><link rel="prefetch" href="/assets/js/53.8308325e.js"><link rel="prefetch" href="/assets/js/54.8d537a18.js"><link rel="prefetch" href="/assets/js/55.07a7f292.js"><link rel="prefetch" href="/assets/js/56.900b255f.js"><link rel="prefetch" href="/assets/js/57.6dcced80.js"><link rel="prefetch" href="/assets/js/58.400123ec.js"><link rel="prefetch" href="/assets/js/59.17bcd0a9.js"><link rel="prefetch" href="/assets/js/6.565184a4.js"><link rel="prefetch" href="/assets/js/60.201c68a1.js"><link rel="prefetch" href="/assets/js/61.4d488e38.js"><link rel="prefetch" href="/assets/js/62.65e6c66f.js"><link rel="prefetch" href="/assets/js/63.eb441b55.js"><link rel="prefetch" href="/assets/js/64.40a5db79.js"><link rel="prefetch" href="/assets/js/65.f6f4eb52.js"><link rel="prefetch" href="/assets/js/66.32b476a5.js"><link rel="prefetch" href="/assets/js/67.9544fd5a.js"><link rel="prefetch" href="/assets/js/68.a5bb178c.js"><link rel="prefetch" href="/assets/js/69.28993d8f.js"><link rel="prefetch" href="/assets/js/7.e33ccd3b.js"><link rel="prefetch" href="/assets/js/70.71f06d98.js"><link rel="prefetch" href="/assets/js/71.9239675e.js"><link rel="prefetch" href="/assets/js/72.2c90974b.js"><link rel="prefetch" href="/assets/js/73.f6c943c0.js"><link rel="prefetch" href="/assets/js/74.ec522ee3.js"><link rel="prefetch" href="/assets/js/75.dbc4aef1.js"><link rel="prefetch" href="/assets/js/76.75dec625.js"><link rel="prefetch" href="/assets/js/77.213ebedc.js"><link rel="prefetch" href="/assets/js/78.dfe53377.js"><link rel="prefetch" href="/assets/js/79.079f948d.js"><link rel="prefetch" href="/assets/js/80.a5e60907.js"><link rel="prefetch" href="/assets/js/81.3d35c75c.js"><link rel="prefetch" href="/assets/js/82.fd07677e.js"><link rel="prefetch" href="/assets/js/83.95778107.js"><link rel="prefetch" href="/assets/js/84.358f4389.js"><link rel="prefetch" href="/assets/js/85.412b9f4a.js"><link rel="prefetch" href="/assets/js/86.a42818ad.js"><link rel="prefetch" href="/assets/js/87.cadf3b2a.js"><link rel="prefetch" href="/assets/js/88.d1ae84c4.js"><link rel="prefetch" href="/assets/js/89.70ec498c.js"><link rel="prefetch" href="/assets/js/90.142db351.js"><link rel="prefetch" href="/assets/js/91.382c6bad.js"><link rel="prefetch" href="/assets/js/92.74c1b2c9.js"><link rel="prefetch" href="/assets/js/93.092769a1.js"><link rel="prefetch" href="/assets/js/94.d881f16e.js"><link rel="prefetch" href="/assets/js/95.6ff3f243.js"><link rel="prefetch" href="/assets/js/96.285531c9.js"><link rel="prefetch" href="/assets/js/97.c04efa51.js"><link rel="prefetch" href="/assets/js/98.e7c57e41.js"><link rel="prefetch" href="/assets/js/99.7e3adb7c.js"><link rel="prefetch" href="/assets/js/vendors~docsearch.0f7eca41.js">
    <link rel="stylesheet" href="/assets/css/0.styles.ca234663.css">
    <style>
      #app::after{background-image: url(https://img.xjh.me/random_img.php?ctype=acg&return=302&type=bg);content: "";background-repeat: no-repeat;background-position: 50%;opacity: .06;-moz-filter: grayscale(100%);-ms-filter: grayscale(100%);-o-filter: grayscale(100%);filter: grayscale(100%);filter: #808080;position: fixed;top: 0;left: 0;width: 100%;height: 100%;z-index: -1;}
      .theme-vdoing-wrapper{letter-spacing: 2px!important;background-image: linear-gradient(90deg, rgba(50, 0, 0, 0.05) 3%, rgba(0, 0, 0, 0) 3%), linear-gradient(360deg, rgba(50, 0, 0, 0.05) 3%, rgba(0, 0, 0, 0) 3%)!important;background-size: 20px 20px!important;background-position: center center!important}
      #app::before{content:'';background-image:
        /* url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAAAUCAYAAADIpHLKAAAACXBIWXMAAAdiAAAHYgE4epnbAAAEQ2lUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSfvu78nIGlkPSdXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQnPz4KPHg6eG1wbWV0YSB4bWxuczp4PSdhZG9iZTpuczptZXRhLyc+CjxyZGY6UkRGIHhtbG5zOnJkZj0naHR0cDovL3d3dy53My5vcmcvMTk5OS8wMi8yMi1yZGYtc3ludGF4LW5zIyc+CgogPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9JycKICB4bWxuczpBdHRyaWI9J2h0dHA6Ly9ucy5hdHRyaWJ1dGlvbi5jb20vYWRzLzEuMC8nPgogIDxBdHRyaWI6QWRzPgogICA8cmRmOlNlcT4KICAgIDxyZGY6bGkgcmRmOnBhcnNlVHlwZT0nUmVzb3VyY2UnPgogICAgIDxBdHRyaWI6Q3JlYXRlZD4yMDIzLTAxLTE0PC9BdHRyaWI6Q3JlYXRlZD4KICAgICA8QXR0cmliOkV4dElkPmU0N2Y1MjMxLWYyYTAtNDI3Ny1iNjcyLWQ1YTk5YmMzNmIxZTwvQXR0cmliOkV4dElkPgogICAgIDxBdHRyaWI6VG91Y2hUeXBlPjI8L0F0dHJpYjpUb3VjaFR5cGU+CiAgICA8L3JkZjpsaT4KICAgPC9yZGY6U2VxPgogIDwvQXR0cmliOkFkcz4KIDwvcmRmOkRlc2NyaXB0aW9uPgoKIDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PScnCiAgeG1sbnM6ZGM9J2h0dHA6Ly9wdXJsLm9yZy9kYy9lbGVtZW50cy8xLjEvJz4KICA8ZGM6dGl0bGU+CiAgIDxyZGY6QWx0PgogICAgPHJkZjpsaSB4bWw6bGFuZz0neC1kZWZhdWx0Jz7mnKrlkb3lkI3nmoTorr7orqEgLSAxPC9yZGY6bGk+CiAgIDwvcmRmOkFsdD4KICA8L2RjOnRpdGxlPgogPC9yZGY6RGVzY3JpcHRpb24+CgogPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9JycKICB4bWxuczpwZGY9J2h0dHA6Ly9ucy5hZG9iZS5jb20vcGRmLzEuMy8nPgogIDxwZGY6QXV0aG9yPuWNl+Wxv+OAgTwvcGRmOkF1dGhvcj4KIDwvcmRmOkRlc2NyaXB0aW9uPgoKIDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PScnCiAgeG1sbnM6eG1wPSdodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvJz4KICA8eG1wOkNyZWF0b3JUb29sPkNhbnZhPC94bXA6Q3JlYXRvclRvb2w+CiA8L3JkZjpEZXNjcmlwdGlvbj4KPC9yZGY6UkRGPgo8L3g6eG1wbWV0YT4KPD94cGFja2V0IGVuZD0ncic/PnUCFecAAATDSURBVGiB7drLb1VVFAbwb619zrm997b2QR/2oRRJFUwRaEAEtfERhDDQiTFq1JgYHSDBiToxMVFjogMNidEByoCYMDJqoxMTjZAwQUSEQIEiRQRue+nrtr2997z2Wv4X95Cc8/sL1jf4svbO3oRMIo4WWrHpk/vBTRbRnMC/vEK1kwsqvlkFwnqZyB03WwKudt6UfCfQ+9TjaHvl96THTh0n6QHS5lxnDxwxIKv4b/8E8usKZuLiddl9/UEtHRhG+bNfDKH73+ZnF9D+3aw472+Ckw/grt0DICtIo3HSA6TJ+Y4uOMaFMsG6yhv0SVDetTVAl8bmD7duXTm+fuyJI30fTb+nA/ETVzrJu+fDM8htbsOuh9/B6fY7k46QOpT0AGlxKpeD19IJJgUUTCrSNjuNhdaenW537hlvUN+kpg6YFkVobyDIKTq39349sW/8DRKY7ar2dM9qcBhgU6WcdJzUyArSIGc77gJIYFhZVYUgw0z8DQPbECnIsBUrUCgkNBYt4rlDLVejxdyo+MENiUITVWOrAOphhNGlW0lHSoXsDtIgBIDUkggE0EEm/o2JuplgvQ1FNas9Qx6TCjS4GZho0rf+38trxKueUOBpITrFAFsiKbpu0nFSIytIg0gcwM07rIBVq/tA1E2xBKa/yfMeaIbb4cB0uKpQmD5Hg37X6IlaHE2HfZYxJla2gGjakJKCNek8aZFd0htEjUF7F9l8M0NB6xSAAo7ECrUKsBLnmZw2l5xmA6fNUTPgOcQIQegnw/uYGSBiq5J0nNTINkiDiLW4VTYGUKui15QJ7JBoOTT+mWW19+U18oUoR7A1S/GyaDwbq4oaNQwAm5tUUNDYzrCXdJzUyArSINqUh40jVQBQHFbBXoBcw7DhlbqJpiLlLgeaY6hVtfMW0UxEyiSiMKqoBmCE7JEqsiNWg2RHrAZhAj6eLwkxmJj+sMD+SAE/VFOrqdSmfapf8DU4V0d4qY6wHKkQohjkigICHIkARADXlupJx0mNbIM0CC/M4TEAtVAk312g8Jb9QoyUi/c6X+ba3VXw2uL6ZMnEc6rwCewoA8SqClK8C+YxJpAEgSVDQJx0onTI3kEa6FR7LyyAnhe6Uf7qDIkDHTowdAyUH/X612Jl/Dhmz0eI51vgjzv/cMU/agwOWuWT6jaDwwpEFJYMdixOJR0nFUzSA6TJQb+K1wstGPx0FkHsYONfIeZ+ksuRLs75f94owpMmpy027RtaK2te273NL1WPVM/OlrjgMtu6EjHABg9VsnI0SrZBEjB3qBelX6fgeXm0DHuIS21YOdQx4u6cnW5+dKEYLxYsBRsnpw5eYmgIU5kVFFthjYfJhSk8l3SAFMkKkoDpzwchxUUU7i4SeapBOX6ZDB5p2iF7a2Oh1bCI8rdFRDM+nL4K/Kut8IIII0vZH6xGywqSENVRTO6/TsSkINrqDUT9A29f+/Hyq31UHCa0rtultlZBfeoCet66mPS4qZUVJAGlA3fAvxajaaCZNIaKH74YXTU/e0O0BAG8NYTul2aSHjOD7B0kMd4qF7YaaLwcdJgijQx+YFb6nyd4XTGQ/SS5bWTvIAnhAjMAMdA9RBgv/xBZEJmpY2pHvs+2x+3if3I3OcC0YEpNAAAAAElFTkSuQmCC); */

        url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAfQAAAH0CAMAAAD8CC+4AAAAflBMVEX///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////+yfIzaAAAAKnRSTlMAAgkMDQ4PERITFRlISVFUWVpgYmVobW5vc3Z3eXx9goSKjpWXoaOqrLIxv86ZAAACaElEQVR4Ae3dbW7iBhRA0WdcHJqCwRRDCsWvTT8m3v8GR7ADpPkx1jtnH1c3AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAYLHa9dQ3sVhvv359NPEScjrkORZr/vpz/idewuqamaexj2X65b95nv/+/IgX0O3zKZbp/Y/5KXjBlA9DF8v0NT/c34MX7C7HzLy1sUynf/+a5/n/t+AlYw73bGKpPuf7t7kJXrLNTRvL9fv821v8MAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA0K6nvgkqyemQ56CS1TUzT2Mf1NHt8ymoY8qHoQvq2F2OmXlrg0rGHO7ZBJVsc9MGAAAAAAAAAAAAFWIcxDiIcRDjIMZBjIMYBzEOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQLue+iaoJKdDnoNKVtfMPI19UEe3z6egjikfhi6oY3c5ZuatjUoYc7hnE5WwzU0bAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIB/LP6x+Mf+xPxj8Y/FPxb/WPxjAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABo11PfRCXkdMhzVMLqmpmnsY866Pb5FHUw5cPQRR3sLsfMvLVRCWMO92yiEra5aWOxAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAoF1PfROVkNMhz1EJq2tmnsY+6qDb51PUwZQPQxd1sLscM/PWRiWMOdyziUrY5qaNWgAAAAAAAAAAAABAmIkwE2EmwkyEmQgzEWYizAQAAAAAAAAAAAAAgO+81Sm+KMVvegAAAABJRU5ErkJggg==),
        url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAZAAAAGQCAMAAAC3Ycb+AAABYlBMVEX////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////5zPnRAAAAdnRSTlMAAQIDBAUGBwgJCgsMDQ4PEBESExQVFhcYGRobHB0eHyAhIiMkJSYnKCorLC0uLzAxMjM0NTY3ODo7PD0+P0BBQkNERUZISktMTU5PUFFSU1VXWFlaW11eX2BhYmVnaGlqa21vcHJzdHV2d3l7fX5/gIGCg4WHZfG2JAAAB8BJREFUeAHt3X9XVNfZxvH7uvc+P2bmMDAM4DAZgmBAMQ+YRwSilWrRhBgpDZLGJNpKDbGNJjZJ7fuvdUz+yWoSLHj2Wv1+XgL3mn04++x9XSa5xxhchiS4Z2WrVUa3JMCLsf7c7KkqkyEFWXtu/cb1lemGy1A7Wdm7dOfwYPvcWJQMdXNrDDYPnj3dX+myZiVAbmVv4+7jw52lsTQGwkCyzuLm7e21mVaQ1Q6y0OjOnl3ot/mBJEIhb422m5nLkgB5iNGZRzr0nMlSBQAAAAAAAAAAAAAAAAAAAAAAAEAmN1kaoDSuycmG4AlcJJVckuE5hXJ41Tp3q4s8K4o8SmZQ/kMYQVRtv9HG2NSp8VbmZvDG9Mbdrw53ljqZrBbycuKti2vn+1UQ85A3B1cfDANtXFYHxZEz1z7+9IPlicIN3uit7n8xjHyyWigb/7+Pnvz9/pU3GjLoRSja71amG0FWB/mLgXz774G44WVs4FQVVdNAFKszv/3jZy+XLHjIGlWrjC5L4aEOmUIMwWQ10U/+7YVkQzW+GGZBMqRBL9iRgb1FAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOCePKSYZdHdkAR5XnXG22V0QwKkonP67ZXFqWaUoX6K1eyVP+zdXBpPIq8Lyjpv7/7t63vv9hvBUDsp6y7vff2PP/9m0HQZUkidXLhx70+770yVbqifvHFq6d2r///mSJQhAYrN8f5gaiR3GRIgD3mjWabzZggpuMuQEBkAAADx568XZPIQgsmQVoWGIQUalsycqjIZkqlhur4y3XBZ/RAavUt3DodFZbIUUOW3eTCs8pPVDgqN3sbdx4c7S2MMJLE62CBDAkJjWJicyUCl+E/hx9J9JELPmezXAAAAAAAAAAAAAGQukwxpkIcQgzORRMizZnu0yoMbUqCs3V84O9stgyEBCq2Zte3bm4udXIYUFqzO0s7hV3c3Ujm8zkC6F/afPju4Omi61Q+KY+e2Dw73V3slv5AUKDSmV67fWJ/jaG4iFKup2bn+WOEyJEAey1bVyIIbkiDzEKJMBuKOCDfH0clDFoPLkASFYmR8fKQIMiRAXk6cWV4+M8GLWhqUjb517aOPri1wyzgJUjF18eMnTz6+OFVIVjfIi96lz7799rNLPeL/k6Cse377/v0Pzo+zZCVBodVfvnJluU8wQhrkWTXxxhsTxE+lQh7zZrPIgiwN7P1I/pz9SlAIHGNKh0JWVq2SqJVESHm7d/p0r527IQGK1czFra3VmSrK6gcVE8u7Dx/uLk/wIp0Cqeitff7d9/fWepwKSOJLpIrJC3uPHu1dmOQh8vPkweV20hTb85dv3bo8346yX0J3V3byQXNedAaLi4POz61YkELZmR70Rk/+z6SQt0ZHW3mQ/UeQF93F9aur86/hM5vc4y+dQUCsZjc/eXBnvd90O2kyIh9/ieLouduPnx3emKuC1Q+KIwvvHz59cG22GWT1Q2j213b2t1fSKHWGPGvPLK2cm66iG9KYSKvTHW2wK57SgdgsumSvAzgzDgAAAAAAAAAAAAAAAAAAAAAAJEsHJHcZEop5LPIoWQrgoWhP9rojebAUwPOxuXfWlmcS6QVDaM28u/f57mqvdEMSMRhnb/31+4dbpytX/eFkUGwvDgdyhHRzhefkdgIQmsMla7oMR8nKrcoTSd+Gjv5Q/zErV3b8oKP+26s4MszKHYmyE8KLYRYk+3U8777Iyl05qaxcyI+wdSJ/mZW7flItQDhaRJ7yH7Jyk+jJQmJZuVBiWblQyJvtdjNPZR6Qh5SycqH6s3IBAAAFPyClFlLIsiy86kggnUjUeXQZjkrmHoKbkigDgDwWraqZBz+JuoxgOCKF5sSbc4PxRrBjE9sL7x9+c3BttuWGI/Ji8vzmzcuLnVzHedbsw5eVSzIcieLI/Nb9Lz+9PGi67HgotP6bUjIKxH7/5J9f3pyrgo6ztm/jlWr74HHkzHt/eXJ/881WPL6BhHL8RbFlMByVN3rvvLezdf44DxVJr1z9CmVV78zZuclmsGMk91ebBuSxMTJaFcGVxt4iNPxCL0sE2JkFAAAAAAAAAAAAAAAAAAAAAOB/o7sL8udSGQnkISubjVQSbiAvRk8NpsfLIEsAlI3NX7q6vthNI08a3uyv33nwyeZsFa1+UKjmbhw+e/zh2dEoqx0UWrPXHjw9fH9hJLrVD15OrWzv76z1G24JgMdq+tzK0kw7cxnSSKAY7XZaqcwDUogpJZ9CydWeQ7JUAQAAAAAAAAAAAAAAAAAAmblkiYA8xOguSwIU8ma73czTmAjkRWewuDjoFMESAMX2/OVbty7PtzNZ/aBi8sLeo0d7FyYLt9pBKnprn3/3/b21XhJX7aFiYnn34cPd5YncrX5QrGYubm2tzlRRlgAob/dOn+61c8kSAIWsrKoyC7I0QB5DUuOAZAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAohBx7FGIwd2SAHnWbI+28iBLAKSs3V84O9sto6x+UGjNrG3f3lzsJJErBmWdpZ3Dr+5uTDeC1Q5S1l3Z/+bZwdVB02W1g7Kxc9sHX+yv9kq3+kGhMb1y/ebGXCJxulCspmbn+mOJhLdCHstW1ciCWxIgG0YhymoHohABAAAAAAAbEvgXStuuoNnAWXoAAAAASUVORK5CYII=),
        url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAABGlBMVEX///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////9y/ChlAAAAXnRSTlMAAQIDBAUGBwgJCgsMDQ4PEBESExQVFhcYGRobHB0eHyAhIiMkJSYoKSorLC8wMjM0NTY4OTo8PT4/QEFDSEpLTlBRUlNWV1pcXWBhYmdpa2xtb3B1dnd7fH6Bg4SFICRGzgAABJlJREFUeAHt3f9SE1kWwPF7zr23u5PODwiJEBI0IqAgQaMuS4Sgu2jvanQGxUEcZt7/Naacqpl/pmY8UFaaVH0/j/DlNEl3qs91zomqOFjdkFYAAIj64EUcDDRb7DRTJYSBpquPx7udyGgZaH04PS+2cmIZ+Obo9HK6QywLrW5MisPbKbEMJDT6693cE8tCfJolSisb+cr9PQAAAIg42IiPiSeX9SZvpdfiKZ6J1jaPjvfagdmyDNbSvz9enNxNiWUQlvY/fj4ZZMQy8FyGdhLq/IM3E43xhs8VAEBURRwsNFZrlaCEMJDYurczaPIIwULz+/99NxlUiGXgm08+/Ppup8Z1aKC1h//78J97FWIZSHLr4ZP7Le5dTDSpNXM+DY1E5//FFgAAAAAAAAAAAAAA1AcvDgYSqq12I6GWhVYHz8Y7C8yWgYTWsx8+vbSs7oGEzsGnn1/fzQyxoPXtl6//tRwNsSBx4fbd5Yo6A0hI02hsBREVBwAAgHldRAUNSVRTLkja6q3Ug6EWJLT3jo82a94ZMFiDk4uP++3gTIj1+WqxuAyVFAZ6hX/wkBD/+tUBAAAAnFao4gygSbOzkHlDLUjs7I4fr6aGWJB8qzifDuvq8E1a2377y+moaXhyCcn6h8Vko2qYLIjPV9f7DdPzJYgmWeqNrWA+rRAAAACiXp0FxKf1RtV0BwPNesPRRsNwDwMJi6Pp6aSfWGIRqzM+vyzWM0MsaHO3mB52oyEWNO1sba/laogF0VjNrT/YQJSxmoe3IiAak2DKBQ31Lqe3fv9zgfk9ISztn12cDFK5+b9U5XmiUm6s9v7Z5zmIpZXugwfdinAZGoT20zdvnpb8qovMyT/42H/x5cuLfnSlEh8Tf+NbSVw+eP/+wLRRiC+lmt959OhObvmrQnyl0ahwU2wjol7+sRW4iQUAAAAAAAAAAAAAURGZx51RKm7WQlarzt0+U4m1paVaEDdbmq9tb3VSKfVVAnFXpPXN/f3Nus76T9Q9nBbD0vYJib/OYEtcOTo7O1qJ4mZJsvXi8qfnnSDltLreYEvsHV9cHPdmHSvpT36cjha9K0dcvdZg+9beq1d7rTDjWL6xMRr2MnWlkOxecXk+7gR3NZK2B4N2KrM/JLdZT1VKipWsTU6vM9gasyxoGZ9GZaX6Y7BXM+Uww+892BBvTwVSAQAAAAAAAAAAAAAAAAAAAAAAAAAAAODF5ptD1FtXE4FlDHb2/TUcJCtJ//cFMmHOUmmSJd5eq7ydW+UTzbvr/UZws9/m9ta+9OqGkGzteTHZqEpZ69Tmida2316ejppeSlrUN0+kulWcT4d1LeNjRdx8kdjZHT9eTS2xoEmzs5ipONiW5npzK5RQCgAAAOD7NURjYjzwBD5f7rcrnhAGUrlz8OJpN2G0DLTx6P2XNw9yQyz4r7H+f/97x+IyhM9v9dsVdQYQjZGnvmbyZykAAAAAAAAAAAAAAAAAAES9OguIpvVG1bRoBpr1hqONhjfUQlgYTU8n/eSbsSAutsfnl8V6RixDLN/YLaaH3WiIBUk6W9truRpiQTRWq6k3tMJvuLRZnVwJllwAAAAASUVORK5CYII=);
        position:fixed;left:0;top:0;right:0;bottom:0;z-index:-2;-webkit-animation:snow 10s linear infinite;-moz-animation:snow 10s linear infinite;-ms-animation:snow 10s linear infinite;animation: snow 10s linear infinite;}

      @keyframes snow{
          0%{background-position:0 0,0 0,0 0;}
          50%{background-position:500px 500px,100px 200px,-100px 150px;}
          100%{background-position:500px 1000px,200px 400px,-100px 300px;}
      }
      @-moz-keyframes snow {
          0%{background-position:0 0,0 0,0 0;}
          50%{background-position:500px 500px,100px 200px,-100px 150px;}
          100%{background-position:400px 1000px,200px 400px,100px 300px;}
      }
      @-webkit-keyframes snow {
            0%{background-position:0 0,0 0,0 0;}
            50%{background-position:500px 500px,100px 200px,-100px 150px;}
            100%{background-position:500px 1000px,200px 400px,-100px 300px;}
      }
      @-ms-keyframes snow {
            0%{background-position:0 0,0 0,0 0;}
            50%{background-position:500px 500px,100px 200px,-100px 150px;}
            100%{background-position:500px 1000px,200px 400px,-100px 300px;}
      }
    </style>
  </head>
  <body class="theme-mode-light">
    <div id="app" data-server-rendered="true"><div class="theme-container sidebar-open have-rightmenu"><header class="navbar blur"><div title="目录" class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/img/b.png" alt="guqzhou" class="logo"> <span class="site-name can-hide">guqzhou</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><a href="/pages/a61e4f/" class="nav-link">快捷导航</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端" class="dropdown-title"><a href="/web/" class="link-title">前端</a> <span class="title" style="display:none;">前端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/html/" class="nav-link">Html 篇</a></li><li class="dropdown-item"><!----> <a href="/pages/1269c5/" class="nav-link">Javascript 基础篇</a></li><li class="dropdown-item"><h4>框架</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/frame/vue2/1326d8/" class="nav-link">Vue2</a></li></ul></li><li class="dropdown-item"><h4>前端文章</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/css/" class="nav-link">Css 篇</a></li><li class="dropdown-subitem"><a href="/note/gzh/" class="nav-link">微信开发</a></li><li class="dropdown-subitem"><a href="/pages/8143cc480faf9a11/" class="nav-link">JavaScript</a></li><li class="dropdown-subitem"><a href="/pages/802a1ca6f7b71c59/" class="nav-link">Vue</a></li></ul></li><li class="dropdown-item"><h4>学习笔记</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/note/javascript/" class="nav-link">《JavaScript教程》笔记</a></li><li class="dropdown-subitem"><a href="/note/es6/" class="nav-link">《ES6 教程》笔记</a></li><li class="dropdown-subitem"><a href="/note/vue/" class="nav-link">《Vue》笔记</a></li><li class="dropdown-subitem"><a href="/note/typescript-axios/" class="nav-link">《TypeScript 从零实现 axios》</a></li><li class="dropdown-subitem"><a href="/note/wx-miniprogram/" aria-current="page" class="nav-link router-link-exact-active router-link-active">小程序笔记</a></li><li class="dropdown-subitem"><a href="/note/javascriptbasics/" class="nav-link">JavaScript 基础</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="服务器" class="dropdown-title"><a href="/serve/" class="link-title">服务器</a> <span class="title" style="display:none;">服务器</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/9dd29d/" class="nav-link">nginx</a></li><li class="dropdown-item"><!----> <a href="/pages/0a83b083bdf257cb/" class="nav-link">CSS</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="页面" class="dropdown-title"><a href="/ui/" class="link-title">页面</a> <span class="title" style="display:none;">页面</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/8309a5b876fc95e3/" class="nav-link">HTML</a></li><li class="dropdown-item"><!----> <a href="/pages/0a83b083bdf257cb/" class="nav-link">CSS</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="技术" class="dropdown-title"><a href="/technology/" class="link-title">技术</a> <span class="title" style="display:none;">技术</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/9a7ee40fc232253e/" class="nav-link">技术文档</a></li><li class="dropdown-item"><!----> <a href="/pages/4c778760be26d8b3/" class="nav-link">GitHub技巧</a></li><li class="dropdown-item"><!----> <a href="/pages/117708e0af7f0bd9/" class="nav-link">Nodejs</a></li><li class="dropdown-item"><!----> <a href="/pages/41f87d890d0a02af/" class="nav-link">博客搭建</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="面试" class="dropdown-title"><a href="/interview/" class="link-title">面试</a> <span class="title" style="display:none;">面试</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>面试题库</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/58734d/" class="nav-link">HTML</a></li><li class="dropdown-subitem"><a href="/pages/26864d/" class="nav-link">CSS</a></li><li class="dropdown-subitem"><a href="/pages/ceea45/" class="nav-link">jQuery</a></li><li class="dropdown-subitem"><a href="/pages/4547e6/" class="nav-link">Vue</a></li><li class="dropdown-subitem"><a href="/pages/a134b2/" class="nav-link">零碎</a></li></ul></li><li class="dropdown-item"><h4>面试心得</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/331dbf/" class="nav-link">杂言碎语</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="读书派" class="dropdown-title"><a href="/bookssent/" class="link-title">读书派</a> <span class="title" style="display:none;">读书派</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>摘抄收录</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/ChickenSoup/" class="nav-link">☆ 励志鸡汤</a></li><li class="dropdown-subitem"><a href="/PassionLife/" class="nav-link">❀ 人间烟火</a></li><li class="dropdown-subitem"><a href="/ThingsLost/" class="nav-link">☣ 万物沦丧</a></li><li class="dropdown-subitem"><a href="/NoTrouble/" class="nav-link">✌ 关掉烦恼</a></li><li class="dropdown-subitem"><a href="/Bistro/" class="nav-link">✲ 小酒馆</a></li></ul></li><li class="dropdown-item"><h4>读书笔记</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/note/xgqq/" class="nav-link">《小狗钱钱》</a></li><li class="dropdown-subitem"><a href="/note/qbbfbb/" class="nav-link">《穷爸爸富爸爸》</a></li><li class="dropdown-subitem"><a href="/note/cmrsyfgbjb/" class="nav-link">《聪明人使用方格笔记本》</a></li></ul></li></ul></div></div><div class="nav-item"><a href="/about/" class="nav-link">关于</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="更多" class="dropdown-title"><a href="/more/" class="link-title">更多</a> <span class="title" style="display:none;">更多</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/f2a556/" class="nav-link">学习</a></li><li class="dropdown-item"><!----> <a href="/pages/aea6571b7a8bae86/" class="nav-link">面试</a></li><li class="dropdown-item"><!----> <a href="/pages/2d615df9a36a98ed/" class="nav-link">心情杂货</a></li><li class="dropdown-item"><!----> <a href="/friends/" class="nav-link">友情链接</a></li><li class="dropdown-item"><!----> <a href="/categories/" class="nav-link">分类</a></li><li class="dropdown-item"><!----> <a href="/tags/" class="nav-link">标签</a></li><li class="dropdown-item"><!----> <a href="/archives/" class="nav-link">归档</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="收藏" class="dropdown-title"><a href="/pages/beb6c0bd8a66cea6/" class="link-title">收藏</a> <span class="title" style="display:none;">收藏</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/beb6c0bd8a66cea6/" class="nav-link">网站</a></li><li class="dropdown-item"><!----> <a href="/pages/eee83a9211a70f9d/" class="nav-link">资源</a></li><li class="dropdown-item"><!----> <a href="/pages/12df8ace52d493f6/" class="nav-link">Vue资源</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="站点线路" class="dropdown-title"><!----> <span class="title" style="display:;">站点线路</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://guqzhou.tech" target="_blank" rel="noopener noreferrer" class="nav-link external">
  主站CDN
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://vercel.guqzhou.tech" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Vercel
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://netlify.guqzhou.tech/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Netlify
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://github.guqzhou.tech/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <a href="https://github.com/guqzhou/guqzhou.github.io" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar" style="display:none;"><div class="blogger"><img src="/img/TX.png"> <div class="blogger-info"><h3>guqzhou</h3> <span>
        喜欢所以去追求！
      </span></div></div> <nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><a href="/pages/a61e4f/" class="nav-link">快捷导航</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端" class="dropdown-title"><a href="/web/" class="link-title">前端</a> <span class="title" style="display:none;">前端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/html/" class="nav-link">Html 篇</a></li><li class="dropdown-item"><!----> <a href="/pages/1269c5/" class="nav-link">Javascript 基础篇</a></li><li class="dropdown-item"><h4>框架</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/frame/vue2/1326d8/" class="nav-link">Vue2</a></li></ul></li><li class="dropdown-item"><h4>前端文章</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/css/" class="nav-link">Css 篇</a></li><li class="dropdown-subitem"><a href="/note/gzh/" class="nav-link">微信开发</a></li><li class="dropdown-subitem"><a href="/pages/8143cc480faf9a11/" class="nav-link">JavaScript</a></li><li class="dropdown-subitem"><a href="/pages/802a1ca6f7b71c59/" class="nav-link">Vue</a></li></ul></li><li class="dropdown-item"><h4>学习笔记</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/note/javascript/" class="nav-link">《JavaScript教程》笔记</a></li><li class="dropdown-subitem"><a href="/note/es6/" class="nav-link">《ES6 教程》笔记</a></li><li class="dropdown-subitem"><a href="/note/vue/" class="nav-link">《Vue》笔记</a></li><li class="dropdown-subitem"><a href="/note/typescript-axios/" class="nav-link">《TypeScript 从零实现 axios》</a></li><li class="dropdown-subitem"><a href="/note/wx-miniprogram/" aria-current="page" class="nav-link router-link-exact-active router-link-active">小程序笔记</a></li><li class="dropdown-subitem"><a href="/note/javascriptbasics/" class="nav-link">JavaScript 基础</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="服务器" class="dropdown-title"><a href="/serve/" class="link-title">服务器</a> <span class="title" style="display:none;">服务器</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/9dd29d/" class="nav-link">nginx</a></li><li class="dropdown-item"><!----> <a href="/pages/0a83b083bdf257cb/" class="nav-link">CSS</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="页面" class="dropdown-title"><a href="/ui/" class="link-title">页面</a> <span class="title" style="display:none;">页面</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/8309a5b876fc95e3/" class="nav-link">HTML</a></li><li class="dropdown-item"><!----> <a href="/pages/0a83b083bdf257cb/" class="nav-link">CSS</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="技术" class="dropdown-title"><a href="/technology/" class="link-title">技术</a> <span class="title" style="display:none;">技术</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/9a7ee40fc232253e/" class="nav-link">技术文档</a></li><li class="dropdown-item"><!----> <a href="/pages/4c778760be26d8b3/" class="nav-link">GitHub技巧</a></li><li class="dropdown-item"><!----> <a href="/pages/117708e0af7f0bd9/" class="nav-link">Nodejs</a></li><li class="dropdown-item"><!----> <a href="/pages/41f87d890d0a02af/" class="nav-link">博客搭建</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="面试" class="dropdown-title"><a href="/interview/" class="link-title">面试</a> <span class="title" style="display:none;">面试</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>面试题库</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/58734d/" class="nav-link">HTML</a></li><li class="dropdown-subitem"><a href="/pages/26864d/" class="nav-link">CSS</a></li><li class="dropdown-subitem"><a href="/pages/ceea45/" class="nav-link">jQuery</a></li><li class="dropdown-subitem"><a href="/pages/4547e6/" class="nav-link">Vue</a></li><li class="dropdown-subitem"><a href="/pages/a134b2/" class="nav-link">零碎</a></li></ul></li><li class="dropdown-item"><h4>面试心得</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/331dbf/" class="nav-link">杂言碎语</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="读书派" class="dropdown-title"><a href="/bookssent/" class="link-title">读书派</a> <span class="title" style="display:none;">读书派</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>摘抄收录</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/ChickenSoup/" class="nav-link">☆ 励志鸡汤</a></li><li class="dropdown-subitem"><a href="/PassionLife/" class="nav-link">❀ 人间烟火</a></li><li class="dropdown-subitem"><a href="/ThingsLost/" class="nav-link">☣ 万物沦丧</a></li><li class="dropdown-subitem"><a href="/NoTrouble/" class="nav-link">✌ 关掉烦恼</a></li><li class="dropdown-subitem"><a href="/Bistro/" class="nav-link">✲ 小酒馆</a></li></ul></li><li class="dropdown-item"><h4>读书笔记</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/note/xgqq/" class="nav-link">《小狗钱钱》</a></li><li class="dropdown-subitem"><a href="/note/qbbfbb/" class="nav-link">《穷爸爸富爸爸》</a></li><li class="dropdown-subitem"><a href="/note/cmrsyfgbjb/" class="nav-link">《聪明人使用方格笔记本》</a></li></ul></li></ul></div></div><div class="nav-item"><a href="/about/" class="nav-link">关于</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="更多" class="dropdown-title"><a href="/more/" class="link-title">更多</a> <span class="title" style="display:none;">更多</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/f2a556/" class="nav-link">学习</a></li><li class="dropdown-item"><!----> <a href="/pages/aea6571b7a8bae86/" class="nav-link">面试</a></li><li class="dropdown-item"><!----> <a href="/pages/2d615df9a36a98ed/" class="nav-link">心情杂货</a></li><li class="dropdown-item"><!----> <a href="/friends/" class="nav-link">友情链接</a></li><li class="dropdown-item"><!----> <a href="/categories/" class="nav-link">分类</a></li><li class="dropdown-item"><!----> <a href="/tags/" class="nav-link">标签</a></li><li class="dropdown-item"><!----> <a href="/archives/" class="nav-link">归档</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="收藏" class="dropdown-title"><a href="/pages/beb6c0bd8a66cea6/" class="link-title">收藏</a> <span class="title" style="display:none;">收藏</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/beb6c0bd8a66cea6/" class="nav-link">网站</a></li><li class="dropdown-item"><!----> <a href="/pages/eee83a9211a70f9d/" class="nav-link">资源</a></li><li class="dropdown-item"><!----> <a href="/pages/12df8ace52d493f6/" class="nav-link">Vue资源</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="站点线路" class="dropdown-title"><!----> <span class="title" style="display:;">站点线路</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://guqzhou.tech" target="_blank" rel="noopener noreferrer" class="nav-link external">
  主站CDN
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://vercel.guqzhou.tech" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Vercel
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://netlify.guqzhou.tech/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Netlify
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://github.guqzhou.tech/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <a href="https://github.com/guqzhou/guqzhou.github.io" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><a href="/frame/vue2/" class="sidebar-link">vue2</a></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>CSS</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Javascript基础</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>javascript进阶</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>typeScipt</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>vue2</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>vue3</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>react</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>vite介绍</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>vue实战</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>pinia的使用</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>gis</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>前端文章</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>JavaScript文章</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Vue文章</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>小程序开发文章</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>uni-app</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>学习笔记</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/note/es6/" class="sidebar-link">《ES6 教程》笔记</a></li><li><a href="/note/javascript/" class="sidebar-link">《JavaScript教程》笔记</a></li><li><a href="/note/typescript-axios/" class="sidebar-link">《TypeScript 从零实现 axios》</a></li><li><a href="/note/vue/" class="sidebar-link">《Vue》笔记</a></li><li><a href="/note/wx-miniprogram/" aria-current="page" class="active sidebar-link">小程序笔记</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/note/wx-miniprogram/#基础课程部分" class="sidebar-link">基础课程部分</a></li><li class="sidebar-sub-header"><a href="/note/wx-miniprogram/#实战课程部分" class="sidebar-link">实战课程部分</a></li><li class="sidebar-sub-header"><a href="/note/wx-miniprogram/#《发现》页面" class="sidebar-link">《发现》页面</a></li><li class="sidebar-sub-header"><a href="/note/wx-miniprogram/#《我的》页面" class="sidebar-link">《我的》页面</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/note/wx-miniprogram/#版本更新检测" class="sidebar-link">版本更新检测</a></li><li class="sidebar-sub-header"><a href="/note/wx-miniprogram/#性能优化" class="sidebar-link">性能优化</a></li><li class="sidebar-sub-header"><a href="/note/wx-miniprogram/#场景值scene的作用与应用场景" class="sidebar-link">场景值scene的作用与应用场景</a></li><li class="sidebar-sub-header"><a href="/note/wx-miniprogram/#小程序的-seo-页面收录sitemap" class="sidebar-link">小程序的&quot;SEO&quot;---页面收录sitemap</a></li><li class="sidebar-sub-header"><a href="/note/wx-miniprogram/#小程序上线审核流程" class="sidebar-link">小程序上线审核流程</a></li></ul></li><li class="sidebar-sub-header"><a href="/note/wx-miniprogram/#后台管理系统" class="sidebar-link">后台管理系统</a></li></ul></li><li><a href="/note/javascriptbasics/" class="sidebar-link">JavaScript基础</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>TaroUI的使用</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>工具使用</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <div><main class="page"> <div class="theme-vdoing-wrapper"><div class="articleInfo-wrap" data-v-21c42599><div class="articleInfo" data-v-21c42599><ul class="breadcrumbs" data-v-21c42599><li data-v-21c42599><a href="/" title="首页" class="iconfont icon-home router-link-active" data-v-21c42599></a></li> <li data-v-21c42599><a href="/web" title="前端-目录页" data-v-21c42599>前端</a></li> <li data-v-21c42599><a href="/web/#学习笔记" title="前端#学习笔记" data-v-21c42599>学习笔记</a></li></ul> <div class="info" data-v-21c42599><div title="作者" class="author iconfont icon-touxiang" data-v-21c42599><a href="https://github.com/xugaoyi" target="_blank" title="作者" class="beLink" data-v-21c42599>xugaoyi</a></div> <div title="创建时间" class="date iconfont icon-riqi" data-v-21c42599><a href="javascript:;" data-v-21c42599>2019-12-25</a></div> <!----> <div class="page-view" style="margin-left:0;" data-v-6cb61500 data-v-21c42599><div title="文章字数" class="book-words iconfont icon-book" data-v-6cb61500><a href="javascript:;" style="margin-left: 3px; color: #888" data-v-6cb61500>0</a></div> <!----> <div title="浏览量" class="page-view iconfont icon-view1" data-v-6cb61500><a href="javascript:;" id="busuanzi_value_page_pv" class="view-data" style="color: #888; margin-left: 3px" data-v-6cb61500><i title="正在获取..." class="loading iconfont icon-loading" data-v-6cb61500></i></a></div></div></div></div></div> <!----> <div class="content-wrapper"><div class="right-menu-wrapper"><div class="right-menu-margin"><div class="right-menu-content"></div></div></div> <h1><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAAXNSR0IArs4c6QAABH1JREFUSA3tVl1oHFUUPmdmd2ltklqbpJDiNnXFmgbFktho7YMPNiJSSZM0+CAYSkUELVhM6YuwIPpgoOKDqOBDC0XE2CQoNtQXBUFTTcCi+Wlh1V2TQExsUzcltd3M9Tt3ZjZzZ2fT+OJTL8yeM+eee757fmeJbq//KQL8X3DUSFOcfr7cRsRtxNQMWueeVzOkaITIGqQHNg5y8+jNW9ldM7A6nTpAjuolUikAwq7CE3WcM2RRDz+XGVgN3FptU/aUSlvq9Pa3iZ1+sgAqJyyAFqkipd9dqiwHF3P65YycLWc/6sqGrvoEoIp6DOFaX5h6+dnfjkWprwqsPk0dUGq5vySwDImC10KxFHgGL1SWoc92O3eVht09qdXNH11I2SsTsJYqMWzihqGMi+A+Garf3BAuuLI5oGlULyNfyB/HYNujwktOfRrMr5t77NmevqaUopx0grnKAyvVpmwUDB4x6FPXuGvYLTDwWsejwgtgkYKPqRJg8SV6xaiZ3ZTppGneS4yfH5/66fZSDHv+QZci/+h5c5UHtpy67JUqGppM0sh0Nc1dW6/N1W5Yoqat8/TU/VnadmdeW2PLLSyh0cvxBs3KbqTmwYPpxN4do/mzE8nEpvX/UMu2Wbp74zUAK5q6WkHns7V0eWkdPbPzd3rxkTGybadYySumVzhcaJFbs5UrEkQ/+CK8gF5dnh/6ciIZ73gwQ927L1IitoxKLXYP3SjYdOrHHfTZhRRlFyrorafPk20B3HPD1y2G3qKZME5Jcf3t/HUC13/8tSd++vqFveMUTwAUxSUFI1QekR1+bIze3D9MF2aq6cPvG72CgnldWCFqyRw3lwH8ZMerjTD9ElRO7Gv44wNpC90aASqGfVlz/Rx17srQ57/UU26hkhQqUB7dBR71WmzQhHUnblGmVOEw0jhbV1n9OlXUDCIRGaNV5Jp43N516fN7JmnTHdfp7Hgy0luO4aMhtkLL8Bi3bUWYvzh5Mn1dTxrL6QmGuRhGL/TiTTxRoEdTszSaq9GR0NGA3KdkOz3hqSV3MIDhQ5IVX/Ivx3umBti2es2h4eZby7x8br1rkf7Mo90AqC8aQ3sJeNzqFRu+vSANAQe3PL7l0HGOAdwDCeZYvNKeoZp1Qfs6Aipndh86HmFRi0LAnEO47wsqM6cdfjh3jBPUzhZy7nvlUfFsamED1VQt6aISHVymXZ/B2aCtIG8AI8xfobj2d3en1wWVhOeHELKmLQ1s211s88comkv4UCwWyF787mJdYXtNfhKAXVqnKTq8QZvGAGGOfaTo5pGZ/PwbUCr5+DPr/1J92JNHr9aOl/F3iI5+O1nfybsGxoimvZ3ViWSluDITw3P37mypheDIPY0tw7+O/5ApbkYw+zpfaUVu32Pi98+defdUhEpZkRFq0aqyNh9FuL9hpYbEm6iwi0z2REd09ZmyENEbuhjDWzKvZXTqKYaBIr3tt5kuPtQBZFvEUwHt60vfCNu41XsksH9Ij1BMMz1Y0OOunHNShFIP5868g5zeXmuLwL9T4b6Q2+KejgAAAABJRU5ErkJggg==">
          小程序笔记
        </h1> <div class="theme-vdoing-content content__default"><p>本章内容转自 <a href="https://github.com/xugaoyi/" target="_blank">xugaoyi</a> 的 <a href="https://xugaoyi.com/note/wx-miniprogram/" target="_blank">小程序笔记</a></p> <h1 id="小程序笔记"><a href="#小程序笔记" class="header-anchor">#</a> 小程序笔记</h1> <h2 id="基础课程部分"><a href="#基础课程部分" class="header-anchor">#</a> 基础课程部分</h2> <h4 id="微信公众平台"><a href="#微信公众平台" class="header-anchor">#</a> 微信公众平台</h4> <p><a href="https://mp.weixin.qq.com/" target="_blank" rel="noopener noreferrer">https://mp.weixin.qq.com/<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>注册时可选择类型：订阅号、服务号、小程序、企业微信</p> <p><strong>每个邮箱仅能注册一个小程序。</strong></p> <p>个人类型小程序：无法使用微信支付、无法使用卡包功能</p> <h5 id="小程序文档api"><a href="#小程序文档api" class="header-anchor">#</a> 小程序文档API</h5> <p><a href="https://developers.weixin.qq.com/miniprogram/dev/framework/quickstart/" target="_blank" rel="noopener noreferrer">小程序开发文档<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h5 id="微信开放社区"><a href="#微信开放社区" class="header-anchor">#</a> 微信开放社区</h5> <p><a href="https://developers.weixin.qq.com/community/develop/question" target="_blank" rel="noopener noreferrer">微信开发社区<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h4 id="目录说明"><a href="#目录说明" class="header-anchor">#</a> 目录说明</h4> <p><strong>默认目录</strong></p> <p>pages-----------------------页面相关</p> <p>​	index  ----------------- 首页文件夹</p> <p>​		index.js ------------首页js</p> <p>​		index.json---------首页配置</p> <p>​		index.wxml-------首页html</p> <p>​		index.wxss--------首页css</p> <p>utils------------------------工具相关</p> <p>app.js ----------------------项目总js</p> <p>app.json-------------------全局配置( 页面路由以及头部、底部导航的配置等)</p> <p>app.wxss -----------------项目总样式css</p> <p>project.config.json ----项目配置</p> <p><strong>代码构成</strong></p> <p>.json ：配置文件，以json格式存储配置</p> <p>​			 项目中有三种配置：项目配置（project.config.json）、全局配置（app.json）、页面配置（index.json）</p> <p>.wxml: 相当于html文件</p> <p>.wxss: 相当于css</p> <p>.js : 就是js</p> <h4 id="文件说明"><a href="#文件说明" class="header-anchor">#</a> 文件说明</h4> <p><strong>project.config.json项目配置 部分代码说明</strong></p> <p>setting：{</p> <p>urlCheck 是否检测安全的域名</p> <p>es6  是否把es6转es5</p> <p>postcss 是否把css样式自动补全</p> <p>minified 是否压缩</p> <p>}</p> <p><strong>app.json 全局配置</strong></p> <p><a href="https://developers.weixin.qq.com/miniprogram/dev/reference/configuration/app.html" target="_blank" rel="noopener noreferrer">全局配置API<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p><strong>wxml 相关介绍</strong></p> <p><a href="https://developers.weixin.qq.com/miniprogram/dev/framework/view/wxml/" target="_blank" rel="noopener noreferrer">wxmlAPI<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span><span class="token punctuation">&gt;</span></span>{{motto}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>

循环渲染
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name"><span class="token namespace">wx:</span>for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{{list}}<span class="token punctuation">&quot;</span></span> <span class="token attr-name"><span class="token namespace">wx:</span>key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{{index}}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      {{index}} {{item}}
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>

改变for循环item和index的名称
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>block</span> <span class="token attr-name"><span class="token namespace">wx:</span>for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{{list}}<span class="token punctuation">&quot;</span></span> <span class="token attr-name"><span class="token namespace">wx:</span>for-item</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>data<span class="token punctuation">&quot;</span></span> <span class="token attr-name"><span class="token namespace">wx:</span>for-index</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>inx<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
	{{inx}} {{data}}
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>block</span><span class="token punctuation">&gt;</span></span>

条件渲染 (类似vue的v-if、v-else)
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name"><span class="token namespace">wx:</span>if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{{isLogin}}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>已登录<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name"><span class="token namespace">wx:</span>else</span><span class="token punctuation">&gt;</span></span>请登录<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>

条件显示（类似vue的v-show）
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">hidden</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{{isLogin}}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>显示内容<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>

绑定点击事件
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">bindtap</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span>“tapName”</span><span class="token punctuation">&gt;</span></span>按钮<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>

Page({
  tapName: function(event) {
    console.log(event)
  }
})
...

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br></div></div><p><strong>wxss 相关介绍</strong></p> <p><a href="https://developers.weixin.qq.com/miniprogram/dev/framework/view/wxss.html" target="_blank" rel="noopener noreferrer">wxssAPI<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>尺寸单位：rpx，根据屏幕宽度自适应。</p> <p>引入外部wxss：@import ’...‘</p> <p><strong>js相关介绍</strong></p> <p>WXS（WeiXin Script）是小程序的一套脚本语言</p> <p><a href="https://developers.weixin.qq.com/miniprogram/dev/framework/view/wxs/" target="_blank" rel="noopener noreferrer">wxsAPI<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>绑定点击事件</p> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">bindtap</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span>“onTapHandler”</span><span class="token punctuation">&gt;</span></span>点我+1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span><span class="token punctuation">&gt;</span></span>{{count}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token function">Page</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">data</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">count</span><span class="token operator">:</span> <span class="token number">0</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function-variable function">onTapHandler</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  	<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setData</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  		<span class="token literal-property property">count</span><span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>data<span class="token punctuation">.</span>count<span class="token operator">++</span>
  	<span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h5 id="阻止事件冒泡"><a href="#阻止事件冒泡" class="header-anchor">#</a> 阻止事件冒泡</h5> <p>把绑定方式 bindtap 换成 catchtap 即可。</p> <h4 id="第三方库"><a href="#第三方库" class="header-anchor">#</a> 第三方库</h4> <p><strong>WeUI</strong></p> <p>weUI是一套同微信原生视觉体验一致的基础样式库</p> <p><strong>iView Weapp</strong></p> <p>一套高质量的微信小程序UI组件库</p> <p><strong>Vant Weapp</strong></p> <p>轻量、可靠的小程序UI组件库</p> <h4 id="云开发"><a href="#云开发" class="header-anchor">#</a> 云开发</h4> <p><strong>小程序传统开发模式</strong></p> <p>客户端  -----&gt; 服务端（后端代码、数据库）------&gt; 运维（DB维护、文件存储、内容加速、网络防护、容器服务、负载均衡、安全加固等...）</p> <p><strong>小程序云开发模式</strong></p> <p>客户端 -----&gt; 云开发（云函数、云数据库、云存储）</p> <p><strong>传统开发 VS 云开发</strong></p> <p>开发效率低         Serverless（无服务）</p> <p>运维成本高         开发者更关注业务逻辑</p> <p><strong>无服务（Serverless）开发是未来的发展趋势</strong></p> <h5 id="云开发三大基础能力"><a href="#云开发三大基础能力" class="header-anchor">#</a> <strong>云开发三大基础能力</strong></h5> <h5 id="云函数"><a href="#云函数" class="header-anchor">#</a> 云函数</h5> <p>（相当于传统开发中的后台接口）</p> <p>获取appid、获取openid、生成分享图、调用腾讯云SDK ...</p> <h5 id="云数据库"><a href="#云数据库" class="header-anchor">#</a> 云数据库</h5> <p>数据的增、删、改、查 ...</p> <h5 id="云存储"><a href="#云存储" class="header-anchor">#</a> 云存储</h5> <p>管理文件、上传文件、下载文件、分享文件 ...</p> <p><strong>每个小程序账号可免费创建两个环境，建议：开发环境、生成环境</strong></p> <h4 id="云数据库能力"><a href="#云数据库能力" class="header-anchor">#</a> 云数据库能力</h4> <p>云开发提供了一个json数据库，提供2GB免费存储空间。</p> <h4 id="数据类型"><a href="#数据类型" class="header-anchor">#</a> 数据类型</h4> <p>String 字符串</p> <p>Number 数字</p> <p>Object 对象</p> <p>Array 数组</p> <p>Boolean 布尔值</p> <p>GeoPoint 地理位置点</p> <p>Date 时间 （精确到毫秒ms，客户端时间）</p> <p>Null 空</p> <h4 id="操作云数据库"><a href="#操作云数据库" class="header-anchor">#</a> 操作云数据库</h4> <p>小程序控制（读写数据库受权限限制）</p> <p>云函数控制（拥有所有读写数据库的权限）</p> <p>控制台控制（拥有所有读写数据库的权限）</p> <h4 id="云数据库权限管理"><a href="#云数据库权限管理" class="header-anchor">#</a> 云数据库权限管理</h4> <p>仅创建者可写，所有人可读 （适合于文章）</p> <p>仅创建者可读写 (适用于私密内容)</p> <p>仅管理端可写，所有人可读（适用于商品信息）</p> <p>仅管理端可读写（适用于后台敏感数据）</p> <h4 id="操作云数据库-2"><a href="#操作云数据库-2" class="header-anchor">#</a> 操作云数据库</h4> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">//初始化数据库</span>
<span class="token keyword">const</span> db <span class="token operator">=</span> wx<span class="token punctuation">.</span>cloud<span class="token punctuation">.</span><span class="token function">database</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 小程序端初始化数据库，如果在云函数端不需要加wx</span>

<span class="token comment">//切换环境(开发环境/生产环境)</span>
<span class="token keyword">const</span> testDB <span class="token operator">=</span> wx<span class="token punctuation">.</span>cloud<span class="token punctuation">.</span><span class="token function">database</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
	<span class="token literal-property property">env</span><span class="token operator">:</span> <span class="token string">'test'</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h2 id="实战课程部分"><a href="#实战课程部分" class="header-anchor">#</a> 实战课程部分</h2> <h4 id="serverless-无服务"><a href="#serverless-无服务" class="header-anchor">#</a> serverless（无服务）</h4> <p>概念：函数即服务，当需要后端服务的时候，不需要关心后端的IP地址、域名，只需要像调用普通函数一样既可以实现调用。</p> <h4 id="云开发优势"><a href="#云开发优势" class="header-anchor">#</a> 云开发优势</h4> <p>快速上线、专注核心业务、独立开发一个完整的微信小程序、不需要学习新的语言，只需要会javascript、无需运维， 节约成本、数据安全、</p> <h4 id="云开发提供能力"><a href="#云开发提供能力" class="header-anchor">#</a> 云开发提供能力</h4> <p>云函数：在云端运行的代码，微信私有协议天然鉴权 （理解：相当于后端部分）</p> <p>云数据库：一个既可以在小程序端操作又可以在云函数中操作的JSON数据库</p> <p>云存储：在云端存储文件，可以在云端控制台可视化管理</p> <p>云调用：基于云函数免鉴权使用小程序开放接口的能力（比如说给用户推送消息等）</p> <p>HTTP API：使用HTTP API开发者可在已有服务器上访问云资源，实现与云开发的互通（作用：对原有传统模式下开发的小程序，可以与云开发进行互通）</p> <h4 id="appid"><a href="#appid" class="header-anchor">#</a> appID</h4> <p>每个小程序唯一的id</p> <h4 id="云开发项目默认目录结构"><a href="#云开发项目默认目录结构" class="header-anchor">#</a> 云开发项目默认目录结构</h4> <p>cloudfunctions ----------------------------云函数</p> <p>​	callback ---------------------------------- 回调函数</p> <p>​		config.json ---------------------------</p> <p>​		index.js --------------------------------</p> <p>​		package.json ------------------------</p> <p>​	echo ----------------------------------------</p> <p>​	login ----------------------------------------</p> <p>​	openapi -----------------------------------</p> <p>miniprogram ------------------------------- 小程序</p> <p>​	images ------------------------------------- 图片</p> <p>​	pages --------------------------------------- 页面</p> <p>​	style ----------------------------------------- 样式</p> <p>​	app.js --------------------------------------- 项目js</p> <p>​	app.json ----------------------------------- 全局配置</p> <p>​	app.wxss ---------------------------------- 项目样式</p> <p>​	sitemap.json -----------------------------  （小程序SEO相关）</p> <p>project.config.json ----------------------- 项目配置</p> <h4 id="云开发环境"><a href="#云开发环境" class="header-anchor">#</a> 云开发环境</h4> <p>云开发可创建两个环境，建议一个为开发环境，一个为生产环境</p> <h4 id="开发前的准备"><a href="#开发前的准备" class="header-anchor">#</a> 开发前的准备</h4> <p>开发工具 &gt; 右上角详情 &gt; 本地设置 &gt; 调试基础库  设置为最新版本</p> <p>app.js &gt; wx.cloud.init &gt; env 设置环境ID</p> <h4 id="project-config-json-文件说明"><a href="#project-config-json-文件说明" class="header-anchor">#</a> project.config.json 文件说明</h4> <p>miniprogramRoot 小程序前端代码目录</p> <p>cloudfunctionRoot 云函数代码目录</p> <h4 id="app-json"><a href="#app-json" class="header-anchor">#</a> app.json</h4> <p>pages  设置页面 ，设置后会自动在pages目录下生成相应的目录和文件</p> <p>设置底部导航按钮：</p> <div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token property">&quot;tabBar&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;color&quot;</span><span class="token operator">:</span> <span class="token string">&quot;#474747&quot;</span><span class="token punctuation">,</span> <span class="token comment">// 文字颜色</span>
    <span class="token property">&quot;selectedColor&quot;</span><span class="token operator">:</span> <span class="token string">&quot;#d43c43&quot;</span><span class="token punctuation">,</span> <span class="token comment">// 文字选中颜色</span>
    <span class="token property">&quot;list&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span> <span class="token comment">// 按钮列表，2-5项</span>
      <span class="token property">&quot;pagePath&quot;</span><span class="token operator">:</span> <span class="token string">&quot;pages/playlist/playlist&quot;</span><span class="token punctuation">,</span> <span class="token comment">// 按钮对应页面</span>
      <span class="token property">&quot;text&quot;</span><span class="token operator">:</span> <span class="token string">&quot;音乐&quot;</span><span class="token punctuation">,</span> <span class="token comment">// 文字</span>
      <span class="token property">&quot;iconPath&quot;</span><span class="token operator">:</span> <span class="token string">&quot;images/music.png&quot;</span><span class="token punctuation">,</span> <span class="token comment">// 图标路径</span>
      <span class="token property">&quot;selectedIconPath&quot;</span><span class="token operator">:</span> <span class="token string">&quot;images/music-actived.png&quot;</span> <span class="token comment">// 选中图标的路径</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      <span class="token property">&quot;pagePath&quot;</span><span class="token operator">:</span> <span class="token string">&quot;pages/blog/blog&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;text&quot;</span><span class="token operator">:</span> <span class="token string">&quot;发现&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;iconPath&quot;</span><span class="token operator">:</span> <span class="token string">&quot;images/blog.png&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;selectedIconPath&quot;</span><span class="token operator">:</span> <span class="token string">&quot;images/blog-actived.png&quot;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      <span class="token property">&quot;pagePath&quot;</span><span class="token operator">:</span> <span class="token string">&quot;pages/profile/profile&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;text&quot;</span><span class="token operator">:</span> <span class="token string">&quot;我的&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;iconPath&quot;</span><span class="token operator">:</span> <span class="token string">&quot;images/profile.png&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;selectedIconPath&quot;</span><span class="token operator">:</span> <span class="token string">&quot;images/profile-actived.png&quot;</span>
    <span class="token punctuation">}</span><span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><blockquote><p>图标来自于 <a href="https://www.iconfont.cn" target="_blank" rel="noopener noreferrer">https://www.iconfont.cn<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>阿里巴巴图标库，包含矢量图标、字体图标、字体等</p></blockquote> <h4 id="代码规范"><a href="#代码规范" class="header-anchor">#</a> 代码规范</h4> <p>很多公司借鉴的代码规范：<a href="https://github.com/airbnb/javascript" target="_blank" rel="noopener noreferrer">https://github.com/airbnb/javascript<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h4 id="《音乐》页面开发"><a href="#《音乐》页面开发" class="header-anchor">#</a> 《音乐》页面开发</h4> <div class="language-html line-numbers-mode"><pre class="language-html"><code> <span class="token comment">&lt;!-- 轮播图组件 参数：indicator-dots 小圆点，autoplay 自动播放, interval 间隔时间，duration 动画时长 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>swiper</span> <span class="token attr-name">indicator-dots</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>true<span class="token punctuation">&quot;</span></span> <span class="token attr-name">circular</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>true<span class="token punctuation">&quot;</span></span> <span class="token attr-name">interval</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>3000<span class="token punctuation">&quot;</span></span> <span class="token attr-name">duration</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>500<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>block</span> <span class="token attr-name"><span class="token namespace">wx:</span>for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{{swiperImgUrls}}<span class="token punctuation">&quot;</span></span> <span class="token attr-name"><span class="token namespace">wx:</span>key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{{index}}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span> <span class="token comment">&lt;!-- 空节点 --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>swiper-item</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>image</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{{item.url}}<span class="token punctuation">&quot;</span></span> <span class="token attr-name">mode</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>widthFix<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>img<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>image</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>swiper-item</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>block</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>swiper</span><span class="token punctuation">&gt;</span></span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h4 id="自定义组件"><a href="#自定义组件" class="header-anchor">#</a> 自定义组件</h4> <p><strong>创建组件</strong></p> <p>创建目录 components &gt; 组件目录名称 &gt; 右键 <code>新建Component</code></p> <h5 id="引入组件"><a href="#引入组件" class="header-anchor">#</a> <strong>引入组件</strong></h5> <p>在page的json文件中：</p> <div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;usingComponents&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;x-playlist&quot;</span><span class="token operator">:</span><span class="token string">&quot;/components/playlist/playlist&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>在page的wxml中：</p> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>x-playlist</span><span class="token punctuation">&gt;</span></span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>x-playlist</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><strong>页面引入组件以及组件内部在引用子组件的方法是一样的，同样需要设置json文件。</strong></p> <h5 id="组件传值"><a href="#组件传值" class="header-anchor">#</a> <strong>组件传值</strong></h5> <p>父组件中：在引入组件的时候自定义属性名称，并把数据传入子组件</p> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token comment">&lt;!-- 参数：playlist 自定义名称，传入组件的数据 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>x-playlist</span> <span class="token attr-name">playlist</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{{传入的数据}}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>x-playlist</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>子组件中：
子组件的js文件：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>  <span class="token comment">/**
   * 组件的属性列表
   */</span>
  <span class="token literal-property property">properties</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">playlist</span><span class="token operator">:</span><span class="token punctuation">{</span> <span class="token comment">// 接收父组件传输的数据</span>
      <span class="token literal-property property">type</span><span class="token operator">:</span> Object <span class="token comment">// 数据类型</span>
    <span class="token punctuation">}</span>
   <span class="token punctuation">}</span><span class="token punctuation">,</span>
       
 <span class="token comment">//子组件的wxml文件可直接引入数据{{playlist}}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h4 id="wx-key-的使用"><a href="#wx-key-的使用" class="header-anchor">#</a> wx:key 的使用</h4> <p>key的值不建议使用index，因为当数据发生变化会dom结构产生变化时，使用index的地方不会随之变化。</p> <p>可以使用数据内部每项不一样的一个数值，如id</p> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>block</span> <span class="token attr-name"><span class="token namespace">wx:</span>for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{{swiperImgUrls}}<span class="token punctuation">&quot;</span></span> <span class="token attr-name"><span class="token namespace">wx:</span>key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>url<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span> 这里url不需要双大括号，如使用index则需要{{}}
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>image</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{{item.url}}<span class="token punctuation">&quot;</span></span> <span class="token attr-name">mode</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>widthFix<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>img<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>image</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>block</span><span class="token punctuation">&gt;</span></span>
 
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>playlist-container<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>block</span> <span class="token attr-name"><span class="token namespace">wx:</span>for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{{playlist}}<span class="token punctuation">&quot;</span></span> <span class="token attr-name"><span class="token namespace">wx:</span>key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>_id<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- 参数：playlist 自定义名称，传入组件的数据 --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>x-playlist</span> <span class="token attr-name">playlist</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{{item}}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>x-playlist</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>block</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h4 id="async-await-语法"><a href="#async-await-语法" class="header-anchor">#</a> async/await 语法</h4> <p>目前，在云函数里，由于 Node 版本最低是 8.9，因此是天然支持 async/await 语法的。而在小程序端则不然。在微信开发者工具里，以及 Android 端手机（浏览器内核是 QQ浏览器的 X5），async/await是天然支持的，但 iOS 端手机在较低版本则不支持，因此需要引入额外的 文件。</p> <p>可把这个 <a href="https://github.com/xiecheng328/miniprogram/blob/master/regenerator/runtime.js" target="_blank" rel="noopener noreferrer">runtime.js<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 文件引用到有使用 async/await 的文件当中。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 注意，必须命名为 regeneratorRuntime</span>
<span class="token keyword">import</span> regeneratorRuntime <span class="token keyword">from</span> <span class="token string">'../../utils/runtime.js'</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h4 id="云函数的使用"><a href="#云函数的使用" class="header-anchor">#</a> 云函数的使用</h4> <p>cloudfunctions目录 右键 <code>新建 Node.js 云函数</code>  &gt; 输入目录名 <code>getPlaylist</code></p> <p>在云函数中向第三方服务器发送请求要依赖第三方库</p> <p><strong>安装依赖包</strong></p> <p>云函数目录  <code>getPlaylist</code> 右键 <code>在终端打开</code> 打开命令行  输入命令：</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token function">npm</span> <span class="token function">install</span> <span class="token parameter variable">--save</span> request
<span class="token function">npm</span> <span class="token function">install</span> <span class="token parameter variable">--save</span> request-promise
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>github request-promise：<a href="https://github.com/request/request-promise" target="_blank" rel="noopener noreferrer">https://github.com/request/request-promise<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>然后写相应代码</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 云函数入口文件</span>
<span class="token keyword">const</span> cloud <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'wx-server-sdk'</span><span class="token punctuation">)</span>

cloud<span class="token punctuation">.</span><span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token keyword">const</span> rp <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'request-promise'</span><span class="token punctuation">)</span> <span class="token comment">// 需安装依赖包</span>

<span class="token keyword">const</span> <span class="token constant">URL</span> <span class="token operator">=</span> <span class="token string">'http://musicapi.xiecheng.live/personalized'</span>

<span class="token comment">// 云函数入口函数</span>
exports<span class="token punctuation">.</span><span class="token function-variable function">main</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">event<span class="token punctuation">,</span> context</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> playlist <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">rp</span><span class="token punctuation">(</span><span class="token constant">URL</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">.</span>result
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>playlist<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><p>写完代码，云函数目录  <code>getPlaylist</code> 右键 <code>上传并部署：云端安装依赖（不上传node_modules）</code> 进行上传部署代码到云端，等待上传成功，打开云开发控制台即可看到已经上传的云函数，并可对云函数进行测试。</p> <h5 id="数据库操作"><a href="#数据库操作" class="header-anchor">#</a> 数据库操作</h5> <p>数据库&gt; 创建集合 &gt; playlist</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 云函数入口文件</span>
<span class="token keyword">const</span> cloud <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'wx-server-sdk'</span><span class="token punctuation">)</span>

cloud<span class="token punctuation">.</span><span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token keyword">const</span> db <span class="token operator">=</span> cloud<span class="token punctuation">.</span><span class="token function">database</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 初始化数据库,如果在小程序端初始化数据库需要在前面加wx.</span>

<span class="token keyword">const</span> rp <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'request-promise'</span><span class="token punctuation">)</span> <span class="token comment">// 需安装依赖包</span>

<span class="token keyword">const</span> <span class="token constant">URL</span> <span class="token operator">=</span> <span class="token string">'http://musicapi.xiecheng.live/personalized'</span> <span class="token comment">// 第三方服务器地址（老师从网易云获取的数据部署在其服务器，每天的数据会更新）</span>

<span class="token keyword">const</span> playlistCollection <span class="token operator">=</span> db<span class="token punctuation">.</span><span class="token function">collection</span><span class="token punctuation">(</span><span class="token string">'playlist'</span><span class="token punctuation">)</span> <span class="token comment">// 获取到数据库playlist集合</span>

<span class="token keyword">const</span> <span class="token constant">MAX_LIMIT</span> <span class="token operator">=</span> <span class="token number">10</span> <span class="token comment">// 定义常量，获取数据库条数最大的限制</span>

<span class="token comment">// 云函数入口函数</span>
exports<span class="token punctuation">.</span><span class="token function-variable function">main</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">event<span class="token punctuation">,</span> context</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">/**
   * 注：
   * - 关于数据库的操作都是异步操作，都需添加await关键字
   * - console.log 打印在云开发控制台 云函数测试内查看
   * - 单次获取数据库数据有条数限制，云函数端最多获取100条，小程序端最多获取20条
   */</span>

  <span class="token comment">// const list = await playlistCollection.get() // 获取数据库集合的数据 （因为有条数限制，不直接用此方法）</span>
  
  <span class="token comment">// 突破条数限制 （为了读取到全部数据然后与第三方服务器获取的数据进行对比去重）</span>
  <span class="token keyword">const</span> countResult <span class="token operator">=</span> <span class="token keyword">await</span> playlistCollection<span class="token punctuation">.</span><span class="token function">count</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 获取数据总条数 返回为对象</span>
  <span class="token keyword">const</span> total <span class="token operator">=</span> countResult<span class="token punctuation">.</span>total <span class="token comment">// 取得总条数</span>
  <span class="token keyword">const</span> batchTimes <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">ceil</span><span class="token punctuation">(</span>total <span class="token operator">/</span> <span class="token constant">MAX_LIMIT</span><span class="token punctuation">)</span>
  <span class="token keyword">const</span> tasks <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
  <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> batchTimes<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> promise <span class="token operator">=</span> playlistCollection<span class="token punctuation">.</span><span class="token function">skip</span><span class="token punctuation">(</span>i <span class="token operator">*</span> <span class="token constant">MAX_LIMIT</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">limit</span><span class="token punctuation">(</span><span class="token constant">MAX_LIMIT</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 从第 skip 条开始取，最多取 limit 条数据</span>
    tasks<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>promise<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">let</span> list <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">data</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>tasks<span class="token punctuation">.</span>length <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    list <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">await</span> Promise<span class="token punctuation">.</span><span class="token function">all</span><span class="token punctuation">(</span>tasks<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">acc<span class="token punctuation">,</span> cur</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> <span class="token comment">// reduce数组方法 累积拼接</span>
      <span class="token keyword">return</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">data</span><span class="token operator">:</span> acc<span class="token punctuation">.</span>data<span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span>cur<span class="token punctuation">.</span>data<span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
 
  <span class="token comment">// 获取第三方服务器端数据</span>
  <span class="token keyword">const</span> playlist <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">rp</span><span class="token punctuation">(</span><span class="token constant">URL</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">.</span>result
  <span class="token punctuation">}</span><span class="token punctuation">)</span>

  <span class="token comment">// 数据库与服务器数据对比去重（数据已存在数据库的无需再重复添加）</span>
  <span class="token keyword">const</span> newData <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
  <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> len1 <span class="token operator">=</span> playlist<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i <span class="token operator">&lt;</span> len1<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> flag <span class="token operator">=</span> <span class="token boolean">true</span>
    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> len2 <span class="token operator">=</span> list<span class="token punctuation">.</span>data<span class="token punctuation">.</span>length<span class="token punctuation">;</span> j <span class="token operator">&lt;</span> len2<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span><span class="token punctuation">(</span>playlist<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>id <span class="token operator">===</span> list<span class="token punctuation">.</span>data<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">.</span>id<span class="token punctuation">)</span><span class="token punctuation">{</span>
        flag <span class="token operator">=</span> <span class="token boolean">false</span>
        <span class="token keyword">break</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>flag<span class="token punctuation">)</span><span class="token punctuation">{</span>
      newData<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>playlist<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// 把数据插入数据库，需要单条插入</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> len <span class="token operator">=</span> newData<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i <span class="token operator">&lt;</span> len<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">await</span> playlistCollection<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token comment">// 给数据库集合添加数据</span>
      <span class="token literal-property property">data</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token operator">...</span>newData<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token literal-property property">createTime</span><span class="token operator">:</span> db<span class="token punctuation">.</span><span class="token function">serverDate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">// db.serverDate() 获取服务器时间</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> <span class="token comment">// 数据添加成功</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'数据添加成功'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> <span class="token comment">// 失败</span>
      console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> newData<span class="token punctuation">.</span>length <span class="token comment">// 插入多少条数据</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br></div></div><h5 id="查询数据库"><a href="#查询数据库" class="header-anchor">#</a> 查询数据库</h5> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">//云函数中查询数据库的例子：</span>

<span class="token comment">// 云函数入口文件</span>
<span class="token keyword">const</span> cloud <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'wx-server-sdk'</span><span class="token punctuation">)</span>

cloud<span class="token punctuation">.</span><span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token keyword">const</span> TcbRouter <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'tcb-router'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> db <span class="token operator">=</span> cloud<span class="token punctuation">.</span><span class="token function">database</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 初始化数据库</span>
<span class="token keyword">const</span> blogCollection <span class="token operator">=</span> db<span class="token punctuation">.</span><span class="token function">collection</span><span class="token punctuation">(</span><span class="token string">'blog'</span><span class="token punctuation">)</span> <span class="token comment">// 博客的数据库集合</span>

<span class="token comment">// 云函数入口函数</span>
exports<span class="token punctuation">.</span><span class="token function-variable function">main</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">event<span class="token punctuation">,</span> context</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">TcbRouter</span><span class="token punctuation">(</span><span class="token punctuation">{</span> event <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token comment">// 初始化TcbRouter</span>

  app<span class="token punctuation">.</span><span class="token function">router</span><span class="token punctuation">(</span><span class="token string">'list'</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">ctx<span class="token punctuation">,</span> next</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// skip 从第几条开始查，limit 查几条数据，orderBy(排序字段，排序方式) 排序，排序方式desc降序/asc升序</span>
    ctx<span class="token punctuation">.</span>body <span class="token operator">=</span>  <span class="token keyword">await</span> blogCollection<span class="token punctuation">.</span><span class="token function">skip</span><span class="token punctuation">(</span>event<span class="token punctuation">.</span>start<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">limit</span><span class="token punctuation">(</span>event<span class="token punctuation">.</span>count<span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">orderBy</span><span class="token punctuation">(</span><span class="token string">'createTime'</span><span class="token punctuation">,</span> <span class="token string">'desc'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> res<span class="token punctuation">.</span>data
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  

  <span class="token keyword">return</span> app<span class="token punctuation">.</span><span class="token function">serve</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 必需返回</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br></div></div><h5 id="云函数调试"><a href="#云函数调试" class="header-anchor">#</a> 云函数调试</h5> <p>云控制台中可会云函数进行云端测试</p> <p>在小程序调用云函数后，可查看云函数<strong>日志</strong></p> <h4 id="定时触发云函数"><a href="#定时触发云函数" class="header-anchor">#</a> 定时触发云函数</h4> <p>如果云函数需要定时 / 定期执行，也就是定时触发，我们可以使用云函数定时触发器。配置了定时触发器的云函数，会在相应时间点被自动触发，函数的返回结果不会返回给调用方</p> <p>云函数目录下新建 config.json</p> <p><a href="https://developers.weixin.qq.com/miniprogram/dev/wxcloud/guide/functions/triggers.html" target="_blank" rel="noopener noreferrer">API<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;triggers&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;myTriggers&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;timer&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;config&quot;</span><span class="token operator">:</span><span class="token string">&quot;0 0 10,14,16,20 * * * *&quot;</span> <span class="token comment">//表示每天的10点、14点、16点、20点触发一次</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>编辑好触发器之后，要在云函数目录 &gt; 右键 &gt; <code>上传触发器</code></p> <h4 id="配置云函数超时时间"><a href="#配置云函数超时时间" class="header-anchor">#</a> 配置云函数超时时间</h4> <p>当云函数比较复杂的时候，默认的超时时间3秒可能不能够满足需求，可以适当的设置更为合理的时间</p> <p>云开发控制台 &gt; 云函数 &gt; 配置 &gt; 超时时间</p> <h4 id="上拉加载与下拉刷新"><a href="#上拉加载与下拉刷新" class="header-anchor">#</a> 上拉加载与下拉刷新</h4> <div class="language-js line-numbers-mode"><pre class="language-js"><code>page页面json中：
<span class="token string-property property">&quot;enablePullDownRefresh&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span>


page页面js中有这两个函数：

 <span class="token comment">/**
   * 页面相关事件处理函数--监听用户下拉动作
   */</span>
  <span class="token function-variable function">onPullDownRefresh</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	 <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setData</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token literal-property property">playlist</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">_getPlaylist</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>

  <span class="token comment">/**
   * 页面上拉触底事件的处理函数
   */</span>
  <span class="token function-variable function">onReachBottom</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">_getPlaylist</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
 
 
 
 下拉刷新请求完数据后
 wx<span class="token punctuation">.</span><span class="token function">stopPullDownRefresh</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 停止下拉刷新动画</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br></div></div><h4 id="云函数路由优化tcb-router"><a href="#云函数路由优化tcb-router" class="header-anchor">#</a> 云函数路由优化tcb-router</h4> <p>一个用户在一个云环境只能创建50个云函数</p> <p>假如小程序非常复杂，50个云函数不能够满足业务需求怎么办？</p> <p>相似的请求归类到同一个云函数处理</p> <p>tcb-router是一个koa风格的云函数路由库</p> <p>通俗理解就是可以把很多个接口归类到同一个云函数内。</p> <p>github-tcb-router:  <a href="https://github.com/TencentCloudBase/tcb-router" target="_blank" rel="noopener noreferrer">https://github.com/TencentCloudBase/tcb-router<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>koa洋葱模型...</p> <p>安装：</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>在使用到tcb-router的云函数目录下打开命令行，输入命令进行安装
<span class="token function">npm</span> <span class="token function">install</span> <span class="token parameter variable">--save</span> tcb-router
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 云函数的 index.js</span>
<span class="token keyword">const</span> TcbRouter <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'router'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 必需</span>

exports<span class="token punctuation">.</span><span class="token function-variable function">main</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">event<span class="token punctuation">,</span> context</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">TcbRouter</span><span class="token punctuation">(</span><span class="token punctuation">{</span> event <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 必需</span>
  
    <span class="token comment">// app.use 表示该中间件会适用于所有的路由(全局中间件) 非必需</span>
    app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">ctx<span class="token punctuation">,</span> next</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> <span class="token comment">// 这个中间件表示所有路由都会调用到，而路由中间件为单独调用</span>
        ctx<span class="token punctuation">.</span>data <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span> <span class="token comment">// 获取要传给小程序端的数据</span>
        ctx<span class="token punctuation">.</span>data<span class="token punctuation">.</span>openId <span class="token operator">=</span> event<span class="token punctuation">.</span>userInfo<span class="token punctuation">.</span>openId <span class="token comment">// 这里获取到的openId将分布到所有路由</span>
        <span class="token keyword">await</span> <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 执行下一中间件</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// 路由为数组表示，该中间件适用于 user 和 timer 两个路由</span>
    app<span class="token punctuation">.</span><span class="token function">router</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'user'</span><span class="token punctuation">,</span> <span class="token string">'timer'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">ctx<span class="token punctuation">,</span> next</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        ctx<span class="token punctuation">.</span>data<span class="token punctuation">.</span>company <span class="token operator">=</span> <span class="token string">'Tencent'</span><span class="token punctuation">;</span> <span class="token comment">// 这里获取到的数据将分布到 user 和 timer 两个路由</span>
        <span class="token keyword">await</span> <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 执行下一中间件</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// 路由为字符串，该中间件只适用于 user 路由</span>
    app<span class="token punctuation">.</span><span class="token function">router</span><span class="token punctuation">(</span><span class="token string">'user'</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">ctx<span class="token punctuation">,</span> next</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        ctx<span class="token punctuation">.</span>data<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">'heyli'</span><span class="token punctuation">;</span>  <span class="token comment">// 获取要传给小程序端的数据</span>
        <span class="token keyword">await</span> <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 执行下一中间件</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">ctx<span class="token punctuation">,</span> next</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        ctx<span class="token punctuation">.</span>data<span class="token punctuation">.</span>sex <span class="token operator">=</span> <span class="token string">'male'</span><span class="token punctuation">;</span> <span class="token comment">// 获取要传给小程序端的数据</span>
        <span class="token keyword">await</span> <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 执行下一中间件</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">ctx</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        ctx<span class="token punctuation">.</span>data<span class="token punctuation">.</span>city <span class="token operator">=</span> <span class="token string">'Foshan'</span><span class="token punctuation">;</span> <span class="token comment">// 获取要传给小程序端的数据</span>
        <span class="token comment">// ctx.body 返回数据到小程序端</span>
        ctx<span class="token punctuation">.</span>body <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token literal-property property">code</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token literal-property property">data</span><span class="token operator">:</span> ctx<span class="token punctuation">.</span>data<span class="token punctuation">}</span><span class="token punctuation">;</span>  <span class="token comment">// 要传给小程序端的数据</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// 路由为字符串，该中间件只适用于 timer 路由</span>
    app<span class="token punctuation">.</span><span class="token function">router</span><span class="token punctuation">(</span><span class="token string">'timer'</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">ctx<span class="token punctuation">,</span> next</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        ctx<span class="token punctuation">.</span>data<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">'flytam'</span><span class="token punctuation">;</span>
        <span class="token keyword">await</span> <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 执行下一中间件</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">ctx<span class="token punctuation">,</span> next</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        ctx<span class="token punctuation">.</span>data<span class="token punctuation">.</span>sex <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token parameter">resolve</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token comment">// 等待500ms，再执行下一中间件</span>
        <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">'male'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">500</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">await</span> <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 执行下一中间件</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">ctx</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span>  <span class="token punctuation">{</span>
        ctx<span class="token punctuation">.</span>data<span class="token punctuation">.</span>city <span class="token operator">=</span> <span class="token string">'Taishan'</span><span class="token punctuation">;</span>

        <span class="token comment">// ctx.body 返回数据到小程序端</span>
        ctx<span class="token punctuation">.</span>body <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token literal-property property">code</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token literal-property property">data</span><span class="token operator">:</span> ctx<span class="token punctuation">.</span>data <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">return</span> app<span class="token punctuation">.</span><span class="token function">serve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 必需</span>

<span class="token punctuation">}</span>


小程序端：

<span class="token comment">// 调用名为 router 的云函数，路由名为 user</span>
wx<span class="token punctuation">.</span>cloud<span class="token punctuation">.</span><span class="token function">callFunction</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token comment">// 要调用的云函数名称</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;router&quot;</span><span class="token punctuation">,</span>
    <span class="token comment">// 传递给云函数的参数</span>
    <span class="token literal-property property">data</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">$url</span><span class="token operator">:</span> <span class="token string">&quot;user&quot;</span><span class="token punctuation">,</span> <span class="token comment">// 要调用的路由的路径，传入准确路径或者通配符*</span>
        <span class="token literal-property property">other</span><span class="token operator">:</span> <span class="token string">&quot;xxx&quot;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br></div></div><p>上面tcb-router代码会按照洋葱模型执行，即先从上往下逐个进入中间件，再从下往上逐个退出中间件。</p> <h4 id="本地存储-缓存"><a href="#本地存储-缓存" class="header-anchor">#</a> 本地存储（缓存）</h4> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 存储：</span>
wx<span class="token punctuation">.</span><span class="token function">setStorageSync</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> data<span class="token punctuation">)</span> <span class="token comment">// 同步存储（存储成功再继续下一步操作）</span>
wx<span class="token punctuation">.</span><span class="token function">setStorage</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> data<span class="token punctuation">)</span> <span class="token comment">// 异步存储（即使存储没成功也会执行下一步代码）、</span>

<span class="token comment">// 读取：</span>
wx<span class="token punctuation">.</span><span class="token function">getStorageSync</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span> <span class="token comment">// 同步 （读取到数据在进行下一步操作）</span>
wx<span class="token punctuation">.</span><span class="token function">setStorage</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span> <span class="token comment">// 异步</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h4 id="api设置title"><a href="#api设置title" class="header-anchor">#</a> api设置title</h4> <div class="language-js line-numbers-mode"><pre class="language-js"><code>wx<span class="token punctuation">.</span><span class="token function">setNavigationBarTitle</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h4 id="背景播放音"><a href="#背景播放音" class="header-anchor">#</a> 背景播放音</h4> <p><a href="https://developers.weixin.qq.com/miniprogram/dev/api/media/background-audio/BackgroundAudioManager.html" target="_blank" rel="noopener noreferrer">BackgroundAudioManager<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 全局唯一的背景音频管理器</p> <div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token comment">// 需要在app.json配置，才能使用后台音乐播放的能力 </span>

<span class="token property">&quot;requiredBackgroundModes&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;audio&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;location&quot;</span><span class="token punctuation">]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 获取全局唯一的背景音频管理器</span>
<span class="token keyword">const</span> backgroundAudioManager <span class="token operator">=</span> wx<span class="token punctuation">.</span><span class="token function">getBackgroundAudioManager</span><span class="token punctuation">(</span><span class="token punctuation">)</span>


backgroundAudioManager<span class="token punctuation">.</span>src <span class="token operator">=</span> 音频链接
backgroundAudioManager<span class="token punctuation">.</span>title <span class="token operator">=</span> 音频标题

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h4 id="createselectorquery查询节点信息"><a href="#createselectorquery查询节点信息" class="header-anchor">#</a> createSelectorQuery查询节点信息</h4> <p><a href="https://developers.weixin.qq.com/miniprogram/dev/api/wxml/wx.createSelectorQuery.html" target="_blank" rel="noopener noreferrer">createSelectorQuery<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 小程序的方法，用于查询节点等操作</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> query <span class="token operator">=</span> wx<span class="token punctuation">.</span><span class="token function">createSelectorQuery</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
query<span class="token punctuation">.</span><span class="token function">select</span><span class="token punctuation">(</span><span class="token string">'#the-id'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">boundingClientRect</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 节点的布局信息</span>
query<span class="token punctuation">.</span><span class="token function">selectViewport</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">scrollOffset</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
query<span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  res<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>top       <span class="token comment">// #the-id节点的上边界坐标</span>
  res<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>scrollTop <span class="token comment">// 显示区域的竖直滚动位置</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h4 id="组件内的方法"><a href="#组件内的方法" class="header-anchor">#</a> 组件内的方法</h4> <p><a href="https://developers.weixin.qq.com/miniprogram/dev/reference/api/Component.html" target="_blank" rel="noopener noreferrer">Component(Object object)<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h4 id="组件生命周期"><a href="#组件生命周期" class="header-anchor">#</a> 组件生命周期</h4> <p><a href="https://developers.weixin.qq.com/miniprogram/dev/framework/custom-component/lifetimes.html" target="_blank" rel="noopener noreferrer">lifetimes<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 生命周期</span>
<span class="token literal-property property">lifetimes</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function">ready</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// 在组件在视图层布局完成后执行</span>
   	 <span class="token operator">...</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h5 id="组件所在页面的生命周期"><a href="#组件所在页面的生命周期" class="header-anchor">#</a> 组件所在页面的生命周期</h5> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token function">Component</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">pageLifetimes</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function-variable function">show</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// 页面被展示</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function-variable function">hide</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// 页面被隐藏</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function-variable function">resize</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">size</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// 页面尺寸变化</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h4 id="组件对数据的监听"><a href="#组件对数据的监听" class="header-anchor">#</a> 组件对数据的监听</h4> <p><a href="https://developers.weixin.qq.com/miniprogram/dev/framework/custom-component/observer.html" target="_blank" rel="noopener noreferrer">observers<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token literal-property property">observers</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token comment">// 对数据的监听(数据初次加载完成也会执行)</span>
    <span class="token function">监听的数据对象</span><span class="token punctuation">(</span><span class="token parameter">newData</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>newData<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h4 id="子组件自定义事件传递给父组件"><a href="#子组件自定义事件传递给父组件" class="header-anchor">#</a> 子组件自定义事件传递给父组件</h4> <div class="language- line-numbers-mode"><pre class="language-text"><code>子组件js：
// 触发自定义事件 向父组件传值， 参数x（可选，传递给父组件的参数，可以是对象或其他）
this.triggerEvent('自定义事件名', 参数x)


父组件wxml：
&lt;子组件标签 bind:自定义事件名=&quot;执行的事件&quot; /&gt;

父组件js：
执行的事件(event) {
	console.log(event.detil.参数)
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h4 id="父组件自定义事件传递给子组件"><a href="#父组件自定义事件传递给子组件" class="header-anchor">#</a> 父组件自定义事件传递给子组件</h4> <div class="language- line-numbers-mode"><pre class="language-text"><code>父组件wxml：
&lt;子组件标签 class=&quot;子组件类名&quot;&gt;

父组件JS：
// 选择组件，并传入事件和参数
this.selectComponent('.子组件类名').自定义事件名(传入参数)

子组件js：
methods: {
	自定义事件名(参数x){
		console.log(参数x)
	}
}

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h4 id="兄弟组件间传递事件和传值"><a href="#兄弟组件间传递事件和传值" class="header-anchor">#</a> 兄弟组件间传递事件和传值</h4> <div class="language- line-numbers-mode"><pre class="language-text"><code>例子：子组件1向子组件2传递参数

父组件wxml中：
&lt;子组件标签1 bind:自定义事件名1=&quot;执行的事件&quot;&gt;
&lt;子组件标签2 class=&quot;子组件2类名&quot;&gt;

父组件js：
执行的事件(event) {
	this.selectComponent('.子组件2类名').自定义事件名2(event.detil.参数x) // 向子组件2传值
}

子组件1js：
// 触发自定义事件 向父组件传值， 参数x（可选，传递给父组件的参数，可以是对象或其他）
this.triggerEvent('自定义事件名1', 参数x)
	


子组件2js：
methods: {
	自定义事件名2(参数x){
		console.log(参数x)  // 接收父组件传入的值
	}
}

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br></div></div><h4 id="获取手机信息"><a href="#获取手机信息" class="header-anchor">#</a> 获取手机信息</h4> <p><a href="https://developers.weixin.qq.com/miniprogram/dev/api/base/system/system-info/wx.getSystemInfo.html" target="_blank" rel="noopener noreferrer">wx.getSystemInfo(Object object)<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>wx<span class="token punctuation">.</span><span class="token function">getSystemInfo</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
	<span class="token function">success</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span> <span class="token comment">//手机信息</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h4 id="滚动组件"><a href="#滚动组件" class="header-anchor">#</a> 滚动组件</h4> <p><a href="https://developers.weixin.qq.com/miniprogram/dev/component/scroll-view.html" target="_blank" rel="noopener noreferrer">scroll-view<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scroll-view</span> <span class="token attr-name">scroll-y</span> <span class="token attr-name">scroll-top</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{{scrollTop}}<span class="token punctuation">&quot;</span></span> <span class="token attr-name">scroll-with-animation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>true<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scroll-view</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h4 id="全局属性、方法-类似vuex"><a href="#全局属性、方法-类似vuex" class="header-anchor">#</a> 全局属性、方法（类似vuex）</h4> <div class="language- line-numbers-mode"><pre class="language-text"><code>在app.js中：

onLaunch: function () {
	this.globalData = {// 设置全局属性、方法
		test: 0
	} 
},
setGlobalData(dataItem, val) { // 设置全局属性
	this.globalData[dataItem] = val
},
getGlobalData(dataItem) { // 获取全局属性
	return this.globalData[dataItem]
}


在需要调用的页面js中：
const app = getApp() // 在最顶部先调用app方法

// 设置全局属性
app.setGlobalData('test', 1)

// 获取全局属性
app.getGlobalData('test')
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br></div></div><h4 id="消息提示框"><a href="#消息提示框" class="header-anchor">#</a> 消息提示框</h4> <p><a href="https://developers.weixin.qq.com/miniprogram/dev/api/ui/interaction/wx.showToast.html" target="_blank" rel="noopener noreferrer">showToast<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>wx<span class="token punctuation">.</span><span class="token function">showToast</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">'成功'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">icon</span><span class="token operator">:</span> <span class="token string">'success'</span><span class="token punctuation">,</span> <span class="token comment">//图标： success 成功、loading 加载中、none 无</span>
  <span class="token literal-property property">duration</span><span class="token operator">:</span> <span class="token number">2000</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h2 id="《发现》页面"><a href="#《发现》页面" class="header-anchor">#</a> 《发现》页面</h2> <h4 id="调用组件外部的样式"><a href="#调用组件外部的样式" class="header-anchor">#</a> 调用组件外部的样式</h4> <p>components内部的组件无法直接调用外部的样式。可通过以下方式调用组件外部样式：</p> <p><strong>方法一：</strong></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>父组件wxml：
&lt;!-- iconfont 和 icon-sousuo 是传入组件内部的样式名称，iconfont（自定义名称）=&quot;iconfont（外部样式文件中定义的样式名）&quot;  --&gt;
&lt;x-search iconfont=&quot;iconfont&quot; icon-sousuo=&quot;icon-sousuo&quot;/&gt;


子组件js:
// 组件外部样式
  externalClasses: [
    'iconfont', // 对应的是上面等号前面的名称
    'icon-sousuo'
  ],
  
 子组件wxml： 即可实现调用组件外的样式
 &lt;i class=&quot;iconfont icon-sousuo&quot; /&gt;
  
  
  注意：如果想在组件内部再次修改样式，不能够引用外部传进来的class名称进行修改，可以另起一个class名称进行修改。
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><p><strong>方法二：</strong></p> <p><a href="https://developers.weixin.qq.com/miniprogram/dev/framework/custom-component/wxml-wxss.html#%E7%BB%84%E4%BB%B6%E6%A0%B7%E5%BC%8F%E9%9A%94%E7%A6%BB" target="_blank" rel="noopener noreferrer">消除样式隔离<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token literal-property property">组件内</span><span class="token operator">:</span>
<span class="token function">Component</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">options</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">styleIsolation</span><span class="token operator">:</span> <span class="token string">'apply-shared'</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h4 id="组件插槽slot"><a href="#组件插槽slot" class="header-anchor">#</a> 组件插槽slot</h4> <p><strong>单个插槽</strong></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>父组件调用传入插槽内容:
&lt;组件标签&gt;
    &lt;view&gt;
      &lt;view&gt;插槽内容&lt;/view&gt;
      &lt;view&gt;插槽内容&lt;/view&gt;
    &lt;/view&gt;
&lt;/组件标签&gt;
  
 组件内部定义slot标签:
 &lt;view&gt;
    &lt;!-- slot插槽 --&gt;
    &lt;slot&gt;&lt;/slot&gt;
&lt;/view&gt;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p><strong>如果需要实现多个插槽</strong></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>  
父组件调用传入插槽内容:
&lt;组件标签&gt;
    &lt;view slot=&quot;slot2&quot;&gt;
      &lt;view&gt;插槽1内容&lt;/view&gt;
      &lt;view&gt;插槽1内容&lt;/view&gt;
    &lt;/view&gt;

     &lt;view slot=&quot;slot1&quot;&gt;
      &lt;view&gt;插槽2内容&lt;/view&gt;
      &lt;view&gt;插槽2内容&lt;/view&gt;
    &lt;/view&gt;
&lt;/组件标签&gt;

组件js :
options: {// 设置
    multipleSlots: true // 打开多个插槽功能
},
  
  
组件内部定义slot标签:
&lt;view&gt;
    &lt;!-- slot插槽 具名插槽--&gt;
    &lt;slot name=&quot;slot1&quot;&gt;&lt;/slot&gt;
    &lt;slot name=&quot;slot2&quot;&gt;&lt;/slot&gt;
&lt;/view&gt;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br></div></div><h4 id="判断用户授权"><a href="#判断用户授权" class="header-anchor">#</a> 判断用户授权</h4> <p><a href="https://developers.weixin.qq.com/miniprogram/dev/framework/open-ability/authorize.html" target="_blank" rel="noopener noreferrer">授权<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 判断用户是否授权</span>
    wx<span class="token punctuation">.</span><span class="token function">getSetting</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token function-variable function">success</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> <span class="token comment">// 这里使用箭头函数可改变内部this指向为外部的this</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>res<span class="token punctuation">.</span>authSetting<span class="token punctuation">[</span><span class="token string">'scope.userInfo'</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// 已授权</span>
         wx<span class="token punctuation">.</span><span class="token function">getUserInfo</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token comment">// 获取用户信息</span>
           <span class="token function">success</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
             console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span>
           <span class="token punctuation">}</span>
         <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span> <span class="token comment">// 未授权</span>
        
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><h4 id="button的开发能力-获取用户信息-1"><a href="#button的开发能力-获取用户信息-1" class="header-anchor">#</a> button的开发能力（获取用户信息）1</h4> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token operator">&lt;</span>button <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;login&quot;</span>
    open<span class="token operator">-</span>type<span class="token operator">=</span><span class="token string">&quot;getUserInfo&quot;</span>
    bindgetuserinfo<span class="token operator">=</span><span class="token string">&quot;onGetUserInfo&quot;</span>     <span class="token comment">// bindgetuserinfo 为固定的</span>
<span class="token operator">&gt;</span>
	获取微信授权信息
<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>


bindgetuserinfo 事件会询问用户是否同意授权


js中：
    <span class="token function">onGetUserInfo</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// 获取用户信息</span>
      <span class="token keyword">const</span> userInfo <span class="token operator">=</span> event<span class="token punctuation">.</span>detail<span class="token punctuation">.</span>userInfo
      <span class="token keyword">if</span> <span class="token punctuation">(</span>userInfo<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// 用户允许授权</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setData</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
          <span class="token literal-property property">modalShow</span><span class="token operator">:</span> <span class="token boolean">false</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">triggerEvent</span><span class="token punctuation">(</span><span class="token string">'loginSuccess'</span><span class="token punctuation">,</span> userInfo<span class="token punctuation">)</span> <span class="token comment">// 给父组件传用户数据</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span> <span class="token comment">// 用户拒绝授权</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">triggerEvent</span><span class="token punctuation">(</span><span class="token string">'loginFail'</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br></div></div><h4 id="原生组件"><a href="#原生组件" class="header-anchor">#</a> 原生组件</h4> <p><a href="https://developers.weixin.qq.com/miniprogram/dev/component/native-component.html" target="_blank" rel="noopener noreferrer">原生组件<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <div class="language-html line-numbers-mode"><pre class="language-html"><code>
auto-focus 自动获取焦点

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>textarea</span>
    <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>content<span class="token punctuation">&quot;</span></span>
    <span class="token attr-name">placeholder</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>分享新鲜事...<span class="token punctuation">&quot;</span></span>
    <span class="token attr-name">maxlength</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>140<span class="token punctuation">&quot;</span></span>
    <span class="token attr-name">auto-focus</span>
    <span class="token attr-name">bindinput</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>onInput<span class="token punctuation">&quot;</span></span>
    <span class="token attr-name">bindfocus</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>onFocus<span class="token punctuation">&quot;</span></span>
    <span class="token attr-name">bindblur</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>onBlur<span class="token punctuation">&quot;</span></span>
  <span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>textarea</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h4 id="选择上传图片"><a href="#选择上传图片" class="header-anchor">#</a> 选择上传图片</h4> <p><a href="https://developers.weixin.qq.com/miniprogram/dev/api/media/image/wx.chooseImage.html" target="_blank" rel="noopener noreferrer">上传图片<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">let</span> max <span class="token operator">=</span> <span class="token number">9</span> <span class="token operator">-</span> <span class="token keyword">this</span><span class="token punctuation">.</span>data<span class="token punctuation">.</span>images<span class="token punctuation">.</span>length <span class="token comment">// 还能再选几张图片</span>
wx<span class="token punctuation">.</span><span class="token function">chooseImage</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token literal-property property">count</span><span class="token operator">:</span> max<span class="token punctuation">,</span> <span class="token comment">// 还能再选几张图片</span>
      <span class="token literal-property property">sizeType</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'original'</span><span class="token punctuation">,</span> <span class="token string">'compressed'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token comment">// 初始值 and 压缩过的</span>
      <span class="token literal-property property">sourceType</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'album'</span><span class="token punctuation">,</span> <span class="token string">'camera'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token comment">// 手机相册选择 and 拍照选择</span>
      <span class="token function-variable function">success</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> <span class="token comment">// 箭头函数改变this指向</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h4 id="图片裁剪"><a href="#图片裁剪" class="header-anchor">#</a> 图片裁剪</h4> <p><a href="https://developers.weixin.qq.com/miniprogram/dev/component/image.html" target="_blank" rel="noopener noreferrer">图片裁剪<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token comment">&lt;!-- mode 图片裁剪 aspectFill 保证短边完整显示 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>image</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>image<span class="token punctuation">&quot;</span></span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{{item}}<span class="token punctuation">&quot;</span></span> <span class="token attr-name">mode</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>aspectFill<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>image</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h4 id="获取标签自定义属性data-删除图片的实现"><a href="#获取标签自定义属性data-删除图片的实现" class="header-anchor">#</a> 获取标签自定义属性data-* （删除图片的实现）</h4> <div class="language- line-numbers-mode"><pre class="language-text"><code>&lt;!-- 显示图片 --&gt;
    &lt;block wx:for=&quot;{{images}}&quot; wx:key=&quot;*this&quot;&gt;
      &lt;view class=&quot;image-wrap&quot;&gt;
        &lt;!-- mode 图片裁剪 aspectFill 保证短边完整显示 --&gt;
        &lt;image class=&quot;image&quot; src=&quot;{{item}}&quot; mode=&quot;aspectFill&quot;&gt;&lt;/image&gt;
        &lt;icon class=&quot;iconfont icon-shanchu&quot; bindtap=&quot;onDelImage&quot; data-index=&quot;{{index}}&quot;&gt;&lt;/icon&gt;
      &lt;/view&gt;
    &lt;/block&gt;
    
    
    // 删除图片
  onDelImage(event) {
  	// event.target.dataset.index 获取标签属性data-index的值
    this.data.images.splice(event.target.dataset.index, 1) // splice会改变原有数组
    this.setData({
      images: this.data.images
    })
  },

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><h4 id="全屏预览图片-点击图片放大预览"><a href="#全屏预览图片-点击图片放大预览" class="header-anchor">#</a> 全屏预览图片(点击图片放大预览)</h4> <p><a href="https://developers.weixin.qq.com/miniprogram/dev/api/media/image/wx.previewImage.html" target="_blank" rel="noopener noreferrer">全屏预览图片<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 全屏预览图片</span>
  <span class="token function">onPreviewImage</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    wx<span class="token punctuation">.</span><span class="token function">previewImage</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token literal-property property">urls</span><span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>data<span class="token punctuation">.</span>images<span class="token punctuation">,</span> <span class="token comment">// 图片地址列表</span>
      <span class="token literal-property property">current</span><span class="token operator">:</span> event<span class="token punctuation">.</span>target<span class="token punctuation">.</span>dataset<span class="token punctuation">.</span>imgsrc <span class="token comment">// 当前预览图片地址</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h4 id="文件上传云存储-发布博客例子"><a href="#文件上传云存储-发布博客例子" class="header-anchor">#</a> 文件上传云存储（发布博客例子）</h4> <p><a href="https://developers.weixin.qq.com/miniprogram/dev/wxcloud/reference-client-api/storage/uploadFile.html" target="_blank" rel="noopener noreferrer">文件上传云存储<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code> <span class="token comment">//  结合'发布'的例子：</span>
  <span class="token function">send</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 验证是否输入内容</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>content<span class="token punctuation">.</span><span class="token function">trim</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token string">''</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// trim() 去掉字符串空格</span>
      wx<span class="token punctuation">.</span><span class="token function">showToast</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">'请输入内容'</span><span class="token punctuation">,</span>
        <span class="token literal-property property">icon</span><span class="token operator">:</span> <span class="token string">'none'</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token keyword">return</span>
    <span class="token punctuation">}</span>
    wx<span class="token punctuation">.</span><span class="token function">showLoading</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">'发布中'</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token comment">/**
     * 实现思路及步骤：
     * 1、图片 -&gt; 上传 云存储  -&gt; 生成 图片fineID（云文件ID） 
     * 2、数据 -&gt; 录入 云数据库
     *    数据包括：文字内容、图片fineID、昵称、头像、发布时间、openId(用户唯一标识，在插入数据库是系统会自动添加_openId字段，不需要另外插入)
     */</span>
    <span class="token keyword">let</span> promiseArr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
    <span class="token keyword">let</span> fileIds <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
    <span class="token comment">// 图片上传云存储</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>data<span class="token punctuation">.</span>images<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">item</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">let</span> p <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">let</span> suffix <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.\w+$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token comment">// 文件扩展名(文件后缀)</span>
        wx<span class="token punctuation">.</span>cloud<span class="token punctuation">.</span><span class="token function">uploadFile</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token comment">// 每次只能上传一个文件</span>
          <span class="token comment">/**
           * cloudPath 云路径。如果路径相同，后上传的文件会覆盖原文件
           * 路径：blog/云存储中的文件夹 + Date.now()时间戳 + Math.random()*1000000随机数 + 文件后缀
           */</span>
          <span class="token literal-property property">cloudPath</span><span class="token operator">:</span> <span class="token string">'blog/'</span> <span class="token operator">+</span> Date<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">'-'</span> <span class="token operator">+</span> Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">1000000</span> <span class="token operator">+</span> suffix<span class="token punctuation">,</span>
          <span class="token literal-property property">filePath</span><span class="token operator">:</span> item<span class="token punctuation">,</span> <span class="token comment">// 文件本地临时路径</span>
          <span class="token function-variable function">success</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            fileIds<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>fileID<span class="token punctuation">)</span>
            <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token function-variable function">fail</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span>
            <span class="token function">reject</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
      promiseArr<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>p<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    
    <span class="token comment">// 存入云数据库</span>
    Promise<span class="token punctuation">.</span><span class="token function">all</span><span class="token punctuation">(</span>promiseArr<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      db<span class="token punctuation">.</span><span class="token function">collection</span><span class="token punctuation">(</span><span class="token string">'blog'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token literal-property property">data</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token operator">...</span>userInfo<span class="token punctuation">,</span> <span class="token comment">// 昵称、头像</span>
          content<span class="token punctuation">,</span> <span class="token comment">// 内容</span>
          <span class="token literal-property property">img</span><span class="token operator">:</span> fileIds<span class="token punctuation">,</span> <span class="token comment">// 图片fileID列表</span>
          <span class="token literal-property property">createTime</span><span class="token operator">:</span> db<span class="token punctuation">.</span><span class="token function">serverDate</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 创建时间，取服务端时间</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        wx<span class="token punctuation">.</span><span class="token function">hideLoading</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        wx<span class="token punctuation">.</span><span class="token function">showToast</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
          <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">'发布成功'</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token comment">// 返回博客页面，并刷新</span>
        wx<span class="token punctuation">.</span><span class="token function">navigateBack</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

      <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      wx<span class="token punctuation">.</span><span class="token function">hideLoading</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      wx<span class="token punctuation">.</span><span class="token function">showToast</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">'抱歉，发布失败'</span><span class="token punctuation">,</span>
        <span class="token literal-property property">icon</span><span class="token operator">:</span> <span class="token string">'none'</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br></div></div><h4 id="js模块化-时间格式化"><a href="#js模块化-时间格式化" class="header-anchor">#</a> js模块化 （时间格式化）</h4> <p>在目录utils 中新建formatTime.js文件</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 时间格式化 模块封装</span>
module<span class="token punctuation">.</span><span class="token function-variable function">exports</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">date</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> <span class="token comment">// date 数据格式为 date</span>
  <span class="token keyword">let</span> fmt <span class="token operator">=</span> <span class="token string">'yyyy-MM-dd hh:mm:ss'</span> <span class="token comment">// 预定格式</span>
  <span class="token keyword">const</span> o <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token comment">// + 正则中的1个或多个</span>
    <span class="token string-property property">'M+'</span><span class="token operator">:</span> date<span class="token punctuation">.</span><span class="token function">getMonth</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span>
    <span class="token string-property property">'d+'</span><span class="token operator">:</span> date<span class="token punctuation">.</span><span class="token function">getDate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token string-property property">'h+'</span><span class="token operator">:</span> date<span class="token punctuation">.</span><span class="token function">getHours</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token string-property property">'m+'</span><span class="token operator">:</span> date<span class="token punctuation">.</span><span class="token function">getMinutes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token string-property property">'s+'</span><span class="token operator">:</span> date<span class="token punctuation">.</span><span class="token function">getSeconds</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">(y+)</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>fmt<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// $1 表示正则中的第一个，即(y+)</span>
    fmt <span class="token operator">=</span> fmt<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span>RegExp<span class="token punctuation">.</span>$1<span class="token punctuation">,</span> date<span class="token punctuation">.</span><span class="token function">getFullYear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// replace 替换</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> k <span class="token keyword">in</span> o<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">RegExp</span><span class="token punctuation">(</span><span class="token string">'('</span><span class="token operator">+</span> k <span class="token operator">+</span><span class="token string">')'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>fmt<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      fmt <span class="token operator">=</span> fmt<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span>RegExp<span class="token punctuation">.</span>$1<span class="token punctuation">,</span> o<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>length <span class="token operator">===</span> <span class="token number">1</span> <span class="token operator">?</span> <span class="token string">'0'</span> <span class="token operator">+</span> o<span class="token punctuation">[</span>k<span class="token punctuation">]</span> <span class="token operator">:</span> o<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">return</span> fmt
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br></div></div><p>在组件引入js模块</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">import</span> formatTime <span class="token keyword">from</span> <span class="token string">'../../utils/formatTime.js'</span>

使用：
<span class="token function">formatTime</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token string">'Wed Aug 28 2019 16:23:06 GMT+0800 (中国标准时间)'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h4 id="阻止事件冒泡-2"><a href="#阻止事件冒泡-2" class="header-anchor">#</a> 阻止事件冒泡</h4> <p><code>bind</code> 和 <code>catch</code> 都可以绑定事件，它们的区别是 <code>bind</code> 有事件冒泡，而 <code>catch</code> 没有</p> <h4 id="返回上一个页面并执行方法"><a href="#返回上一个页面并执行方法" class="header-anchor">#</a> 返回上一个页面并执行方法</h4> <p><a href="https://developers.weixin.qq.com/miniprogram/dev/api/route/wx.navigateBack.html" target="_blank" rel="noopener noreferrer">API<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code> <span class="token comment">// 返回博客页面，并刷新</span>
 wx<span class="token punctuation">.</span><span class="token function">navigateBack</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
 <span class="token keyword">const</span> pages <span class="token operator">=</span> <span class="token function">getCurrentPages</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 获取当前页面栈</span>
 <span class="token keyword">const</span> prevPage <span class="token operator">=</span> pages<span class="token punctuation">[</span>pages<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">2</span><span class="token punctuation">]</span>  <span class="token comment">// 取到上一个页面</span>
 prevPage<span class="token punctuation">.</span><span class="token function">onPullDownRefresh</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 执行上一个页面的方法 onPullDownRefresh</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h4 id="图片懒加载"><a href="#图片懒加载" class="header-anchor">#</a> 图片懒加载</h4> <p><a href="https://developers.weixin.qq.com/miniprogram/dev/component/image.html" target="_blank" rel="noopener noreferrer">API<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <div class="language-html line-numbers-mode"><pre class="language-html"><code>给image标签设置 lazy-load 为 true
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>image</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>img<span class="token punctuation">&quot;</span></span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{{item}}<span class="token punctuation">&quot;</span></span> <span class="token attr-name">lazy-load</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>true<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>image</span><span class="token punctuation">&gt;</span></span>

.img {
  background: #eee;
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p><strong>懒加载占位图可以给image设置背景图或背景色</strong></p> <h4 id="模糊查询"><a href="#模糊查询" class="header-anchor">#</a> 模糊查询</h4> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 获取博客列表</span>
  app<span class="token punctuation">.</span><span class="token function">router</span><span class="token punctuation">(</span><span class="token string">'blogList'</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">ctx<span class="token punctuation">,</span> next</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> keyword <span class="token operator">=</span> event<span class="token punctuation">.</span>keyword <span class="token comment">// 搜索关键字 调用接口时传递来的数据</span>
    <span class="token keyword">let</span> w <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>keyword<span class="token punctuation">.</span><span class="token function">trim</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token string">''</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      w <span class="token operator">=</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">content</span><span class="token operator">:</span> db<span class="token punctuation">.</span><span class="token function">RegExp</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token comment">// 正则</span>
          <span class="token literal-property property">regexp</span><span class="token operator">:</span> keyword<span class="token punctuation">,</span>
          <span class="token literal-property property">options</span><span class="token operator">:</span> <span class="token string">'i'</span> <span class="token comment">// i表示忽略大小写</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// where查询条件 skip 从第几条开始查，limit 查几条数据，orderBy(排序字段，排序方式) 排序，排序方式desc降序/asc升序</span>
    ctx<span class="token punctuation">.</span>body <span class="token operator">=</span>  <span class="token keyword">await</span> blogCollection<span class="token punctuation">.</span><span class="token function">where</span><span class="token punctuation">(</span>w<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">skip</span><span class="token punctuation">(</span>event<span class="token punctuation">.</span>start<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">limit</span><span class="token punctuation">(</span>event<span class="token punctuation">.</span>count<span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">orderBy</span><span class="token punctuation">(</span><span class="token string">'createTime'</span><span class="token punctuation">,</span> <span class="token string">'desc'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> res<span class="token punctuation">.</span>data
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><h4 id="提升模糊查询的效率-添加索引-对数据量大的查询效果明显"><a href="#提升模糊查询的效率-添加索引-对数据量大的查询效果明显" class="header-anchor">#</a> 提升模糊查询的效率 （添加索引，对数据量大的查询效果明显）</h4> <p>云开发控制台  &gt; 数据库相应的集合 &gt; 索引管理 &gt; 添加索引 &gt; 输入自定义索引名称、该字段的值是否唯一、被查询的字段名、升序/降序 &gt; ok</p> <h4 id="小程序端调用云数据库"><a href="#小程序端调用云数据库" class="header-anchor">#</a> 小程序端调用云数据库</h4> <p>一般调用云数据库的操作都写在云函数内，其实小程序端也可以对数据库进行操作。</p> <p>小程序端一次最多只能查询20条数据，云函数端最多可查询100条数据，可使用多次查询拼接的方式突破限制。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 小程序端调用云数据库示例</span>
    <span class="token keyword">const</span> db <span class="token operator">=</span> wx<span class="token punctuation">.</span>cloud<span class="token punctuation">.</span><span class="token function">database</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 初始化数据库</span>
    db<span class="token punctuation">.</span><span class="token function">collection</span><span class="token punctuation">(</span><span class="token string">'blog'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">orderBy</span><span class="token punctuation">(</span><span class="token string">'createTime'</span><span class="token punctuation">,</span><span class="token string">'deac'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h4 id="云数据库权限管理-2"><a href="#云数据库权限管理-2" class="header-anchor">#</a> 云数据库权限管理</h4> <p><strong>注意：云控制台和服务端（云函数）始终有所有数据读写权限，</strong></p> <p><strong>但权限的管理仅对小程序端发起的请求有效。</strong></p> <ul><li><p>仅创建者可写，所有人可读 （适合于文章）</p></li> <li><p>仅创建者可读写 (适用于私密内容)</p></li> <li><p>仅管理端可写，所有人可读（适用于商品信息）</p></li> <li><p>仅管理端可读写（适用于后台敏感数据）</p></li></ul> <h4 id="数据库中1对n关系的三种设计方式"><a href="#数据库中1对n关系的三种设计方式" class="header-anchor">#</a> 数据库中1对N关系的三种设计方式</h4> <h5 id="第一种-n的数量较少-几十个以内"><a href="#第一种-n的数量较少-几十个以内" class="header-anchor">#</a> 第一种：N的数量较少 几十个以内</h5> <p><strong>1 条记录存储 N 个子数据</strong></p> <p>​	如一条博客中，最多有9张图片，这9张图片可和其他数据放在一个记录中。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token punctuation">[</span>
	<span class="token punctuation">{</span>
		<span class="token literal-property property">id</span><span class="token operator">:</span><span class="token operator">...</span>
		<span class="token literal-property property">img</span><span class="token operator">:</span><span class="token punctuation">[</span>
		<span class="token string">'...'</span><span class="token punctuation">,</span> <span class="token string">'...'</span><span class="token punctuation">,</span> <span class="token string">'...'</span><span class="token punctuation">,</span> <span class="token string">'...'</span><span class="token punctuation">,</span> <span class="token string">'...'</span><span class="token punctuation">,</span> <span class="token string">'...'</span><span class="token punctuation">,</span> <span class="token string">'...'</span><span class="token punctuation">,</span> <span class="token string">'...'</span><span class="token punctuation">,</span> <span class="token string">'...'</span>
		<span class="token punctuation">]</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h5 id="第二种-n的数量较多-几十到几百个"><a href="#第二种-n的数量较多-几十到几百个" class="header-anchor">#</a> 第二种：N的数量较多  几十到几百个</h5> <p><strong>1 存储 每个N的 id</strong></p> <p>可分两个数据库集合，</p> <p>一个为 '目录' 集合，存放 '详情' 集合下的每条数据的 id 目录</p> <p>一个为 '详情' 集合，每条数据对应一个单独的 id 和 详细数据</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>目录集合：
<span class="token punctuation">[</span>
	<span class="token punctuation">{</span>
		<span class="token string-property property">'id'</span><span class="token operator">:</span><span class="token string">&quot;11&quot;</span><span class="token punctuation">,</span>
		<span class="token string-property property">'name'</span><span class="token operator">:</span> <span class="token string">'产品1'</span><span class="token punctuation">,</span>
		<span class="token string-property property">'xqs'</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'111'</span><span class="token punctuation">,</span><span class="token string">'222'</span><span class="token punctuation">,</span><span class="token string">'333'</span><span class="token punctuation">,</span> <span class="token operator">...</span> <span class="token punctuation">]</span>  <span class="token comment">// 存放 详情集合 中的每条数据 id</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">]</span>



详情集合：
<span class="token punctuation">[</span>
<span class="token punctuation">{</span><span class="token string-property property">'id'</span><span class="token operator">:</span><span class="token string">&quot;111&quot;</span><span class="token punctuation">,</span><span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">'零件1'</span><span class="token punctuation">,</span><span class="token literal-property property">title</span><span class="token operator">:</span><span class="token string">'...'</span> <span class="token operator">...</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">{</span><span class="token string-property property">'id'</span><span class="token operator">:</span><span class="token string">&quot;222&quot;</span><span class="token punctuation">,</span><span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">'零件2'</span><span class="token punctuation">,</span><span class="token literal-property property">title</span><span class="token operator">:</span><span class="token string">'...'</span> <span class="token operator">...</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">{</span><span class="token string-property property">'id'</span><span class="token operator">:</span><span class="token string">&quot;333&quot;</span><span class="token punctuation">,</span><span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">'零件3'</span><span class="token punctuation">,</span><span class="token literal-property property">title</span><span class="token operator">:</span><span class="token string">'...'</span> <span class="token operator">...</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token operator">...</span>
<span class="token punctuation">]</span>


</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><p>如歌单列表，与歌曲详情的数据组合设计。</p> <h5 id="第三种-n的数量巨大-几百成千上万个"><a href="#第三种-n的数量巨大-几百成千上万个" class="header-anchor">#</a> 第三种：N的数量巨大  几百成千上万个</h5> <p><strong>每个 N 都存储 1 的 id</strong></p> <p>如新浪博客中的一条博客下面有几千条评论</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>一条新浪博客：
<span class="token punctuation">[</span><span class="token punctuation">{</span>
	<span class="token string-property property">'id'</span><span class="token operator">:</span><span class="token string">'11'</span><span class="token punctuation">,</span>
	<span class="token string-property property">'content'</span><span class="token operator">:</span><span class="token string">'博客内容'</span>
	<span class="token operator">...</span>
<span class="token punctuation">}</span><span class="token punctuation">]</span>


上千条评价：
<span class="token punctuation">[</span>
<span class="token punctuation">{</span>
	<span class="token string-property property">'id'</span><span class="token operator">:</span><span class="token string">'111111'</span>
	<span class="token string-property property">'blogId'</span><span class="token operator">:</span><span class="token string">'11'</span><span class="token punctuation">,</span> <span class="token comment">// 这个id对应的是那一条博客的id</span>
	<span class="token string-property property">'content'</span><span class="token operator">:</span> <span class="token string">'评价内容1'</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">{</span>
	<span class="token string-property property">'id'</span><span class="token operator">:</span><span class="token string">'222222'</span>
	<span class="token string-property property">'blogId'</span><span class="token operator">:</span><span class="token string">'11'</span><span class="token punctuation">,</span> <span class="token comment">// 这个id对应的是那一条博客的id</span>
	<span class="token string-property property">'content'</span><span class="token operator">:</span> <span class="token string">'评价内容2'</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">{</span>
	<span class="token string-property property">'id'</span><span class="token operator">:</span><span class="token string">'33333'</span>
	<span class="token string-property property">'blogId'</span><span class="token operator">:</span><span class="token string">'11'</span><span class="token punctuation">,</span> <span class="token comment">// 这个id对应的是那一条博客的id</span>
	<span class="token string-property property">'content'</span><span class="token operator">:</span> <span class="token string">'评价内容3'</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token operator">...</span>
<span class="token punctuation">]</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br></div></div><h4 id="云调用"><a href="#云调用" class="header-anchor">#</a> 云调用</h4> <p>通过云函数调用服务端的开发接口</p> <p>这些接口如：模板消息推送、生成小程序码...</p> <h4 id="模板消息推送"><a href="#模板消息推送" class="header-anchor">#</a> 模板消息推送</h4> <p><strong>1、使用from表单才能触发消息推送，并设置report-submit=&quot;true&quot;</strong></p> <div class="language-html line-numbers-mode"><pre class="language-html"><code>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span> <span class="token attr-name">slot</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>modal-content<span class="token punctuation">&quot;</span></span> <span class="token attr-name">report-submit</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>true<span class="token punctuation">&quot;</span></span> <span class="token attr-name"><span class="token namespace">bind:</span>submit</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>onSend<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>textarea</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>content<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>comment-content<span class="token punctuation">&quot;</span></span> <span class="token attr-name">placeholder</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>写评论<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{{content}}<span class="token punctuation">&quot;</span></span> <span class="token attr-name">fixed</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>true<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>textarea</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>send<span class="token punctuation">&quot;</span></span> <span class="token attr-name">form-type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>submit<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>发送<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>form</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p><strong>2、需要到微信公众平台做相应的设置：</strong></p> <p>微信公众平台 &gt;  功能 &gt; 模板消息 &gt; 添加模板 &gt; 选择相应的模板&gt; 添加成功后会有一个模板ID</p> <p><strong>3、新建一个云函数，用于云调用。在该云函数下新建配置文件：config.json ，用于配置权限</strong></p> <p>config.json ：</p> <div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;permissions&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;openapi&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token string">&quot;templateMessage.send&quot;</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>云函数设置消息推送：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 云函数入口函数</span>
exports<span class="token punctuation">.</span><span class="token function-variable function">main</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">event<span class="token punctuation">,</span> context</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// 获取openid</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> <span class="token constant">OPENID</span> <span class="token punctuation">}</span> <span class="token operator">=</span> cloud<span class="token punctuation">.</span><span class="token function">getWXContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

  <span class="token comment">// 模板推送消息</span>
  <span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token keyword">await</span> cloud<span class="token punctuation">.</span>openapi<span class="token punctuation">.</span>templateMessage<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">touser</span><span class="token operator">:</span> <span class="token constant">OPENID</span><span class="token punctuation">,</span>
    <span class="token literal-property property">page</span><span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">/pages/blog-comment/blog-comment?blogId=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>event<span class="token punctuation">.</span>blogId<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span> <span class="token comment">// 用户点击推送消息打开的页面</span>
    <span class="token literal-property property">data</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token comment">// 模板的内容，keyword为在公众平台设置模板时对应的字段</span>
      <span class="token literal-property property">keyword1</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token comment">// 评价内容</span>
        <span class="token literal-property property">value</span><span class="token operator">:</span> event<span class="token punctuation">.</span>context 
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token literal-property property">keyword2</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token comment">// 评价时间</span>
        <span class="token literal-property property">value</span><span class="token operator">:</span> event<span class="token punctuation">.</span>time
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">templateId</span><span class="token operator">:</span> <span class="token string">'LNwKMcYwlz-0HabgBhmZi6CWZrlNSBiNJ2h0SMorcxQ'</span><span class="token punctuation">,</span> <span class="token comment">// 模板id，到公众平台模板消息上获取</span>
    <span class="token literal-property property">formId</span><span class="token operator">:</span> event<span class="token punctuation">.</span>formId <span class="token comment">// 触发消息推送的form表单的id</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>

  <span class="token keyword">return</span> result
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br></div></div><p><strong>4、在提交表单事件完成后调用消息推送云函数</strong></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code> wx<span class="token punctuation">.</span>cloud<span class="token punctuation">.</span><span class="token function">callFunction</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
          <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'sendMessage'</span><span class="token punctuation">,</span>
          <span class="token literal-property property">data</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            content<span class="token punctuation">,</span>
            formId<span class="token punctuation">,</span>
            <span class="token literal-property property">blogId</span><span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>properties<span class="token punctuation">.</span>blogId
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
          console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h4 id="云函数多集合查询数据库"><a href="#云函数多集合查询数据库" class="header-anchor">#</a> 云函数多集合查询数据库</h4> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 博客详情(博客内容、评论)</span>
  app<span class="token punctuation">.</span><span class="token function">router</span><span class="token punctuation">(</span><span class="token string">'blogDetail'</span><span class="token punctuation">,</span> <span class="token keyword">async</span><span class="token punctuation">(</span><span class="token parameter">ctx<span class="token punctuation">,</span> next</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> blogId <span class="token operator">=</span> event<span class="token punctuation">.</span>blogId

    <span class="token comment">// 博客内容</span>
    <span class="token keyword">let</span> detail <span class="token operator">=</span> <span class="token keyword">await</span> blogCollection<span class="token punctuation">.</span><span class="token function">where</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token literal-property property">_id</span><span class="token operator">:</span> blogId
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> res<span class="token punctuation">.</span>data
    <span class="token punctuation">}</span><span class="token punctuation">)</span>

    <span class="token comment">// 评论查询</span>
    <span class="token keyword">const</span> countResult <span class="token operator">=</span> <span class="token keyword">await</span> blogCollection<span class="token punctuation">.</span><span class="token function">count</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">const</span> total <span class="token operator">=</span> countResult<span class="token punctuation">.</span>total
    <span class="token keyword">let</span> commentList <span class="token operator">=</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">data</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>total <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// 突破100条限制</span>
      <span class="token keyword">const</span> batchTimes <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">ceil</span><span class="token punctuation">(</span>total <span class="token operator">/</span> <span class="token constant">MAX_LIMIT</span><span class="token punctuation">)</span>
      <span class="token keyword">const</span> tasks <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
      <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> batchTimes<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">let</span> promise <span class="token operator">=</span> db<span class="token punctuation">.</span><span class="token function">collection</span><span class="token punctuation">(</span><span class="token string">'blog-comment'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">skip</span><span class="token punctuation">(</span>i <span class="token operator">*</span> <span class="token constant">MAX_LIMIT</span><span class="token punctuation">)</span>
          <span class="token punctuation">.</span><span class="token function">limit</span><span class="token punctuation">(</span><span class="token constant">MAX_LIMIT</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">where</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
            blogId
          <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">orderBy</span><span class="token punctuation">(</span><span class="token string">'createTime'</span><span class="token punctuation">,</span> <span class="token string">'desc'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        tasks<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>promise<span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>tasks<span class="token punctuation">.</span>length <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        commentList <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">await</span> Promise<span class="token punctuation">.</span><span class="token function">all</span><span class="token punctuation">(</span>tasks<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">acc<span class="token punctuation">,</span> cur</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
          <span class="token keyword">return</span> <span class="token punctuation">{</span>
            <span class="token literal-property property">data</span><span class="token operator">:</span> acc<span class="token punctuation">.</span>data<span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span>cur<span class="token punctuation">.</span>data<span class="token punctuation">)</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span>

    <span class="token punctuation">}</span>
    ctx<span class="token punctuation">.</span>body <span class="token operator">=</span> <span class="token punctuation">{</span>
      detail<span class="token punctuation">,</span>
      commentList
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br></div></div><h4 id="分享功能"><a href="#分享功能" class="header-anchor">#</a> 分享功能</h4> <p>分享功能需要button标签，设置open-type=&quot;share&quot;</p> <div class="language-html line-numbers-mode"><pre class="language-html"><code>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">open-type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>share<span class="token punctuation">&quot;</span></span> <span class="token attr-name">data-blogid</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{{blogId}}<span class="token punctuation">&quot;</span></span> <span class="token attr-name">data-blog</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{{blog}}<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>share-btn<span class="token punctuation">&quot;</span></span> <span class="token attr-name">hover-class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>share-hover<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>i</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>iconfont icon-fenxiang icon<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>i</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>text</span><span class="token punctuation">&gt;</span></span>分享<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>text</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>在js中有onShareAppMessage方法，点击button会自动执行此方法</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token function-variable function">onShareAppMessage</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>event<span class="token punctuation">)</span>

    <span class="token comment">// 对分享卡片的设置</span>
    <span class="token keyword">let</span> blogObj <span class="token operator">=</span> event<span class="token punctuation">.</span>target<span class="token punctuation">.</span>dataset<span class="token punctuation">.</span>blog
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">title</span><span class="token operator">:</span> blogObj<span class="token punctuation">.</span>content<span class="token punctuation">,</span>
      <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">/pages/blog-comment/blog-comment?blogId=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>blogObj<span class="token punctuation">.</span>_id<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
      <span class="token comment">// imageUrl: '' // 自定义图片，不支持云存储的图片</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h4 id="不同场景获取用户信息的方式"><a href="#不同场景获取用户信息的方式" class="header-anchor">#</a> 不同场景获取用户信息的方式</h4> <h5 id="场景一-只想在界面上显示自己的昵称和头像"><a href="#场景一-只想在界面上显示自己的昵称和头像" class="header-anchor">#</a> 场景一：只想在界面上显示自己的昵称和头像</h5> <p>以组件的方式：根据type类型获取不同用户数据</p> <p><strong>该方式不需要授权，只能用于在wxml显示自己的信息</strong></p> <p><a href="https://developers.weixin.qq.com/miniprogram/dev/component/open-data.html" target="_blank" rel="noopener noreferrer">open-data<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>open-data</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>userAvatarUrl<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>open-data</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>open-data</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>userNickName<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>open-data</span><span class="token punctuation">&gt;</span></span>
...
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h5 id="场景二-在js中获取用户信息"><a href="#场景二-在js中获取用户信息" class="header-anchor">#</a> 场景二：在JS中获取用户信息</h5> <p>该方式要在用户授权以后才能获取用户信息</p> <p><a href="https://developers.weixin.qq.com/miniprogram/dev/api/open-api/user-info/wx.getUserInfo.html" target="_blank" rel="noopener noreferrer">wx.getUserInfo<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>wx<span class="token punctuation">.</span><span class="token function">getUserInfo</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token function-variable function">success</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>在未授权的情况下需要用户先授权：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 判断用户是否授权</span>
      wx<span class="token punctuation">.</span><span class="token function">getSetting</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token function-variable function">success</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> <span class="token comment">// 这里使用箭头函数可改变内部this指向为外部的this</span>
          <span class="token keyword">if</span> <span class="token punctuation">(</span>res<span class="token punctuation">.</span>authSetting<span class="token punctuation">[</span><span class="token string">'scope.userInfo'</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// 已授权</span>
            wx<span class="token punctuation">.</span><span class="token function">getUserInfo</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token comment">// 获取用户信息</span>
              <span class="token function-variable function">success</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> <span class="token comment">// 这里使用箭头函数可改变内部this指向为外部的this</span>

                app<span class="token punctuation">.</span><span class="token function">setGlobalData</span><span class="token punctuation">(</span><span class="token string">'userInfo'</span><span class="token punctuation">,</span> res<span class="token punctuation">.</span>userInfo<span class="token punctuation">)</span> <span class="token comment">// 设置app全局属性</span>

                <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">onLoginSuccess</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
                  <span class="token literal-property property">detail</span><span class="token operator">:</span> res<span class="token punctuation">.</span>userInfo
                <span class="token punctuation">}</span><span class="token punctuation">)</span>
              <span class="token punctuation">}</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span>
          <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span> <span class="token comment">// 未授权</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setData</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token comment">// 打开弹出层，显示获取用户信息按钮</span>
              <span class="token literal-property property">modalShow</span><span class="token operator">:</span> <span class="token boolean">true</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
      
      
  授权按钮
 <span class="token operator">&lt;</span>button <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;login&quot;</span> open<span class="token operator">-</span>type<span class="token operator">=</span><span class="token string">&quot;getUserInfo&quot;</span> bindgetuserinfo<span class="token operator">=</span><span class="token string">&quot;onGetUserInfo&quot;</span><span class="token operator">&gt;</span>获取微信授权信息<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
    
    
    <span class="token function">onGetUserInfo</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// 获取用户信息</span>
      <span class="token keyword">const</span> userInfo <span class="token operator">=</span> event<span class="token punctuation">.</span>detail<span class="token punctuation">.</span>userInfo
      <span class="token keyword">if</span> <span class="token punctuation">(</span>userInfo<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// 用户允许授权</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setData</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
          <span class="token literal-property property">modalShow</span><span class="token operator">:</span> <span class="token boolean">false</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">triggerEvent</span><span class="token punctuation">(</span><span class="token string">'loginSuccess'</span><span class="token punctuation">,</span> userInfo<span class="token punctuation">)</span> <span class="token comment">// 给父组件传用户数据</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span> <span class="token comment">// 用户拒绝授权</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">triggerEvent</span><span class="token punctuation">(</span><span class="token string">'loginFail'</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br></div></div><blockquote><p>注意：上面这种方式没有获取到openId</p></blockquote> <h5 id="场景三-获取openid"><a href="#场景三-获取openid" class="header-anchor">#</a> 场景三：获取openId</h5> <p><strong>获取openId不需要用户授权</strong></p> <p>1、传统开发方式获取openId，后台服务器由自己开发，没使用云开发</p> <p>小程序端                 微信服务器            后端服务器</p> <p>步骤：</p> <p>小程序端 调用 wx.login 向微信服务器 获取code</p> <p>小程序端 调用 wx.request 将 code 传递给 后端服务器</p> <p>后端服务器 使用code 向微信服务器 换取openid和session_key</p> <p>后端服务器 将openid 发送给 小程序端</p> <p>2、云开发方式获取openId</p> <p>云函数login中</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 获取 WX Context (微信调用上下文)，包括 OPENID、APPID、及 UNIONID（需满足 UNIONID 获取条件）</span>
  <span class="token keyword">const</span> wxContext <span class="token operator">=</span> cloud<span class="token punctuation">.</span><span class="token function">getWXContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    event<span class="token punctuation">,</span>
    <span class="token literal-property property">openid</span><span class="token operator">:</span> wxContext<span class="token punctuation">.</span><span class="token constant">OPENID</span><span class="token punctuation">,</span>
    <span class="token literal-property property">appid</span><span class="token operator">:</span> wxContext<span class="token punctuation">.</span><span class="token constant">APPID</span><span class="token punctuation">,</span>
    <span class="token literal-property property">unionid</span><span class="token operator">:</span> wxContext<span class="token punctuation">.</span><span class="token constant">UNIONID</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code>普通按钮
<span class="token operator">&lt;</span>button bindtap<span class="token operator">=</span><span class="token string">&quot;getOpenid&quot;</span><span class="token operator">&gt;</span>获取openid<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>

<span class="token function">getOpenid</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	wx<span class="token punctuation">.</span>cloud<span class="token punctuation">.</span><span class="token function">callFunction</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
		<span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'login'</span>
	<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span>
	<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><blockquote><p>openid 在小程序和公众号下是不一样的</p> <p>unionid 在小程序和公众号下都是一样的</p></blockquote> <h2 id="《我的》页面"><a href="#《我的》页面" class="header-anchor">#</a> 《我的》页面</h2> <p>json文件</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token string-property property">&quot;navigationBarTitleText&quot;</span><span class="token operator">:</span> <span class="token string">&quot;我的&quot;</span><span class="token punctuation">,</span>
  <span class="token string-property property">&quot;disableScroll&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span>  <span class="token comment">// 使页面无法滚动</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h4 id="导航页面链接跳转"><a href="#导航页面链接跳转" class="header-anchor">#</a> 导航页面链接跳转</h4> <p><a href="https://developers.weixin.qq.com/miniprogram/dev/component/navigator.html" target="_blank" rel="noopener noreferrer">navigator<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h4 id="背景图片"><a href="#背景图片" class="header-anchor">#</a> 背景图片</h4> <p>wxss背景图片不支持本地相对路径的图片，只支持网络图片和base64图片</p> <p>建议使用base64图片，图片文件最好不要太大。</p> <h4 id="每个页面都有的page标签"><a href="#每个页面都有的page标签" class="header-anchor">#</a> 每个页面都有的page标签</h4> <div class="language-js line-numbers-mode"><pre class="language-js"><code>page <span class="token punctuation">{</span>
  background<span class="token operator">-</span>color<span class="token operator">:</span> #f1f1f1<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h4 id="播放历史与本地存储"><a href="#播放历史与本地存储" class="header-anchor">#</a> 播放历史与本地存储</h4> <p>方案一：播放历史存储在数据库当中，这样在不同设备访问都可查看播放历史。读取速度相对较慢</p> <p>方案二：播放历史存储在本地，仅当前设备可查看播放历史。读取速度较快</p> <p>本项目采用本地存储：</p> <p>使用openid作为本地存储的key，播放历史存入value</p> <p>在app.js中获取openid，即打开小程序就获取openid。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// app.js</span>
<span class="token function-variable function">onLaunch</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getOpenid</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 获取openid并存储</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token function">getOpenid</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// 获取openid并存储</span>
    wx<span class="token punctuation">.</span>cloud<span class="token punctuation">.</span><span class="token function">callFunction</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'login'</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> openid <span class="token operator">=</span> res<span class="token punctuation">.</span>result<span class="token punctuation">.</span>openid
      <span class="token keyword">this</span><span class="token punctuation">.</span>globalData<span class="token punctuation">.</span>openid <span class="token operator">=</span> openid <span class="token comment">// 保存到全局变量</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>wx<span class="token punctuation">.</span><span class="token function">getStorageSync</span><span class="token punctuation">(</span>openid<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token string">''</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// 该用户从未打开过小程序，未存储过openid在本地</span>
        wx<span class="token punctuation">.</span><span class="token function">setStorageSync</span><span class="token punctuation">(</span>openid<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment">// 存储openid到本地</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><p>歌曲播放时</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 保存播放历史到本地存储</span>
  <span class="token function">savePlayHistory</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> currentSong <span class="token operator">=</span> musiclist<span class="token punctuation">[</span>nowPlayingIndex<span class="token punctuation">]</span> <span class="token comment">// 当前播放歌曲</span>
    <span class="token keyword">const</span> openid <span class="token operator">=</span> app<span class="token punctuation">.</span>globalData<span class="token punctuation">.</span>openid <span class="token comment">// 从全局属性获取openid</span>
    <span class="token keyword">const</span> playHistory <span class="token operator">=</span> wx<span class="token punctuation">.</span><span class="token function">getStorageSync</span><span class="token punctuation">(</span>openid<span class="token punctuation">)</span> <span class="token comment">// 从本地存储获取播放历史数组</span>

    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> len <span class="token operator">=</span> playHistory<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i <span class="token operator">&lt;</span> len<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>playHistory<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>id <span class="token operator">===</span> currentSong<span class="token punctuation">.</span>id<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// 当前播放歌曲已存在播放历史中</span>
        playHistory<span class="token punctuation">.</span><span class="token function">splice</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token comment">// 删除原纪录</span>
        <span class="token keyword">break</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    playHistory<span class="token punctuation">.</span><span class="token function">unshift</span><span class="token punctuation">(</span>currentSong<span class="token punctuation">)</span> <span class="token comment">// 在数组开头插入</span>
    wx<span class="token punctuation">.</span><span class="token function">setStorage</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token comment">// 存入本地</span>
      <span class="token literal-property property">key</span><span class="token operator">:</span> openid<span class="token punctuation">,</span>
      <span class="token literal-property property">data</span><span class="token operator">:</span> playHistory
    <span class="token punctuation">}</span><span class="token punctuation">)</span>

  <span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><p>播放历史页面获取</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token function-variable function">onLoad</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">options</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

    <span class="token keyword">const</span> openid <span class="token operator">=</span> app<span class="token punctuation">.</span>globalData<span class="token punctuation">.</span>openid <span class="token comment">//从全局属性获取openid</span>
    <span class="token keyword">const</span> playHistory <span class="token operator">=</span> wx<span class="token punctuation">.</span><span class="token function">getStorageSync</span><span class="token punctuation">(</span>openid<span class="token punctuation">)</span> <span class="token comment">// 读取本地播放历史数据</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span>playHistory<span class="token punctuation">.</span>length <span class="token operator">!==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// 有播放历史</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setData</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        playHistory
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
      wx<span class="token punctuation">.</span><span class="token function">setStorage</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token comment">// storage里把musiclist（播放列表）的内容换成播放历史的列表</span>
        <span class="token literal-property property">key</span><span class="token operator">:</span> <span class="token string">'musiclist'</span><span class="token punctuation">,</span>
        <span class="token literal-property property">data</span><span class="token operator">:</span> playHistory<span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

  <span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><h4 id="我的发现"><a href="#我的发现" class="header-anchor">#</a> 我的发现</h4> <p>代码分别演示了从云函数和小程序端获取数据，从小程序端获取数据享有<strong>权限管理</strong>的能力，不需要传openid。</p> <h4 id="小程序码"><a href="#小程序码" class="header-anchor">#</a> 小程序码</h4> <p><a href="https://developers.weixin.qq.com/miniprogram/dev/framework/open-ability/qr-code.html" target="_blank" rel="noopener noreferrer">获取小程序码<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>本项目演示使用<a href="https://developers.weixin.qq.com/miniprogram/dev/api-backend/open-api/qr-code/wxacode.getUnlimited.html" target="_blank" rel="noopener noreferrer">接口 B：适用于需要的码数量极多的业务场景<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> <code>云调用</code> 的方式。</p> <p>步骤：</p> <ul><li><p>创建云函数 gteQRCode</p></li> <li><p>gteQRCode云函数下创建config.json配置权限，代码如下：</p></li></ul> <div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;permissions&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span>
    <span class="token property">&quot;openapi&quot;</span><span class="token operator">:</span><span class="token punctuation">[</span>
      <span class="token string">&quot;wxacode.getUnlimited&quot;</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 云函数入口函数</span>
exports<span class="token punctuation">.</span><span class="token function-variable function">main</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">event<span class="token punctuation">,</span> context</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> wxContext <span class="token operator">=</span> cloud<span class="token punctuation">.</span><span class="token function">getWXContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

  <span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token keyword">await</span> cloud<span class="token punctuation">.</span>openapi<span class="token punctuation">.</span>wxacode<span class="token punctuation">.</span><span class="token function">getUnlimited</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">scene</span><span class="token operator">:</span> wxContext<span class="token punctuation">.</span><span class="token constant">OPENID</span><span class="token punctuation">,</span> <span class="token comment">// 链接参数 不一定传openid，可传其他任意数据，然后通过此数据，在别人扫码进入时就可用于判断</span>
    <span class="token comment">// page: &quot;pages/blog/blog&quot; // 默认进入主页</span>
    <span class="token comment">// lineColor: { // 线条颜色</span>
    <span class="token comment">//   'r': 211,</span>
    <span class="token comment">//   'g': 60,</span>
    <span class="token comment">//   'b': 57</span>
    <span class="token comment">// },</span>
    <span class="token comment">// isHyaline: true // 是否透明</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  
  <span class="token comment">// result为二进制数据, 先上传到云存储</span>

  <span class="token comment">// 上传云存储</span>
  <span class="token keyword">const</span> upload <span class="token operator">=</span> <span class="token keyword">await</span> cloud<span class="token punctuation">.</span><span class="token function">uploadFile</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">cloudPath</span><span class="token operator">:</span> <span class="token string">'qrcode/qrcode'</span> <span class="token operator">+</span> Date<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">'.png'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">fileContent</span><span class="token operator">:</span> result<span class="token punctuation">.</span>buffer
  <span class="token punctuation">}</span><span class="token punctuation">)</span>

  <span class="token keyword">return</span> upload<span class="token punctuation">.</span>fileID
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br></div></div><h5 id="判断是从扫码小程序码进入-以及参数获取"><a href="#判断是从扫码小程序码进入-以及参数获取" class="header-anchor">#</a> 判断是从扫码小程序码进入，以及参数获取</h5> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 在从小程序码进入的页面js，onLoad方法中，</span>

<span class="token function-variable function">onLoad</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">options</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>options<span class="token punctuation">.</span>scene<span class="token punctuation">)</span> <span class="token comment">// 获取到小程序码进入的参数</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="版本更新检测"><a href="#版本更新检测" class="header-anchor">#</a> 版本更新检测</h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// app.js</span>
<span class="token function-variable function">onLaunch</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">options</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">checkUpate</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token function">checkUpate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">const</span> updateManager <span class="token operator">=</span> wx<span class="token punctuation">.</span><span class="token function">getUpdateManager</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token comment">// 检测版本更新</span>
    updateManager<span class="token punctuation">.</span><span class="token function">onCheckForUpdate</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>res<span class="token punctuation">.</span>hasUpdate<span class="token punctuation">)</span><span class="token punctuation">{</span>
        updateManager<span class="token punctuation">.</span><span class="token function">onUpdateReady</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
          wx<span class="token punctuation">.</span><span class="token function">showModal</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
            <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">'更新提示'</span><span class="token punctuation">,</span>
            <span class="token literal-property property">content</span><span class="token operator">:</span> <span class="token string">'新版本已经准备好，是否重启应用'</span><span class="token punctuation">,</span>
            <span class="token function">success</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
              <span class="token keyword">if</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>confirm<span class="token punctuation">)</span><span class="token punctuation">{</span>
                updateManager<span class="token punctuation">.</span><span class="token function">applyUpdate</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
              <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
          <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br></div></div><h3 id="性能优化"><a href="#性能优化" class="header-anchor">#</a> 性能优化</h3> <p><a href="https://developers.weixin.qq.com/miniprogram/dev/framework/performance/tips.html" target="_blank" rel="noopener noreferrer">官网文档优化建议<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>使用开发者工具的调试器，Audits进行评分，然后根据提示针对项目进行优化。</p> <h3 id="场景值scene的作用与应用场景"><a href="#场景值scene的作用与应用场景" class="header-anchor">#</a> 场景值scene的作用与应用场景</h3> <p><a href="https://developers.weixin.qq.com/miniprogram/dev/framework/app-service/scene.html" target="_blank" rel="noopener noreferrer">场景值<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>场景值用来描述用户进入小程序的路径。完整场景值的含义请查看<a href="https://developers.weixin.qq.com/miniprogram/dev/reference/scene-list.html" target="_blank" rel="noopener noreferrer">场景值列表<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>。</p> <p>可根据不同场景进入实现不同业务处理，比如一个点餐小程序，店家内贴了小程序码，用户通过扫码进入，可立即进入点餐页面，等等</p> <p>在app.js中的onLaunch(options) 、onShow(options)，options包含scene场景值</p> <p><strong>开发者工具中，切后台，可模拟进入场景。</strong></p> <h3 id="小程序的-seo-页面收录sitemap"><a href="#小程序的-seo-页面收录sitemap" class="header-anchor">#</a> 小程序的&quot;SEO&quot;---页面收录sitemap</h3> <p>在app.js的同级目录下有sitemap.json文件，用于配置收录规则</p> <p><a href="https://developers.weixin.qq.com/miniprogram/dev/framework/sitemap.html" target="_blank" rel="noopener noreferrer">stiemap配置<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>作用：</p> <p>使小程序搜索可根据小程序的内容进行搜索到</p> <p>使用方法：</p> <p>1、在微信公众平台，小程序信息 &gt; 页面收录设置 &gt; 打开 (默认是已开启)</p> <p>2、打开sitemap.json文件，配置收录规则</p> <div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;desc&quot;</span><span class="token operator">:</span> <span class="token string">&quot;关于本文件的更多信息，请参考文档 https://developers.weixin.qq.com/miniprogram/dev/framework/sitemap.html&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;rules&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span> <span class="token comment">// 收录规则</span>
  <span class="token property">&quot;action&quot;</span><span class="token operator">:</span> <span class="token string">&quot;allow&quot;</span><span class="token punctuation">,</span><span class="token comment">// 是否被收录，allow允许被收录，disallow不允许</span>
  <span class="token property">&quot;page&quot;</span><span class="token operator">:</span> <span class="token string">&quot;*&quot;</span> <span class="token comment">// *星号表示所有页面都被收录</span>
  <span class="token punctuation">}</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;desc&quot;</span><span class="token operator">:</span> <span class="token string">&quot;关于本文件的更多信息，请参考文档 https://developers.weixin.qq.com/miniprogram/dev/framework/sitemap.html&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;rules&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span> <span class="token comment">// 收录规则，可添加多条</span>
  <span class="token property">&quot;action&quot;</span><span class="token operator">:</span> <span class="token string">&quot;allow&quot;</span><span class="token punctuation">,</span> <span class="token comment">// 是否被收录</span>
  <span class="token property">&quot;page&quot;</span><span class="token operator">:</span><span class="token string">&quot;pages/player/player&quot;</span><span class="token punctuation">,</span>  <span class="token comment">// 页面</span>
  <span class="token property">&quot;params&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;musicId&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;index&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token comment">// 链接的动态参数</span>
   <span class="token property">&quot;matching&quot;</span><span class="token operator">:</span>'exact' <span class="token comment">// 表示params的参数是否要准确的匹配</span>
  <span class="token punctuation">}</span>，<span class="token punctuation">{</span>
  <span class="token property">&quot;action&quot;</span><span class="token operator">:</span> <span class="token string">&quot;disallow&quot;</span><span class="token punctuation">,</span> <span class="token comment">// 是否被收录</span>
  <span class="token property">&quot;page&quot;</span><span class="token operator">:</span><span class="token string">&quot;*&quot;</span><span class="token punctuation">,</span>  /
  <span class="token punctuation">}</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>

<span class="token comment">// 上面配置规则表示除了player页面被收录外，其他页面不被收录</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h3 id="小程序上线审核流程"><a href="#小程序上线审核流程" class="header-anchor">#</a> 小程序上线审核流程</h3> <p>微信公众平台，版本管理&gt;把小程序上传为体验版》提交审核》上线</p> <h2 id="后台管理系统"><a href="#后台管理系统" class="header-anchor">#</a> 后台管理系统</h2> <h4 id="架构示意图"><a href="#架构示意图" class="header-anchor">#</a> 架构示意图</h4> <p>​				前端                                                           后台                                                         小程序云开发</p> <p>vue-admin-template  &lt;---通过ajax--&gt; 基于Koa2；HTTP API 或 tcb-admin-node    ----&gt;云函数、云数据库、云存储</p> <p>​</p> <h4 id="vue-admin-template构建管理系统前端"><a href="#vue-admin-template构建管理系统前端" class="header-anchor">#</a> vue-admin-template构建管理系统前端</h4> <p><a href="https://github.com/PanJiaChen/vue-element-admin" target="_blank" rel="noopener noreferrer">vue-element-admin<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 基于element的后台管理系统模板</p> <p><a href="https://github.com/PanJiaChen/vue-admin-template" target="_blank" rel="noopener noreferrer">vue-admin-template<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 是 <a href="https://github.com/PanJiaChen/vue-element-admin" target="_blank" rel="noopener noreferrer">vue-element-admin<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>的简化版</p> <p>使用方法查看官方文档。</p> <h4 id="koa2构建管理系统后端"><a href="#koa2构建管理系统后端" class="header-anchor">#</a> Koa2构建管理系统后端</h4> <p>官网： <a href="https://koa.bootcss.com/" target="_blank" rel="noopener noreferrer">https://koa.bootcss.com/<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>新建空文件夹wx-music-admin-backend，打开终端：</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token comment"># 生成package.json文件，-y 表示默认的配置</span>
<span class="token function">npm</span> init <span class="token parameter variable">-y</span>

<span class="token comment"># 安装koa</span>
<span class="token function">npm</span> <span class="token function">install</span> koa

<span class="token comment"># 新建app.js文件 (win10系统命令)，作为项目入口文件</span>
<span class="token builtin class-name">type</span> nul <span class="token operator">&gt;</span> app.js

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>app.js:</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> Koa <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'koa'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> chalk <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'chalk'</span><span class="token punctuation">)</span> <span class="token comment">// 使console.log打印文字有颜色的插件，需: npm i chalk</span>
<span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Koa</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">ctx</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  ctx<span class="token punctuation">.</span>body <span class="token operator">=</span> <span class="token string">'Hello Wolrd'</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> port <span class="token operator">=</span> <span class="token number">3000</span>
app<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span>port<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> <span class="token comment">// 端口号，开启服务后的回调函数</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>chalk<span class="token punctuation">.</span><span class="token function">green</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">&gt; 服务已开启，访问：http://localhost:</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>port<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span> 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>终端：</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token comment"># node启动项目</span>
<span class="token function">node</span> app.js

<span class="token comment"># 访问：http://localhost:3000</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h4 id="接口调用凭证-access-token-的缓存与更新"><a href="#接口调用凭证-access-token-的缓存与更新" class="header-anchor">#</a> 接口调用凭证 access_token 的缓存与更新</h4> <p>access_token，微信的接口调用凭证，详情：<a href="https://developers.weixin.qq.com/miniprogram/dev/api-backend/open-api/access-token/auth.getAccessToken.html" target="_blank" rel="noopener noreferrer">https://developers.weixin.qq.com/miniprogram/dev/api-backend/open-api/access-token/auth.getAccessToken.html<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>回到项目wx-music-admin-backend，打开终端：</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token comment"># HTTP 请求 插件</span>
<span class="token function">npm</span> i request
<span class="token function">npm</span> i request-promise
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">/**
 * 获取微信接口调用凭证
 * 详情：https://developers.weixin.qq.com/miniprogram/dev/api-backend/open-api/access-token/auth.getAccessToken.html
 */</span>


<span class="token keyword">const</span> rp <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'request-promise'</span><span class="token punctuation">)</span> <span class="token comment">// node发送http请求的插件</span>
<span class="token keyword">const</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'fs'</span><span class="token punctuation">)</span> <span class="token comment">// node文件模块</span>
<span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span> <span class="token comment">// node 路径模块</span>

<span class="token comment">//fileName = __dirname 当前文件所在目录的绝对路径, 加上 './access_token.json'</span>
<span class="token keyword">const</span> fileName <span class="token operator">=</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'./access_token.json'</span><span class="token punctuation">)</span>

<span class="token comment">// 这两个参数的获取：微信公众平台&gt;开发&gt;开发设置</span>
<span class="token keyword">const</span> <span class="token constant">APPID</span> <span class="token operator">=</span> <span class="token string">'wxc4e0b2d98063b103'</span>
<span class="token keyword">const</span> <span class="token constant">APPSECRET</span> <span class="token operator">=</span> <span class="token string">'xxx'</span> <span class="token comment">//小程序密钥，注意保密!</span>

<span class="token comment">// 微信 access_token 请求地址</span>
<span class="token keyword">const</span> <span class="token constant">URL</span> <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">https://api.weixin.qq.com/cgi-bin/token?grant_type=client_credential&amp;appid=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token constant">APPID</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&amp;secret=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token constant">APPSECRET</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span>

<span class="token comment">// 发送请求获取AccessToken</span>
<span class="token keyword">const</span> <span class="token function-variable function">updateAccessToken</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> resStr <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">rp</span><span class="token punctuation">(</span><span class="token constant">URL</span><span class="token punctuation">)</span>
  <span class="token keyword">const</span> res <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>resStr<span class="token punctuation">)</span>

  <span class="token keyword">if</span> <span class="token punctuation">(</span>res<span class="token punctuation">.</span>access_token<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// node写文件,参数：1 文件路径，2 文件内容, 首次写文件为新建，往后为覆盖</span>
    fs<span class="token punctuation">.</span><span class="token function">writeFileSync</span><span class="token punctuation">(</span>fileName<span class="token punctuation">,</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token literal-property property">access_token</span><span class="token operator">:</span> res<span class="token punctuation">.</span>access_token<span class="token punctuation">,</span>
      <span class="token literal-property property">createTime</span><span class="token operator">:</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span> <span class="token comment">// 如获取不到，再次获取</span>
    <span class="token keyword">await</span> <span class="token function">updateAccessToken</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// 读取access_token</span>
<span class="token keyword">const</span> <span class="token function-variable function">getAccessToken</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">try</span> <span class="token punctuation">{</span>
     <span class="token comment">// node读取文件,参数：1 读取的文件，2 字符集</span>
    <span class="token keyword">const</span> readRes <span class="token operator">=</span> fs<span class="token punctuation">.</span><span class="token function">readFileSync</span><span class="token punctuation">(</span>fileName<span class="token punctuation">,</span> <span class="token string">'utf8'</span><span class="token punctuation">)</span>
    <span class="token keyword">const</span> readObj <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>readRes<span class="token punctuation">)</span>

    <span class="token comment">// 如果服务器宕机导致setInterval无法定时更新，这里需要再次判断access_token的有效性</span>
    <span class="token keyword">const</span> createTime <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span>readObj<span class="token punctuation">.</span>createTime<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">const</span> nowTime <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token punctuation">(</span>nowTime <span class="token operator">-</span> createTime<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">1000</span> <span class="token operator">/</span> <span class="token number">60</span> <span class="token operator">/</span> <span class="token number">60</span> <span class="token operator">&gt;=</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">await</span> <span class="token function">updateAccessToken</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      <span class="token keyword">await</span> <span class="token function">getAccessToken</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      <span class="token keyword">return</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> readObj<span class="token punctuation">.</span>access_token

  <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">//捕获异常，在未创建文件时，先创建文件</span>
    <span class="token keyword">await</span> <span class="token function">updateAccessToken</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">await</span> <span class="token function">getAccessToken</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// access_token有效期为2个小时，定时更新</span>
<span class="token function">setInterval</span><span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">await</span> <span class="token function">updateAccessToken</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token number">7200</span> <span class="token operator">-</span> <span class="token number">300</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">1000</span><span class="token punctuation">)</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> getAccessToken
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br></div></div><h4 id="后端代码通过http-api-触发云函数获取数据"><a href="#后端代码通过http-api-触发云函数获取数据" class="header-anchor">#</a> 后端代码通过HTTP API 触发云函数获取数据</h4> <p><a href="https://developers.weixin.qq.com/miniprogram/dev/wxcloud/reference-http-api/functions/invokeCloudFunction.html" target="_blank" rel="noopener noreferrer">HTTP API 触发云函数<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h4 id="产生跨域和后端解决跨域问题"><a href="#产生跨域和后端解决跨域问题" class="header-anchor">#</a> 产生跨域和后端解决跨域问题</h4> <p>管理系统前端向管理系统后端请求数据，产生了跨域问题</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>  <span class="token comment">// 产生跨域的几种情况</span>
  <span class="token comment">// http://www.a.com  https://www.a.com 协议不同</span>
  <span class="token comment">// http://www.a.com  http://www.b.com 域名不同</span>
  <span class="token comment">// http://www.a.com  http://news.a.com 主域与子域不同</span>
  <span class="token comment">// http://www.a.com:8080  http://www.a.com:3000 端口不同</span>

<span class="token comment">// 解决跨域的几种方法</span>
<span class="token comment">// jsonp</span>
<span class="token comment">// iframe</span>
<span class="token comment">// postMessage跨域</span>
<span class="token comment">// 跨域资源共享（CORS）</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>管理系统后端，安装</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>// 解决跨域问题的koa包
<span class="token function">npm</span> i koa2-cors
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>app.js</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">//处理跨域</span>
app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token function">cors</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">origin</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'http://localhost:9528'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token comment">// 允许访问本服务的域</span>
  <span class="token literal-property property">credentials</span><span class="token operator">:</span> <span class="token boolean">true</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h4 id="云数据库的增删改查接口"><a href="#云数据库的增删改查接口" class="header-anchor">#</a> 云数据库的增删改查接口</h4> <p><a href="https://developers.weixin.qq.com/miniprogram/dev/wxcloud/reference-http-api/database/databaseQuery.html" target="_blank" rel="noopener noreferrer">数据库查询记录<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h4 id="后端获取前端post请求传来的数据"><a href="#后端获取前端post请求传来的数据" class="header-anchor">#</a> 后端获取前端post请求传来的数据</h4> <p>get请求可以直接通过ctx.request.query获取，但是post请求需要安装koa-body</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token function">npm</span> i koa-body
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>app.js</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> koaBody <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'koa-body'</span><span class="token punctuation">)</span> <span class="token comment">// 对post请求前端传来的数据的获取，需要此依赖</span>

<span class="token comment">// 接收post参数解析</span>
app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token function">koaBody</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">multipart</span><span class="token operator">:</span> <span class="token boolean">true</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>接口.js</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>router<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">'/updatePlaylist'</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">ctx<span class="token punctuation">,</span> next</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    
  <span class="token keyword">const</span> params <span class="token operator">=</span> ctx<span class="token punctuation">.</span>request<span class="token punctuation">.</span>body <span class="token comment">// post请求获取前端传来的数据，需安装和配置koa-body</span>
  
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h4 id="后端获取云存储图片"><a href="#后端获取云存储图片" class="header-anchor">#</a> 后端获取云存储图片</h4> <p>云存储中上传图片，云数据库中新建图片的集合，并添加数据字段，字段包含云文件的fileid。</p> <p>后端项目通过调用云数据库的方式获取数据</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>router<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'/list'</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">ctx<span class="token punctuation">,</span> next</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// 接口中读取数据库默认最多10条数据</span>
  <span class="token keyword">const</span> query <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">db.collection('swiper').get()</span><span class="token template-punctuation string">`</span></span>
  <span class="token keyword">const</span> res <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">callCloudDB</span><span class="token punctuation">(</span>ctx<span class="token punctuation">,</span> <span class="token string">'databasequery'</span><span class="token punctuation">,</span> query<span class="token punctuation">)</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span>
  
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>但获取到的数据为fileid，并不能用于显示图片，需要通过微信HTTP API获取云存储的接口来获取图片地址</p> <p><a href="https://developers.weixin.qq.com/miniprogram/dev/wxcloud/reference-http-api/storage/batchDownloadFile.html" target="_blank" rel="noopener noreferrer">获取云存储<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h4 id="后端上传图片到云存储"><a href="#后端上传图片到云存储" class="header-anchor">#</a> 后端上传图片到云存储</h4> <p><a href="https://developers.weixin.qq.com/miniprogram/dev/wxcloud/reference-http-api/storage/uploadFile.html" target="_blank" rel="noopener noreferrer">文件上传<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></div></div> <div class="page-edit"><!----> <!----> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">2022/12/05, 12:12:00</span></div></div> <div class="page-nav-wapper"><div class="page-nav-centre-wrap"><a href="/note/vue/" class="page-nav-centre page-nav-centre-prev"><div class="tooltip">
        《Vue》笔记
      </div></a> <a href="/note/javascriptbasics/" class="page-nav-centre page-nav-centre-next"><div class="tooltip">
        JavaScript基础
      </div></a></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/note/vue/" class="prev">《Vue》笔记</a></span> <span class="next"><a href="/note/javascriptbasics/">JavaScript基础</a>
        →
      </span></p></div></div></div> <div class="article-list"><div class="article-title"><a href="/archives" class="iconfont icon-bi">最近更新</a></div> <div class="article-wrapper"><dl><dd>01</dd> <dt><a href="/pages/github-deploy/"><div>GitHub 自动化部署</div></a> <span>02-04</span></dt></dl><dl><dd>02</dd> <dt><a href="/pages/5e0d5d/"><div>vue3-3新特性</div></a> <span>02-04</span></dt></dl><dl><dd>03</dd> <dt><a href="/pages/850829/"><div>类型声明文件</div></a> <span>04-20</span></dt></dl> <dl><dd></dd> <dt><a href="/archives" class="more">更多文章&gt;</a></dt></dl></div></div> </main></div> <div class="footer"><div class="arovane" data-v-b5f50804><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 476.104 455.694" data-v-b5f50804><defs data-v-b5f50804></defs> <g id="Background_Complete" data-v-b5f50804><path d="M420.455,139.764c.474-3.443-4.385-6.275-8.035-6.569-1.741-.14-3.549,.126-5.199-.449-3.574-1.246-5.001-5.862-8.488-7.333-2.607-1.099-5.608-.121-8.135,1.151-2.527,1.272-5.025,2.873-7.848,3.053-2.456,.157-5.123-.754-7.272,.446-1.601,.894-2.44,2.739-3.916,3.828-1.444,1.065-3.327,1.29-5.119,1.388-1.791,.097-3.646,.115-5.277,.862-1.631,.747-2.981,2.472-2.642,4.234l61.931-.611Z" class="cls-2 cloud one" data-v-b5f50804></path> <path d="M146.024,145.247c.474-3.443-4.385-6.275-8.035-6.569-1.741-.14-3.549,.126-5.199-.449-3.574-1.245-5.001-5.862-8.488-7.333-2.607-1.1-5.608-.121-8.135,1.151-2.527,1.272-5.025,2.873-7.848,3.053-2.456,.157-5.123-.753-7.272,.446-1.601,.894-2.44,2.739-3.916,3.827-1.444,1.065-3.327,1.29-5.119,1.388-1.791,.097-3.646,.116-5.277,.862-1.631,.747-2.981,2.472-2.642,4.234l61.931-.611Z" class="cls-2 cloud two" data-v-b5f50804></path> <path d="M437.1,209.611c.474-3.443-4.385-6.275-8.035-6.569-1.741-.14-3.549,.126-5.199-.449-3.574-1.246-5.001-5.862-8.488-7.333-2.607-1.1-5.608-.121-8.135,1.151-2.527,1.272-5.025,2.873-7.848,3.053-2.456,.157-5.123-.754-7.272,.446-1.601,.894-2.44,2.739-3.916,3.827-1.444,1.065-3.327,1.29-5.119,1.388-1.791,.097-3.646,.115-5.277,.862-1.631,.747-2.981,2.472-2.642,4.234l61.931-.611Z" class="cls-2 cloud three" data-v-b5f50804></path> <path d="M287.581,60.403c.797-5.787-7.371-10.548-13.508-11.043-2.927-.236-5.967,.211-8.739-.755-6.007-2.094-8.407-9.855-14.269-12.327-4.382-1.848-9.428-.203-13.676,1.935-4.248,2.138-8.447,4.829-13.193,5.133-4.129,.264-8.612-1.267-12.224,.75-2.692,1.503-4.102,4.605-6.583,6.434-2.427,1.79-5.593,2.169-8.605,2.333-3.011,.164-6.129,.194-8.871,1.45-2.742,1.256-5.011,4.155-4.442,7.117l104.111-1.027Z" class="cls-6 cloud four" data-v-b5f50804></path> <path d="M119.051,262.562c.698-5.068-6.455-9.238-11.83-9.671-2.563-.207-5.226,.185-7.654-.661-5.261-1.834-7.363-8.631-12.496-10.796-3.838-1.619-8.256-.178-11.977,1.695s-7.398,4.229-11.554,4.495c-3.616,.231-7.542-1.11-10.706,.657-2.357,1.316-3.592,4.032-5.765,5.635-2.126,1.568-4.898,1.9-7.536,2.043-2.637,.144-5.368,.17-7.769,1.27-2.402,1.1-4.388,3.639-3.89,6.233l91.178-.9Z" class="cls-6 cloud five" data-v-b5f50804></path></g> <g id="Floor" data-v-b5f50804><path d="M472.771,455.433c0,.144-105.842,.26-236.374,.26s-236.397-.117-236.397-.26,105.819-.26,236.397-.26,236.374,.117,236.374,.26Z" class="cls-8" data-v-b5f50804></path></g> <g id="Straw" data-v-b5f50804><g data-v-b5f50804><path d="M118.399,422.347c-30.532-2.71-82.291,11.136-104.686,33.205l198.414-.714c-29.934-6.594-63.196-29.78-93.728-32.49Z" class="cls-4" data-v-b5f50804></path> <path d="M23.453,415.212c.024-.026,.416,.292,1.103,.89,.69,.596,1.664,1.485,2.847,2.605,2.368,2.238,5.543,5.436,8.855,9.147,3.31,3.715,6.124,7.236,8.077,9.844,.977,1.304,1.749,2.373,2.262,3.126,.516,.751,.787,1.176,.758,1.198-.029,.021-.356-.363-.921-1.077-.626-.791-1.429-1.806-2.39-3.021-2.024-2.546-4.874-6.018-8.174-9.723-3.302-3.701-6.426-6.929-8.723-9.23-1.098-1.095-2.014-2.008-2.728-2.72-.644-.643-.989-1.011-.965-1.038Z" class="cls-4" data-v-b5f50804></path> <path d="M22.071,434.284c0-.036,.292-.06,.822-.072,.529-.017,1.295,.007,2.239,.081,1.887,.145,4.488,.571,7.244,1.465,2.755,.9,5.11,2.087,6.72,3.081,.806,.496,1.44,.927,1.857,1.252,.42,.321,.642,.512,.621,.542-.048,.069-1.02-.574-2.663-1.475-1.641-.903-3.983-2.017-6.697-2.905-2.715-.88-5.264-1.358-7.122-1.594-1.858-.239-3.023-.291-3.022-.375Z" class="cls-4" data-v-b5f50804></path> <path d="M38.845,418.318c.13-.062,2.263,4.128,4.764,9.357,2.502,5.231,4.425,9.521,4.295,9.583s-2.263-4.127-4.765-9.358c-2.501-5.23-4.424-9.52-4.295-9.582Z" class="cls-4" data-v-b5f50804></path> <path d="M50.806,397.188c.036,0,.064,.561,.084,1.573,.015,1.012,.053,2.476,.124,4.282,.138,3.613,.492,8.599,1.28,14.057,.796,5.459,1.873,10.341,2.767,13.844,.445,1.752,.824,3.167,1.098,4.141,.268,.976,.4,1.521,.366,1.532-.034,.011-.232-.514-.56-1.473-.333-.958-.767-2.36-1.26-4.105-.988-3.489-2.128-8.381-2.927-13.864-.791-5.482-1.088-10.496-1.133-14.122-.024-1.813-.006-3.281,.041-4.294,.042-1.013,.082-1.573,.118-1.572Z" class="cls-4" data-v-b5f50804></path> <path d="M51.312,412.22c-.136-.047,.374-1.88,1.138-4.094,.765-2.214,1.495-3.971,1.631-3.924,.136,.047-.374,1.879-1.138,4.094-.765,2.214-1.495,3.971-1.631,3.924Z" class="cls-4" data-v-b5f50804></path> <path d="M50.367,408.307c-.123,.075-.808-.816-1.53-1.99-.723-1.174-1.209-2.187-1.087-2.263,.122-.075,.807,.815,1.53,1.99,.723,1.174,1.209,2.187,1.087,2.262Z" class="cls-4" data-v-b5f50804></path> <path d="M51.487,402.902c-.137-.045,.088-1.104,.501-2.366,.413-1.263,.859-2.249,.996-2.205,.137,.045-.088,1.104-.501,2.367-.413,1.262-.859,2.249-.996,2.204Z" class="cls-4" data-v-b5f50804></path> <path d="M98.282,401.663c.034-.012,.186,.309,.432,.901,.248,.592,.58,1.458,.967,2.538,.777,2.157,1.749,5.176,2.642,8.561,.891,3.387,1.531,6.493,1.918,8.753,.194,1.13,.332,2.048,.408,2.685,.078,.637,.104,.991,.068,.997-.076,.013-.358-1.376-.837-3.612-.478-2.236-1.173-5.317-2.06-8.691-.889-3.371-1.802-6.395-2.488-8.576-.685-2.182-1.122-3.53-1.05-3.556Z" class="cls-4" data-v-b5f50804></path> <path d="M110.064,405.691c.072,.013-.063,1.096-.31,2.841-.268,1.913-.594,4.24-.954,6.813-.332,2.578-.632,4.909-.879,6.825-.223,1.747-.378,2.828-.451,2.822-.07-.006-.045-1.098,.085-2.859,.129-1.76,.371-4.187,.729-6.857,.359-2.669,.767-5.073,1.107-6.805,.34-1.732,.604-2.792,.673-2.78Z" class="cls-4" data-v-b5f50804></path> <path d="M115.546,413.991c.136,.073-1.034,2.38-2.083,5.376-1.064,2.991-1.601,5.521-1.754,5.492-.132-.017,.182-2.626,1.263-5.666,1.067-3.043,2.461-5.271,2.574-5.202Z" class="cls-4" data-v-b5f50804></path> <g class="cls-10" data-v-b5f50804><path d="M36.844,455.551s41.37-31.694,81.555-33.205c2.176,.181,4.463,.502,6.837,.932,0,0-49.307,17.354-62.34,32.272h-26.052Z" class="cls-3" data-v-b5f50804></path></g></g> <g data-v-b5f50804><path d="M385.148,401.72c-35.107-7.341-71.321,3.004-105.204,14.765-31.958,11.092-63.446,23.537-94.352,37.289l290.513,1.778c-27.283-22.888-56.098-46.542-90.957-53.832Z" class="cls-4" data-v-b5f50804></path> <g data-v-b5f50804><path d="M342.792,384.754c-.269-.509-.156-1.318,.11-1.829,.266-.511,.686-.921,1.1-1.322,.041-.039,.089-.082,.145-.077,.062,.005,.103,.064,.132,.119,.291,.554,.162,1.254-.167,1.787-.329,.533-.83,.933-1.32,1.322" class="cls-4" data-v-b5f50804></path> <path d="M342.26,382.572c-.351-.457-.375-1.273-.199-1.822,.176-.548,.522-1.023,.862-1.488,.033-.046,.074-.095,.13-.1,.062-.005,.113,.046,.15,.095,.381,.497,.37,1.209,.135,1.789-.235,.58-.661,1.059-1.079,1.525" class="cls-4" data-v-b5f50804></path> <path d="M341.592,380.242c-.313-.484-.271-1.3-.051-1.832s.603-.977,.98-1.413c.037-.043,.082-.089,.138-.089,.062,0,.109,.055,.142,.107,.339,.526,.271,1.235-.011,1.794-.281,.559-.745,1.002-1.199,1.433" class="cls-4" data-v-b5f50804></path> <path d="M340.913,377.918c-.271-.508-.162-1.318,.101-1.83s.682-.924,1.094-1.327c.04-.04,.089-.082,.145-.078,.062,.005,.104,.064,.133,.118,.294,.553,.168,1.253-.159,1.788-.327,.534-.825,.937-1.314,1.328" class="cls-4" data-v-b5f50804></path> <path d="M340.318,375.809c-.237-.525-.075-1.326,.221-1.819,.297-.494,.742-.877,1.179-1.252,.043-.037,.094-.076,.15-.068,.061,.009,.099,.07,.125,.127,.257,.571,.085,1.262-.276,1.773-.361,.511-.885,.88-1.399,1.239" class="cls-4" data-v-b5f50804></path> <path d="M339.771,373.621c-.216-.534-.021-1.328,.295-1.809,.316-.481,.777-.846,1.229-1.203,.044-.035,.097-.072,.152-.062,.061,.012,.096,.074,.119,.132,.234,.581,.033,1.264-.348,1.76-.382,.496-.92,.844-1.448,1.181" class="cls-4" data-v-b5f50804></path> <path d="M339.048,371.197c-.19-.543,.042-1.327,.381-1.792,.339-.466,.816-.808,1.285-1.143,.046-.033,.1-.068,.155-.054,.06,.014,.093,.079,.113,.137,.206,.591-.027,1.264-.432,1.742-.405,.478-.959,.799-1.502,1.111" class="cls-4" data-v-b5f50804></path> <path d="M342.798,384.756c-.027-.575-.536-1.214-1.025-1.519s-1.059-.444-1.619-.578c-.055-.013-.118-.025-.164,.008-.05,.036-.056,.108-.053,.169,.031,.625,.499,1.162,1.053,1.453,.554,.291,1.189,.381,1.809,.467" class="cls-4" data-v-b5f50804></path> <path d="M342.283,382.554c-.027-.575-.536-1.215-1.025-1.519-.489-.305-1.06-.444-1.619-.578-.055-.013-.118-.025-.164,.008-.05,.036-.056,.108-.053,.169,.031,.625,.499,1.162,1.053,1.453,.554,.291,1.189,.381,1.809,.467" class="cls-4" data-v-b5f50804></path> <path d="M341.588,380.243c-.002-.576-.483-1.237-.958-1.562s-1.039-.489-1.593-.648c-.054-.016-.117-.03-.164,0-.052,.034-.061,.105-.061,.167,.004,.626,.448,1.183,.989,1.497,.541,.315,1.171,.432,1.787,.545" class="cls-4" data-v-b5f50804></path> <path d="M340.96,377.947c-.004-.576-.486-1.235-.962-1.56-.476-.324-1.04-.486-1.594-.644-.054-.015-.117-.03-.164,.001-.052,.034-.061,.105-.06,.167,.005,.626,.451,1.182,.993,1.495,.542,.313,1.172,.429,1.789,.54" class="cls-4" data-v-b5f50804></path> <path d="M340.372,375.821c-.006-.576-.49-1.234-.967-1.557-.477-.323-1.042-.483-1.597-.638-.054-.015-.117-.03-.164,.002-.052,.034-.06,.105-.06,.167,.007,.626,.455,1.18,.998,1.492,.543,.312,1.174,.425,1.79,.534" class="cls-4" data-v-b5f50804></path> <path d="M339.833,373.604c-.036-.575-.554-1.206-1.047-1.504s-1.066-.428-1.628-.554c-.055-.012-.118-.023-.164,.01-.05,.037-.055,.108-.051,.17,.04,.625,.516,1.155,1.074,1.437,.559,.283,1.194,.364,1.816,.44" class="cls-4" data-v-b5f50804></path> <path d="M339.081,371.249c-.026-.575-.533-1.216-1.021-1.522s-1.058-.447-1.618-.583c-.055-.013-.118-.025-.164,.007-.05,.036-.057,.108-.054,.169,.029,.625,.495,1.164,1.049,1.456s1.188,.385,1.808,.472" class="cls-4" data-v-b5f50804></path> <path d="M350.062,411.239c-.139,.038-2.904-9.613-6.175-21.553-3.272-11.944-5.812-21.655-5.673-21.693,.139-.038,2.903,9.611,6.175,21.556,3.271,11.94,5.811,21.653,5.673,21.691Z" class="cls-4" data-v-b5f50804></path> <path d="M338.69,369.719c-.545-.267-.953-.871-1.067-1.467s-.02-1.213,.135-1.8c.505,.299,.957,.89,1.097,1.46s.261,1.292-.166,1.807" class="cls-4" data-v-b5f50804></path></g> <g data-v-b5f50804><path d="M371.618,387.407c.041-.574,.565-1.201,1.061-1.494,.496-.293,1.07-.419,1.633-.54,.055-.012,.119-.022,.164,.012,.05,.037,.054,.109,.049,.171-.046,.624-.526,1.15-1.087,1.428-.561,.278-1.197,.353-1.82,.424" class="cls-4" data-v-b5f50804></path> <path d="M372.32,385.273c-.056-.573,.355-1.279,.794-1.651,.439-.372,.984-.592,1.519-.806,.052-.021,.113-.042,.164-.016,.055,.028,.071,.098,.077,.16,.06,.623-.325,1.222-.832,1.59s-1.121,.549-1.722,.724" class="cls-4" data-v-b5f50804></path> <path d="M372.986,382.943c-.009-.576,.458-1.246,.926-1.581,.468-.335,1.029-.51,1.579-.68,.054-.017,.116-.033,.164-.003,.053,.033,.063,.104,.064,.166,.009,.626-.423,1.192-.958,1.517s-1.162,.456-1.776,.581" class="cls-4" data-v-b5f50804></path> <path d="M373.639,380.61c.038-.575,.559-1.204,1.054-1.499,.494-.295,1.068-.424,1.63-.547,.055-.012,.119-.023,.164,.011,.05,.037,.054,.109,.05,.171-.043,.625-.521,1.152-1.08,1.433-.56,.28-1.196,.359-1.818,.433" class="cls-4" data-v-b5f50804></path> <path d="M374.249,378.506c.076-.571,.637-1.165,1.15-1.427,.513-.262,1.093-.352,1.663-.439,.056-.008,.12-.015,.163,.022,.047,.04,.047,.112,.039,.173-.084,.621-.595,1.116-1.172,1.359-.577,.243-1.217,.279-1.842,.312" class="cls-4" data-v-b5f50804></path> <path d="M374.942,376.36c.099-.567,.684-1.138,1.207-1.379,.523-.241,1.107-.307,1.679-.371,.056-.006,.12-.01,.162,.028,.045,.042,.042,.114,.032,.175-.109,.617-.64,1.091-1.227,1.31-.586,.219-1.227,.229-1.853,.237" class="cls-4" data-v-b5f50804></path> <path d="M375.61,373.92c.126-.562,.738-1.104,1.271-1.32,.534-.216,1.12-.254,1.695-.29,.056-.004,.121-.004,.16,.036,.044,.044,.037,.116,.023,.176-.138,.611-.691,1.059-1.288,1.25-.596,.191-1.237,.171-1.862,.148" class="cls-4" data-v-b5f50804></path> <path d="M371.621,387.411c.281-.503,.187-1.314-.066-1.831s-.664-.937-1.069-1.347c-.04-.04-.087-.084-.143-.08-.062,.004-.105,.062-.135,.116-.305,.547-.192,1.25,.125,1.79,.317,.54,.807,.952,1.288,1.353" class="cls-4" data-v-b5f50804></path> <path d="M372.349,385.269c.281-.503,.187-1.314-.066-1.831s-.665-.937-1.069-1.347c-.04-.04-.087-.084-.144-.08-.062,.004-.105,.061-.135,.116-.305,.547-.191,1.25,.125,1.79,.317,.54,.807,.952,1.288,1.353" class="cls-4" data-v-b5f50804></path> <path d="M372.982,382.941c.302-.49,.244-1.305,.013-1.832-.231-.528-.623-.965-1.009-1.392-.038-.042-.083-.087-.14-.086-.062,.001-.107,.057-.14,.11-.328,.533-.245,1.24,.048,1.794,.293,.553,.765,.986,1.229,1.407" class="cls-4" data-v-b5f50804></path> <path d="M373.663,380.66c.301-.491,.241-1.306,.008-1.833-.232-.527-.626-.963-1.013-1.39-.038-.042-.084-.087-.14-.086-.062,.001-.107,.057-.139,.11-.327,.534-.242,1.241,.052,1.794,.294,.553,.768,.984,1.232,1.404" class="cls-4" data-v-b5f50804></path> <path d="M374.289,378.545c.3-.492,.236-1.306,.002-1.833-.234-.526-.629-.961-1.017-1.386-.038-.042-.084-.087-.14-.086-.062,.001-.107,.058-.139,.111-.325,.535-.238,1.242,.058,1.794,.296,.552,.771,.982,1.237,1.4" class="cls-4" data-v-b5f50804></path> <path d="M375.004,376.378c.274-.507,.168-1.317-.094-1.83-.261-.513-.678-.927-1.088-1.331-.04-.04-.088-.083-.145-.078-.062,.005-.104,.063-.133,.118-.296,.551-.173,1.253,.152,1.788,.324,.535,.821,.94,1.308,1.334" class="cls-4" data-v-b5f50804></path> <path d="M375.611,373.981c.283-.502,.191-1.314-.061-1.832s-.662-.939-1.065-1.35c-.04-.04-.087-.084-.143-.081-.062,.004-.105,.061-.135,.115-.306,.546-.195,1.249,.12,1.791s.805,.955,1.284,1.357" class="cls-4" data-v-b5f50804></path> <path d="M363.781,413.728c-.138-.041,2.62-9.694,6.159-21.558,3.54-11.868,6.521-21.452,6.659-21.411,.138,.041-2.619,9.692-6.16,21.56-3.539,11.864-6.52,21.45-6.658,21.409Z" class="cls-4" data-v-b5f50804></path> <path d="M376.088,372.476c-.321-.515-.348-1.243-.13-1.809s.625-1.04,1.067-1.456c.27,.521,.342,1.261,.159,1.819-.182,.558-.462,1.234-1.096,1.446" class="cls-4" data-v-b5f50804></path></g> <g data-v-b5f50804><path d="M434.824,386.574c.016,.009-.074,.204-.259,.566-.216,.409-.491,.93-.831,1.573-.74,1.355-1.773,3.336-3.005,5.804-1.239,2.465-2.628,5.442-4.082,8.786-1.431,3.353-2.914,7.079-4.315,11.047-1.384,3.975-2.553,7.811-3.53,11.325-.953,3.52-1.728,6.713-2.299,9.412-.579,2.697-1.01,4.889-1.278,6.409-.136,.714-.246,1.293-.333,1.747-.082,.399-.133,.607-.151,.604s0-.216,.047-.62c.061-.458,.14-1.043,.237-1.764,.207-1.532,.583-3.738,1.117-6.451,.526-2.715,1.266-5.925,2.196-9.462,.954-3.531,2.113-7.384,3.501-11.372,1.405-3.98,2.906-7.713,4.366-11.066,1.482-3.343,2.909-6.312,4.193-8.761,1.277-2.452,2.361-4.41,3.156-5.736,.375-.624,.679-1.129,.917-1.526,.215-.346,.335-.523,.35-.514Z" class="cls-4" data-v-b5f50804></path> <path d="M428.283,405.152c.098,.105-.81,1.114-2.027,2.253-1.218,1.139-2.285,1.978-2.383,1.873-.098-.105,.809-1.113,2.028-2.253,1.218-1.139,2.285-1.977,2.383-1.872Z" class="cls-4" data-v-b5f50804></path> <path d="M425.058,401.514c.143,.01,.171,1.323,.062,2.932-.109,1.61-.314,2.907-.457,2.898-.143-.01-.171-1.323-.062-2.933,.109-1.61,.314-2.907,.457-2.897Z" class="cls-4" data-v-b5f50804></path> <path d="M430.044,400.572c.089,.113-.776,1.037-1.933,2.063-1.157,1.026-2.177,1.775-2.279,1.674-.101-.102,.764-1.026,1.933-2.063,1.169-1.037,2.189-1.786,2.278-1.673Z" class="cls-4" data-v-b5f50804></path> <path d="M427.357,395.397c.142-.003,.285,1.327,.216,2.968-.066,1.642-.318,2.956-.459,2.941-.145-.015-.127-1.338-.061-2.962,.068-1.624,.158-2.944,.304-2.947Z" class="cls-4" data-v-b5f50804></path> <path d="M432.086,395.64c.08,.119-.629,.816-1.584,1.555-.955,.739-1.807,1.251-1.903,1.144-.095-.108,.613-.804,1.584-1.555,.97-.751,1.822-1.263,1.903-1.144Z" class="cls-4" data-v-b5f50804></path> <path d="M430.352,391.02c.143,.017,.124,1.14-.042,2.508-.166,1.368-.416,2.462-.559,2.445-.143-.017-.124-1.14,.042-2.508,.166-1.367,.416-2.462,.559-2.445Z" class="cls-4" data-v-b5f50804></path> <path d="M434.624,390.754c.083,.118-.598,.741-1.52,1.393-.923,.652-1.738,1.086-1.821,.968-.083-.118,.598-.741,1.521-1.393,.923-.652,1.738-1.085,1.821-.968Z" class="cls-4" data-v-b5f50804></path> <path d="M432.996,385.974c.143,.011,.184,1.02,.091,2.254-.093,1.235-.284,2.226-.428,2.215s-.184-1.02-.091-2.254c.093-1.234,.284-2.226,.428-2.215Z" class="cls-4" data-v-b5f50804></path> <path d="M436.478,387.523c.065,.128-.5,.497-1.263,.823-.763,.326-1.42,.48-1.468,.344-.047-.136,.518-.504,1.263-.823,.745-.318,1.402-.472,1.468-.344Z" class="cls-4" data-v-b5f50804></path> <path d="M436.446,383.999c.122,.075-.274,.941-.886,1.933-.612,.993-1.207,1.736-1.33,1.66-.122-.076,.274-.941,.886-1.934,.612-.992,1.207-1.736,1.329-1.66Z" class="cls-4" data-v-b5f50804></path></g> <g class="cls-10" data-v-b5f50804><path d="M326.44,403.023s48.106,32.674,51.927,51.93l27.757,.268s-34.975-46.004-67.914-54.268l-11.77,2.07Z" class="cls-3" data-v-b5f50804></path></g> <g class="cls-10" data-v-b5f50804><path d="M367.194,399.431s44.56,25.384,72.893,55.9l24.127,.22s-49.338-42.447-70.693-51.739c-8.639-2.559-17.086-4.128-25.267-4.322" class="cls-3" data-v-b5f50804></path></g> <path d="M444.338,402.532c.066,.043-.669,1.256-1.807,3.241-1.138,1.984-2.654,4.757-4.161,7.902-1.504,3.148-2.711,6.068-3.542,8.2-.832,2.131-1.314,3.464-1.389,3.44-.034-.011,.045-.358,.219-.976,.171-.619,.451-1.505,.824-2.591,.745-2.172,1.905-5.132,3.417-8.297,1.515-3.163,3.091-5.923,4.315-7.866,.611-.972,1.125-1.746,1.5-2.268,.373-.523,.593-.803,.623-.783Z" class="cls-4" data-v-b5f50804></path> <path d="M447.991,411.821c.057,.049-.64,.957-1.762,2.424-1.123,1.467-2.66,3.502-4.29,5.798-1.628,2.299-3.04,4.423-4.052,5.968-1.013,1.545-1.639,2.503-1.704,2.465-.059-.034,.455-1.06,1.391-2.659,.935-1.6,2.305-3.766,3.94-6.075,1.637-2.307,3.228-4.316,4.428-5.728,1.2-1.413,1.997-2.238,2.049-2.193Z" class="cls-4" data-v-b5f50804></path> <path d="M433.899,406.573c.074,.031-.278,.979-.77,2.53-.493,1.55-1.093,3.716-1.535,6.154-.437,2.44-.63,4.679-.709,6.304-.081,1.625-.081,2.636-.161,2.639-.064,.003-.193-1.005-.207-2.648-.015-1.641,.122-3.917,.565-6.388,.447-2.47,1.113-4.65,1.699-6.183,.586-1.535,1.059-2.435,1.118-2.409Z" class="cls-4" data-v-b5f50804></path> <path d="M349.714,385.398c.07-.03,.518,.882,1.248,2.347,.73,1.466,1.756,3.479,2.974,5.658,1.219,2.178,2.398,4.107,3.265,5.496,.867,1.389,1.408,2.248,1.347,2.292-.055,.04-.704-.745-1.653-2.089-.95-1.343-2.185-3.254-3.413-5.445-1.225-2.192-2.206-4.245-2.853-5.757-.648-1.512-.977-2.476-.914-2.502Z" class="cls-4" data-v-b5f50804></path> <path d="M356.267,382.22c.08-.003,.158,1.021,.364,2.659,.205,1.638,.573,3.89,1.205,6.324,.637,2.434,1.414,4.579,2.035,6.109,.619,1.531,1.051,2.462,.98,2.498-.056,.03-.605-.844-1.317-2.351-.713-1.505-1.557-3.659-2.201-6.125-.64-2.466-.955-4.757-1.067-6.419-.114-1.663-.061-2.694,.002-2.695Z" class="cls-4" data-v-b5f50804></path> <path d="M362.746,391.47c.144,.006,.164,2.185,.046,4.865-.118,2.681-.331,4.849-.474,4.843-.144-.006-.164-2.184-.046-4.866,.118-2.68,.331-4.849,.474-4.842Z" class="cls-4" data-v-b5f50804></path> <path d="M422.344,381.739c.035,.01-.058,.491-.254,1.351-.202,.859-.477,2.105-.796,3.648-.64,3.085-1.372,7.38-1.797,12.167-.417,4.789-.446,9.146-.354,12.296,.045,1.575,.099,2.85,.147,3.731,.043,.881,.05,1.371,.014,1.374-.036,.003-.111-.48-.216-1.358-.111-.877-.221-2.153-.313-3.732-.187-3.157-.217-7.541,.203-12.357,.427-4.813,1.221-9.124,1.956-12.2,.366-1.539,.697-2.775,.96-3.62,.257-.846,.415-1.309,.45-1.299Z" class="cls-4" data-v-b5f50804></path> <path d="M412.912,393.962c.075-.006,.214,1.051,.441,2.755,.227,1.704,.557,4.054,1.007,6.636,.452,2.582,.937,4.905,1.301,6.586,.363,1.68,.591,2.721,.518,2.742-.066,.018-.419-.99-.876-2.654-.457-1.664-1.002-3.988-1.456-6.583-.452-2.595-.726-4.966-.86-6.686-.134-1.721-.143-2.789-.075-2.794Z" class="cls-4" data-v-b5f50804></path></g></g> <g id="Windmill" data-v-b5f50804><g data-v-b5f50804><g data-v-b5f50804><polygon points="148.876 211.579 173.647 217.712 295 217.712 310.725 211.579 253.682 183.082 166.095 193.396 148.876 211.579" class="cls-5" data-v-b5f50804></polygon> <g class="cls-10" data-v-b5f50804><polygon points="148.876 211.579 173.647 217.712 295 217.712 310.725 211.579 253.682 183.082 166.095 193.396 148.876 211.579" data-v-b5f50804></polygon></g> <g data-v-b5f50804><path d="M128.858,443.115s25.449-130.215,33.932-172.63c8.483-42.415,13.573-66.734,13.573-66.734l53.638-28.277,63.994,31.67s26.672,206.161,36.852,236.56l-.092,5.758H128.858v-6.348Z" class="cls-6" data-v-b5f50804></path> <path d="M128.858,443.115s.015,.491,.022,1.529c.005,1.044,.012,2.628,.021,4.818l-.043-.043c20.224-.018,96.103-.087,201.897-.182l-.225,.222c.027-1.758,.058-3.753,.09-5.758l.012,.076c-2.171-7.044-3.606-14.414-5.099-21.912-1.463-7.505-2.819-15.179-4.144-22.994-2.657-15.63-5.187-31.831-7.7-48.492-5.02-33.324-9.949-68.498-14.854-104.792-1.719-12.958-3.42-25.775-5.096-38.409l.142,.199c-21.973-10.877-43.365-21.467-63.991-31.677l.228-.003c-18.559,9.779-36.489,19.226-53.644,28.265l.121-.161c-14.564,70.58-26.099,130.477-34.487,172.643-4.173,21.084-7.473,37.751-9.73,49.154-1.136,5.694-2.009,10.072-2.6,13.034-.298,1.473-.525,2.593-.678,3.351-.154,.752-.243,1.133-.243,1.133,0,0,.062-.384,.204-1.137,.145-.759,.358-1.88,.64-3.355,.574-2.963,1.422-7.345,2.526-13.042,2.226-11.408,5.481-28.083,9.598-49.176,8.307-42.181,19.782-102.114,34.306-172.702l.022-.109,.099-.052c17.151-9.047,35.077-18.502,53.631-28.289l.113-.06,.115,.057c20.628,10.206,42.022,20.79,63.998,31.663l.124,.061,.018,.138c1.677,12.633,3.378,25.449,5.098,38.406,4.905,36.292,9.827,71.465,14.836,104.787,2.507,16.66,5.03,32.86,7.678,48.486,1.321,7.814,2.672,15.485,4.129,22.985,1.486,7.487,2.92,14.866,5.069,21.857l.012,.04v.036c-.033,2.005-.066,4.001-.094,5.758l-.004,.222h-.222c-105.795-.096-181.673-.164-201.897-.182h-.044v-.043c.01-2.192,.017-3.777,.022-4.822,.007-1.038,.022-1.526,.022-1.526Z" class="cls-8" data-v-b5f50804></path></g> <path d="M198.993,198.477s0,.211-.024,.62c-.029,.428-.07,1.031-.124,1.816-.122,1.615-.299,3.963-.526,6.979-.46,6.061-1.19,14.826-2.149,25.651-1.919,21.65-4.883,51.534-8.871,84.458-4.001,32.934-8.269,62.663-11.582,84.144-1.657,10.741-3.043,19.425-4.046,25.419-.5,2.982-.89,5.305-1.158,6.902-.136,.775-.24,1.37-.314,1.793-.074,.403-.125,.608-.125,.608,0,0,.016-.21,.072-.617,.062-.424,.149-1.023,.263-1.801,.245-1.6,.603-3.928,1.061-6.917,.919-6.026,2.245-14.714,3.882-25.442,3.219-21.493,7.429-51.224,11.429-84.152,3.987-32.918,7.008-62.79,9.021-84.429,.976-10.809,1.766-19.563,2.314-25.634,.269-3.012,.479-5.358,.623-6.971,.076-.783,.134-1.385,.175-1.812,.042-.408,.077-.616,.077-.616Z" class="cls-8" data-v-b5f50804></path> <path d="M265.916,202.142s.034,.199,.074,.589c.039,.41,.095,.985,.167,1.732,.137,1.544,.335,3.786,.59,6.665,.505,5.808,1.233,14.179,2.132,24.514,1.831,20.696,4.45,49.281,7.983,80.783,3.546,31.512,7.423,59.956,10.447,80.511,1.517,10.277,2.772,18.59,3.671,24.329,.435,2.857,.775,5.082,1.008,6.613,.107,.743,.19,1.315,.249,1.722,.053,.388,.067,.59,.067,.59,0,0-.049-.195-.12-.581-.071-.405-.171-.974-.3-1.714-.256-1.528-.628-3.748-1.105-6.598-.96-5.73-2.271-14.035-3.835-24.307-3.118-20.544-7.054-48.988-10.601-80.507-3.534-31.509-6.095-60.103-7.832-80.809-.829-10.342-1.501-18.718-1.967-24.529-.213-2.882-.379-5.127-.493-6.673-.05-.749-.088-1.326-.115-1.736-.023-.391-.021-.593-.021-.593Z" class="cls-8" data-v-b5f50804></path> <g class="cls-10" data-v-b5f50804><polygon points="172.701 217.712 197.916 211.579 266.605 210.597 295.179 219.072 293.25 203.822 233.94 186.5 194.718 190.999 177.846 196.699 172.701 217.712" data-v-b5f50804></polygon></g> <g data-v-b5f50804><g class="cls-9" data-v-b5f50804><polygon points="172.701 217.712 197.916 211.579 266.605 210.597 295.179 219.072 293.25 203.822 233.94 186.5 194.718 190.999 177.846 196.699 172.701 217.712" data-v-b5f50804></polygon></g> <polygon points="148.876 211.579 231.044 122.243 310.725 211.579 262.847 200.65 195.713 201.17 148.876 211.579" class="cls-5" data-v-b5f50804></polygon> <path d="M264.04,200.397c-.008,.003-.074-.13-.194-.392-.127-.285-.301-.674-.523-1.172-.459-1.059-1.119-2.58-1.964-4.527-1.695-3.965-4.132-9.663-7.14-16.699-5.994-14.146-14.263-33.664-23.414-55.262l.478,.003c-.103,.237-.215,.493-.327,.751-9.446,21.689-17.975,41.336-24.453,55.421-3.227,7.048-5.901,12.722-7.792,16.623-.945,1.928-1.682,3.434-2.196,4.482-.249,.493-.443,.877-.585,1.159-.134,.26-.207,.391-.215,.387s.049-.143,.167-.41c.131-.288,.31-.679,.538-1.181,.493-1.058,1.201-2.578,2.107-4.524,1.835-3.926,4.456-9.623,7.64-16.688,6.391-14.12,14.864-33.786,24.311-55.477,.112-.257,.224-.514,.327-.751l.243-.557,.236,.56c9.095,21.621,17.315,41.16,23.272,55.322,2.944,7.063,5.329,12.783,6.988,16.763,.806,1.964,1.436,3.497,1.875,4.565,.202,.506,.36,.902,.475,1.192,.104,.27,.154,.409,.146,.413Z" class="cls-8" data-v-b5f50804></path> <path d="M156.057,203.771c-.002-.008,.069-.034,.21-.077,.168-.048,.374-.107,.628-.179,.592-.157,1.405-.374,2.437-.648,2.166-.554,5.246-1.342,9.07-2.321,7.754-1.939,18.517-4.629,30.734-7.683l.03-.008h.032c2.784-.001,5.693-.002,8.66-.003,14.649,.03,27.907,.057,37.551,.076,4.774,.035,8.652,.063,11.379,.083,1.313,.021,2.347,.037,3.094,.049,.329,.011,.593,.019,.805,.026,.181,.009,.274,.018,.274,.027s-.093,.018-.274,.027c-.211,.007-.476,.015-.805,.026-.746,.012-1.781,.028-3.094,.049-2.728,.02-6.605,.048-11.379,.083-9.644,.02-22.902,.047-37.551,.076-2.966-.001-5.876-.002-8.66-.004l.061-.007c-12.233,2.986-23.011,5.618-30.776,7.513-3.84,.915-6.932,1.652-9.108,2.17-1.041,.238-1.86,.425-2.458,.561-.258,.054-.468,.098-.639,.134-.144,.028-.219,.038-.221,.03Z" class="cls-8" data-v-b5f50804></path> <path d="M257.917,185.45c0,.144-12.175,.261-27.189,.261s-27.192-.117-27.192-.261,12.172-.26,27.192-.26,27.189,.117,27.189,.26Z" class="cls-8" data-v-b5f50804></path> <path d="M303.124,203.056c-.038,.139-9.666-2.353-21.503-5.564-11.841-3.213-21.407-5.928-21.369-6.067,.038-.139,9.664,2.352,21.505,5.565,11.837,3.211,21.405,5.928,21.367,6.067Z" class="cls-8" data-v-b5f50804></path> <path d="M294.196,193.047c-.038,.139-8.46-2.025-18.81-4.833-10.353-2.809-18.713-5.198-18.675-5.337,.038-.139,8.458,2.025,18.812,4.834,10.35,2.808,18.711,5.197,18.673,5.336Z" class="cls-8" data-v-b5f50804></path> <path d="M286.571,184.497c-.038,.139-7.491-1.763-16.646-4.246-9.158-2.485-16.549-4.611-16.511-4.749,.038-.139,7.49,1.762,16.648,4.247,9.155,2.484,16.548,4.61,16.51,4.749Z" class="cls-8" data-v-b5f50804></path> <path d="M279.455,176.519c-.038,.139-6.466-1.484-14.356-3.625-7.893-2.141-14.259-3.989-14.221-4.128,.038-.139,6.465,1.484,14.358,3.626,7.89,2.141,14.258,3.989,14.22,4.128Z" class="cls-8" data-v-b5f50804></path> <path d="M272.339,168.541c-.038,.139-5.441-1.206-12.067-3.004-6.628-1.798-11.969-3.368-11.931-3.507,.038-.139,5.439,1.206,12.068,3.004,6.626,1.797,11.968,3.368,11.93,3.506Z" class="cls-8" data-v-b5f50804></path> <path d="M265.672,160.837c-.038,.139-4.684-1.001-10.377-2.545-5.695-1.545-10.279-2.909-10.241-3.048,.038-.139,4.683,1.001,10.378,2.546,5.693,1.544,10.278,2.909,10.24,3.048Z" class="cls-8" data-v-b5f50804></path> <path d="M258.528,153.057c-.038,.139-3.689-.756-8.153-1.998-4.466-1.242-8.053-2.361-8.015-2.5,.038-.139,3.689,.756,8.154,1.998,4.464,1.242,8.052,2.361,8.014,2.5Z" class="cls-8" data-v-b5f50804></path> <path d="M253.413,146.848c-.038,.139-3.106-.573-6.851-1.589-3.747-1.017-6.753-1.953-6.716-2.092,.038-.139,3.105,.573,6.852,1.589,3.746,1.016,6.753,1.953,6.715,2.091Z" class="cls-8" data-v-b5f50804></path> <path d="M247.861,141.097c-.043,.137-2.376-.465-5.21-1.344-2.836-.88-5.099-1.704-5.057-1.842,.043-.137,2.375,.465,5.211,1.345,2.835,.88,5.099,1.704,5.056,1.842Z" class="cls-8" data-v-b5f50804></path> <path d="M242.893,135.385c-.038,.139-1.706-.193-3.725-.741-2.02-.548-3.627-1.105-3.589-1.244,.038-.139,1.705,.193,3.726,.741,2.02,.548,3.627,1.105,3.589,1.243Z" class="cls-8" data-v-b5f50804></path> <path d="M237.594,129.185c-.038,.139-1.002-.002-2.153-.314-1.152-.312-2.055-.678-2.017-.817,.038-.139,1.002,.002,2.154,.315,1.152,.312,2.055,.678,2.017,.817Z" class="cls-8" data-v-b5f50804></path> <path d="M164.856,194.205c-.039-.138,8.742-2.741,19.61-5.811,10.872-3.072,19.715-5.449,19.754-5.311s-8.74,2.74-19.612,5.812c-10.868,3.071-19.713,5.449-19.752,5.31Z" class="cls-8" data-v-b5f50804></path> <path d="M174.062,184.195c-.039-.138,7.545-2.403,16.938-5.056,9.396-2.655,17.042-4.694,17.081-4.556,.039,.138-7.544,2.402-16.94,5.057-9.393,2.654-17.04,4.694-17.079,4.555Z" class="cls-8" data-v-b5f50804></path> <path d="M182.397,175.072c-.04-.138,6.468-2.126,14.534-4.44,8.069-2.314,14.64-4.078,14.679-3.94,.04,.138-6.467,2.126-14.536,4.44-8.066,2.314-14.638,4.077-14.678,3.939Z" class="cls-8" data-v-b5f50804></path> <path d="M191.352,165.398c-.04-.138,5.321-1.797,11.972-3.705,6.653-1.908,12.077-3.343,12.116-3.204,.04,.138-5.32,1.797-11.973,3.705-6.651,1.908-12.076,3.342-12.115,3.204Z" class="cls-8" data-v-b5f50804></path> <path d="M200.692,155.243c-.037-.139,3.981-1.332,8.975-2.665,4.995-1.333,9.073-2.301,9.11-2.162,.037,.139-3.981,1.332-8.975,2.665-4.993,1.333-9.072,2.301-9.109,2.162Z" class="cls-8" data-v-b5f50804></path> <path d="M207.41,147.665c-.035-.14,3.092-1.037,6.983-2.004,3.892-.967,7.074-1.638,7.109-1.498,.035,.14-3.091,1.037-6.983,2.004-3.891,.967-7.074,1.638-7.108,1.498Z" class="cls-8" data-v-b5f50804></path> <path d="M213.809,141.097c-.04-.138,2.237-.913,5.085-1.729,2.849-.817,5.189-1.367,5.229-1.229,.04,.138-2.237,.912-5.085,1.729-2.848,.817-5.189,1.367-5.228,1.229Z" class="cls-8" data-v-b5f50804></path> <path d="M219.01,135.142c-.04-.138,1.569-.721,3.593-1.301,2.024-.581,3.697-.939,3.737-.801,.04,.138-1.569,.721-3.593,1.301-2.024,.58-3.697,.939-3.736,.801Z" class="cls-8" data-v-b5f50804></path> <path d="M224.58,128.92c-.04-.138,.749-.486,1.76-.776,1.012-.29,1.865-.414,1.904-.275,.04,.138-.748,.485-1.761,.776-1.012,.29-1.864,.414-1.904,.275Z" class="cls-8" data-v-b5f50804></path> <path d="M254.95,178.998c0,.144-10.873,.26-24.282,.26s-24.284-.117-24.284-.26,10.87-.26,24.284-.26,24.282,.117,24.282,.26Z" class="cls-8" data-v-b5f50804></path> <path d="M252.128,172.184c0,.144-9.658,.26-21.57,.26s-21.572-.117-21.572-.26,9.656-.26,21.572-.26,21.57,.117,21.57,.26Z" class="cls-8" data-v-b5f50804></path> <path d="M249.268,165.779c0,.144-8.409,.26-18.779,.26s-18.781-.117-18.781-.26,8.407-.26,18.781-.26,18.779,.117,18.779,.26Z" class="cls-8" data-v-b5f50804></path> <path d="M246.769,159.741c0,.144-7.223,.26-16.13,.26s-16.132-.117-16.132-.26,7.221-.26,16.132-.26,16.13,.117,16.13,.26Z" class="cls-8" data-v-b5f50804></path> <path d="M244.16,153.703c0,.144-6.012,.26-13.427,.26s-13.428-.117-13.428-.26,6.011-.26,13.428-.26,13.427,.117,13.427,.26Z" class="cls-8" data-v-b5f50804></path> <path d="M241.17,147.665c0,.144-4.716,.26-10.533,.26s-10.533-.117-10.533-.26,4.715-.26,10.533-.26,10.533,.117,10.533,.26Z" class="cls-8" data-v-b5f50804></path> <path d="M238.661,141.627c0,.144-3.528,.26-7.879,.26s-7.879-.117-7.879-.26,3.527-.26,7.879-.26,7.879,.117,7.879,.26Z" class="cls-8" data-v-b5f50804></path> <path d="M236.678,135.589c0,.144-2.457,.26-5.488,.26s-5.489-.117-5.489-.26,2.457-.26,5.489-.26,5.488,.117,5.488,.26Z" class="cls-8" data-v-b5f50804></path> <path d="M234.244,129.551c0,.144-1.456,.26-3.253,.26s-3.253-.117-3.253-.26,1.456-.26,3.253-.26,3.253,.117,3.253,.26Z" class="cls-8" data-v-b5f50804></path></g> <g class="cls-10" data-v-b5f50804><polygon points="143.213 365.9 179.374 376.883 285.024 376.883 316.401 368.744 313.944 353.517 145.656 352.093 143.213 365.9" data-v-b5f50804></polygon></g> <g data-v-b5f50804><g data-v-b5f50804><polygon points="310.518 329.755 279.489 334.86 185.412 333.588 151.511 328.613 109.897 353.435 180.503 368.744 283.377 368.744 350.6 353.367 310.518 329.755" class="cls-5" data-v-b5f50804></polygon> <path d="M185.248,332.574c.143,.019-.685,7.258-1.848,16.167-1.163,8.913-2.222,16.12-2.364,16.101-.142-.019,.684-7.256,1.848-16.169,1.163-8.909,2.221-16.118,2.364-16.1Z" class="cls-8" data-v-b5f50804></path> <path d="M279.504,333.329c-.003-.049,.077,.422,.19,1.208,.126,.902,.284,2.031,.471,3.372,.387,2.962,.895,6.845,1.456,11.139,.55,4.354,1.025,8.298,1.344,11.156,.14,1.348,.258,2.482,.352,3.388,.072,.801,.095,1.247,.059,1.251-.036,.005-.127-.432-.26-1.225-.138-.9-.311-2.028-.516-3.367-.413-2.846-.946-6.783-1.496-11.138-.549-4.353-1.011-8.299-1.305-11.161-.291-2.848-.431-4.668-.296-4.624Z" class="cls-8" data-v-b5f50804></path></g> <path d="M143.623,333.318s.256,.027,.747,.113c.514,.094,1.236,.225,2.166,.395,1.921,.365,4.696,.893,8.22,1.563,7.105,1.382,17.226,3.35,29.396,5.717l-.043-.004c13.201-.046,28.934-.1,45.787-.158,18.455-.031,35.566-.059,49.593-.082l-.031,.002c11.204-1.623,20.468-2.965,26.959-3.905,3.216-.451,5.743-.806,7.493-1.052,.844-.112,1.5-.198,1.969-.26,.445-.055,.677-.067,.677-.067,0,0-.225,.056-.668,.132-.467,.077-1.12,.184-1.96,.322-1.746,.273-4.268,.666-7.476,1.168-6.484,.984-15.74,2.388-26.932,4.086l-.015,.002h-.016c-14.026,.05-31.138,.11-49.592,.175-16.853,.029-32.586,.057-45.787,.079h-.022s-.021-.004-.021-.004c-12.155-2.442-22.264-4.473-29.36-5.899-3.514-.721-6.281-1.289-8.196-1.682-.924-.197-1.642-.35-2.153-.46-.486-.108-.734-.18-.734-.18Z" class="cls-8" data-v-b5f50804></path> <path d="M136.151,337.971c.001-.006,.076,.004,.223,.029,.165,.031,.379,.071,.652,.121,.596,.119,1.442,.289,2.535,.508,2.24,.465,5.484,1.138,9.602,1.992,8.285,1.751,20.079,4.243,34.208,7.229l-.048-.005c13.754-.045,29.946-.097,47.209-.153,18.765-.032,36.261-.063,50.9-.088l-.037,.003c13.207-2.266,24.18-4.149,31.876-5.47,3.822-.641,6.828-1.145,8.904-1.493,1.01-.162,1.792-.287,2.345-.376,.531-.081,.808-.106,.808-.106,0,0-.269,.07-.796,.174-.55,.104-1.329,.251-2.334,.441-2.071,.376-5.071,.92-8.883,1.612-7.688,1.365-18.65,3.31-31.844,5.652l-.018,.003h-.019c-14.64,.049-32.136,.106-50.9,.168-17.263,.031-33.454,.06-47.209,.085h-.025s-.023-.005-.023-.005c-14.113-3.061-25.893-5.617-34.169-7.412-4.106-.907-7.342-1.621-9.576-2.114-1.086-.248-1.927-.44-2.52-.575-.27-.065-.481-.117-.644-.156-.144-.037-.217-.059-.215-.065Z" class="cls-8" data-v-b5f50804></path> <path d="M128,342.859c.001-.006,.088,.007,.256,.039,.186,.037,.432,.087,.749,.151,.68,.145,1.653,.353,2.91,.622,2.565,.565,6.287,1.383,11.004,2.422,9.48,2.12,22.958,5.133,39.039,8.728l-.051-.006c14.261-.044,30.824-.095,48.41-.15,18.94-.034,36.691-.066,51.739-.093l-.046,.005c15.241-3.163,27.951-5.8,36.874-7.651,4.438-.905,7.934-1.618,10.342-2.109,1.178-.233,2.09-.413,2.729-.539,.296-.055,.526-.097,.701-.129,.158-.027,.238-.038,.24-.032,.001,.006-.077,.029-.232,.067-.174,.041-.401,.095-.694,.164-.635,.142-1.542,.344-2.715,.605-2.402,.52-5.889,1.274-10.316,2.231-8.914,1.896-21.611,4.596-36.836,7.835l-.022,.005h-.024c-15.047,.047-32.798,.103-51.738,.163-17.586,.032-34.149,.063-48.41,.089h-.026s-.025-.006-.025-.006c-16.064-3.671-29.528-6.747-38.998-8.912-4.705-1.092-8.418-1.953-10.976-2.547-1.25-.298-2.218-.529-2.894-.69-.313-.079-.556-.14-.741-.186-.166-.044-.249-.069-.248-.075Z" class="cls-8" data-v-b5f50804></path> <path d="M118.568,348.679c.001-.006,.102,.009,.298,.045,.213,.042,.501,.098,.872,.171,.787,.163,1.921,.398,3.388,.702,2.98,.635,7.308,1.556,12.785,2.722,10.994,2.375,26.595,5.746,45.103,9.744l-.051-.005c14.714-.102,31.478-.218,49.195-.34,19.185-.111,37.252-.216,52.805-.307l-.047,.005c17.568-3.794,32.289-6.974,42.639-9.209,5.154-1.097,9.219-1.962,12.016-2.557,1.375-.284,2.438-.504,3.177-.657,.348-.068,.616-.121,.817-.16,.184-.034,.278-.048,.279-.042,.001,.006-.09,.032-.271,.078-.199,.048-.465,.112-.809,.195-.735,.169-1.793,.412-3.162,.726-2.791,.624-6.846,1.531-11.989,2.682-10.34,2.28-25.047,5.523-42.599,9.393l-.023,.005h-.024c-15.553,.108-33.62,.234-52.805,.368-17.717,.104-34.481,.202-49.195,.288h-.026s-.025-.005-.025-.005c-18.492-4.074-34.078-7.508-45.062-9.928-5.465-1.221-9.784-2.186-12.757-2.851-1.46-.335-2.589-.593-3.373-.773-.368-.089-.653-.157-.865-.208-.193-.049-.291-.077-.29-.083Z" class="cls-8" data-v-b5f50804></path></g> <g data-v-b5f50804><g class="cls-10" data-v-b5f50804><path d="M224.567,288.404h14.24c2.921,0,5.292,2.371,5.292,5.292v25.232h-24.825v-25.233c0-2.921,2.371-5.292,5.292-5.292Z" data-v-b5f50804></path></g> <path d="M222.821,318.929h21.278v-25.628c0-.312-.033-.616-.084-.912-.27-.056-.546-.092-.831-.092h-15.902c-2.464,0-4.461,2.192-4.461,4.896v21.736Z" class="cls-8" data-v-b5f50804></path> <rect x="231.079" y="288.31" width="1.946" height="30.713" class="cls-6" data-v-b5f50804></rect> <rect x="219.155" y="299.36" width="24.945" height="1.911" class="cls-6" data-v-b5f50804></rect> <rect x="218.857" y="310.506" width="25.968" height="1.911" class="cls-6" data-v-b5f50804></rect></g> <g data-v-b5f50804><g class="cls-10" data-v-b5f50804><path d="M225.543,231.167h14.24c2.921,0,5.292,2.371,5.292,5.292v25.232h-24.825v-25.232c0-2.921,2.371-5.292,5.292-5.292Z" data-v-b5f50804></path></g> <path d="M223.797,261.691h21.278v-25.628c0-.312-.033-.616-.084-.912-.27-.056-.546-.092-.831-.092h-15.902c-2.464,0-4.461,2.192-4.461,4.896v21.736Z" class="cls-8" data-v-b5f50804></path> <rect x="232.055" y="231.073" width="1.946" height="30.712" class="cls-6" data-v-b5f50804></rect> <rect x="220.131" y="242.123" width="25.598" height="1.911" class="cls-6" data-v-b5f50804></rect> <rect x="219.833" y="253.268" width="25.674" height="1.911" class="cls-6" data-v-b5f50804></rect></g> <g data-v-b5f50804><g class="cls-10" data-v-b5f50804><path d="M296.207,284.596h-15.72l-2.811-21.666c-.351-2.704,.879-4.896,2.747-4.896h8.158c1.868,0,3.732,2.192,4.165,4.896l3.462,21.666Z" data-v-b5f50804></path></g> <path d="M282.732,284.596h13.475l-3.564-22.302c-.043-.272-.105-.536-.177-.794-.171-.049-.343-.08-.516-.08h-9.624c-1.491,0-2.444,1.908-2.129,4.261l2.535,18.915Z" class="cls-8" data-v-b5f50804></path> <polygon points="289.206 284.677 287.973 284.677 284.124 257.951 285.294 257.951 289.206 284.677" class="cls-6" data-v-b5f50804></polygon> <polygon points="293.752 269.23 278.419 269.23 278.204 267.567 293.486 267.567 293.752 269.23" class="cls-6" data-v-b5f50804></polygon> <polygon points="295.302 278.929 279.49 278.929 279.275 277.266 295.036 277.266 295.302 278.929" class="cls-6" data-v-b5f50804></polygon></g> <g data-v-b5f50804><g class="cls-10" data-v-b5f50804><path d="M165.947,284.035h15.72l2.811-21.666c.351-2.704-.879-4.896-2.747-4.896h-8.158c-1.868,0-3.732,2.192-4.165,4.896l-3.462,21.666Z" data-v-b5f50804></path></g> <path d="M179.421,284.035h-13.475l3.564-22.302c.043-.272,.105-.536,.177-.794,.171-.049,.343-.08,.516-.08h9.624c1.491,0,2.444,1.908,2.129,4.261l-2.535,18.915Z" class="cls-8" data-v-b5f50804></path> <polygon points="172.948 284.116 174.181 284.116 178.03 257.39 176.86 257.39 172.948 284.116" class="cls-6" data-v-b5f50804></polygon> <polygon points="168.402 268.669 183.735 268.669 183.95 267.006 168.668 267.006 168.402 268.669" class="cls-6" data-v-b5f50804></polygon> <polygon points="166.852 278.368 182.664 278.368 182.879 276.705 167.118 276.705 166.852 278.368" class="cls-6" data-v-b5f50804></polygon></g> <rect x="121.921" y="443.705" width="213.7" height="11.517" class="cls-6" data-v-b5f50804></rect> <g data-v-b5f50804><rect x="215.154" y="402.572" width="30.588" height="52.369" rx="2.348" ry="2.348" class="cls-8" data-v-b5f50804></rect> <rect x="216.756" y="404.173" width="27.452" height="50.616" class="cls-5" data-v-b5f50804></rect> <path d="M223.716,454.789c-.144,0-.261-11.275-.261-25.179s.117-25.182,.261-25.182,.26,11.272,.26,25.182-.117,25.179-.26,25.179Z" class="cls-8" data-v-b5f50804></path> <path d="M230.763,454.789c-.144,0-.26-11.275-.26-25.179s.117-25.182,.26-25.182,.26,11.272,.26,25.182-.117,25.179-.26,25.179Z" class="cls-8" data-v-b5f50804></path> <path d="M237.81,454.789c-.144,0-.26-11.275-.26-25.179s.117-25.182,.26-25.182,.26,11.272,.26,25.182-.117,25.179-.26,25.179Z" class="cls-8" data-v-b5f50804></path> <g data-v-b5f50804><rect x="216.756" y="408.332" width="27.452" height="4.239" class="cls-5" data-v-b5f50804></rect> <path d="M244.208,412.571c-.016-.016-.033-.407-.056-1.129-.018-.769-.042-1.803-.072-3.11l.128,.128c-5.328,.079-15.635,.132-27.451,.132h-.001c-.057,.056,.493-.493,.26-.26v.27s0,.271,0,.271v.541c0,.36,0,.717,0,1.071,0,.709-.001,1.406-.002,2.085l-.258-.258c7.707,.007,14.526,.061,19.455,.113,2.425,.031,4.395,.057,5.829,.075,.649,.014,1.176,.026,1.592,.035,.367,.012,.565,.023,.577,.035,.012,.012-.163,.023-.509,.034-.401,.009-.909,.021-1.535,.035-1.418,.019-3.369,.044-5.769,.076-4.916,.052-11.824,.105-19.639,.113h-.258s0-.258,0-.258c0-.679-.001-1.376-.002-2.085,0-.354,0-.712,0-1.071v-.541s0-.271,0-.271v-.27c-.233,.232,.317-.318,.261-.261h.001c11.816,0,22.123,.053,27.451,.132l.131,.002-.003,.127c-.03,1.339-.054,2.398-.072,3.185-.023,.712-.04,1.07-.056,1.054Z" class="cls-8" data-v-b5f50804></path></g> <g data-v-b5f50804><rect x="216.756" y="444.341" width="27.452" height="4.239" class="cls-5" data-v-b5f50804></rect> <path d="M244.208,448.58c-.016-.016-.033-.407-.056-1.129-.018-.769-.042-1.803-.072-3.11l.128,.128c-5.328,.079-15.635,.132-27.451,.132h-.001c-.057,.056,.493-.493,.26-.26v.27s0,.271,0,.271v.541c0,.359,0,.717,0,1.071,0,.709-.001,1.406-.002,2.085l-.258-.258c7.707,.007,14.526,.061,19.455,.113,2.425,.031,4.395,.057,5.829,.075,.649,.014,1.176,.026,1.592,.035,.367,.012,.565,.023,.577,.035,.012,.012-.163,.023-.509,.035-.401,.009-.909,.021-1.535,.035-1.418,.019-3.369,.044-5.769,.076-4.916,.052-11.824,.105-19.639,.113h-.258s0-.258,0-.258c0-.679-.001-1.376-.002-2.085,0-.354,0-.712,0-1.071v-.541s0-.271,0-.271v-.27c-.233,.232,.317-.318,.261-.261h.001c11.816,0,22.123,.053,27.451,.132l.131,.002-.003,.127c-.03,1.339-.054,2.398-.072,3.185-.023,.712-.04,1.07-.056,1.053Z" class="cls-8" data-v-b5f50804></path></g></g> <g class="cls-9" data-v-b5f50804><polygon points="192.852 453.171 191.139 448.133 197.084 438.761 207.665 438.761 209.964 450.551 208.565 453.415 192.852 453.171" data-v-b5f50804></polygon></g> <g class="cls-9" data-v-b5f50804><polygon points="187.927 446.461 195.942 437.87 190.599 432.75 182.139 434.642 180.024 441.655 187.927 446.461" data-v-b5f50804></polygon></g> <g class="cls-9" data-v-b5f50804><polygon points="194.05 431.525 198.169 436.201 207.297 436.201 210.637 430.635 207.074 424.178 197.39 424.178 194.05 431.525" data-v-b5f50804></polygon></g> <g class="cls-9" data-v-b5f50804><polygon points="187.882 449.06 179.15 445.094 174.399 448.58 176.044 453.415 187.388 453.415 187.882 449.06" data-v-b5f50804></polygon></g> <g class="cls-9" data-v-b5f50804><polygon points="174.399 453.665 172.724 449.482 165.69 444.844 157.204 448.658 155.306 453.665 174.399 453.665" data-v-b5f50804></polygon></g> <g class="cls-9" data-v-b5f50804><polygon points="167.352 432.272 158.176 429.481 149.332 434.151 149.332 443.705 156.075 446.461 156.624 446.298 165.362 443.705 168.457 437.247 167.352 432.272" data-v-b5f50804></polygon></g> <g class="cls-9" data-v-b5f50804><polygon points="155.752 448.189 149.332 445.688 143.25 448.871 143.78 452.886 152.569 453.415 155.752 448.189" data-v-b5f50804></polygon></g> <g class="cls-9" data-v-b5f50804><polygon points="168.234 443.422 172.739 446.461 177.88 443.856 179.495 437.971 172.886 435.686 169.85 438.477 168.234 443.422" data-v-b5f50804></polygon></g> <g class="cls-1" data-v-b5f50804><polygon points="186.906 420.025 193.411 423.038 197.455 420.28 198.167 414.574 191.139 411.109 187.381 413.749 186.906 420.025" data-v-b5f50804></polygon></g> <g class="cls-1" data-v-b5f50804><polygon points="269.364 430.854 276.313 428.699 277.484 423.871 274.14 419.088 266.488 421.258 265.452 425.803 269.364 430.854" data-v-b5f50804></polygon></g> <g class="cls-9" data-v-b5f50804><polygon points="141.332 452.931 141.332 448.746 137.147 446.461 131.244 447.401 130.273 452.931 141.332 452.931" data-v-b5f50804></polygon></g> <g class="cls-9" data-v-b5f50804><polygon points="265.27 453.011 266.983 447.972 261.038 438.601 250.457 438.601 248.157 450.391 249.557 453.255 265.27 453.011" data-v-b5f50804></polygon></g> <g class="cls-9" data-v-b5f50804><polygon points="270.195 446.3 262.18 437.71 267.523 432.589 275.983 434.482 278.098 441.495 270.195 446.3" data-v-b5f50804></polygon></g> <g class="cls-9" data-v-b5f50804><polygon points="264.072 431.365 259.953 436.04 250.825 436.04 247.485 430.474 251.048 424.018 260.732 424.018 264.072 431.365" data-v-b5f50804></polygon></g> <g class="cls-9" data-v-b5f50804><polygon points="270.24 448.9 278.972 444.933 283.723 448.42 282.078 453.255 270.734 453.255 270.24 448.9" data-v-b5f50804></polygon></g> <g class="cls-9" data-v-b5f50804><polygon points="283.723 453.504 285.398 449.322 292.432 444.684 300.918 448.498 302.816 453.504 283.723 453.504" data-v-b5f50804></polygon></g> <g class="cls-9" data-v-b5f50804><polygon points="290.77 432.111 299.946 429.321 308.79 433.991 308.79 443.544 302.047 446.3 301.498 446.137 292.76 443.544 289.665 437.086 290.77 432.111" data-v-b5f50804></polygon></g> <g class="cls-9" data-v-b5f50804><polygon points="247.325 313.019 254.817 310.74 262.039 314.553 262.039 322.354 256.533 324.605 256.085 324.472 248.95 322.354 246.422 317.081 247.325 313.019" data-v-b5f50804></polygon></g> <g class="cls-9" data-v-b5f50804><polygon points="302.37 448.028 308.79 445.528 314.872 448.71 314.342 452.726 305.553 453.255 302.37 448.028" data-v-b5f50804></polygon></g> <g class="cls-9" data-v-b5f50804><polygon points="289.888 443.261 285.383 446.3 280.242 443.696 278.627 437.811 285.236 435.525 288.272 438.316 289.888 443.261" data-v-b5f50804></polygon></g> <g class="cls-9" data-v-b5f50804><polygon points="315.744 446.717 309.915 444.027 310.662 439.445 317.836 440.291 318.733 444.684 315.744 446.717" data-v-b5f50804></polygon></g> <g class="cls-9" data-v-b5f50804><polygon points="316.79 452.77 316.79 448.586 320.975 446.3 326.878 447.24 327.849 452.77 316.79 452.77" data-v-b5f50804></polygon></g> <g class="cls-9" data-v-b5f50804><polygon points="238.359 400.73 236.569 397.235 239.126 392.462 243.389 391.78 246.969 395.445 245.903 398.977 243.864 400.673 238.359 400.73" data-v-b5f50804></polygon></g> <g class="cls-1" data-v-b5f50804><polygon points="237.81 391.925 241.769 389.615 241.769 384.631 233.943 382.752 230.305 386.717 232.224 391.342 237.81 391.925" data-v-b5f50804></polygon></g> <g class="cls-9" data-v-b5f50804><path d="M247.678,310.74c.41-.065,5.873-1.567,5.873-1.567l1.229-4.507-5.19-5.306-3.168,.956v5.989l1.256,4.435Z" data-v-b5f50804></path></g> <g class="cls-9" data-v-b5f50804><polygon points="216.135 301.272 209.938 303.159 207.395 299.622 207.948 292.989 212.591 290.225 218.28 292.144 218.28 296.651 216.135 301.272" data-v-b5f50804></polygon></g> <g class="cls-1" data-v-b5f50804><polygon points="218.28 290.714 214.638 288.404 214.339 284.035 219.155 282.213 222.3 285.745 221.462 287.96 218.28 290.714" data-v-b5f50804></polygon></g> <g class="cls-1" data-v-b5f50804><polygon points="251.969 262.327 247.123 259.254 246.725 253.441 253.132 251.019 257.317 255.717 256.202 258.664 251.969 262.327" data-v-b5f50804></polygon></g> <g class="cls-9" data-v-b5f50804><polygon points="247.453 251.626 252.021 249.694 249.737 246.429 247.453 246.842 246.725 249.028 247.453 251.626" data-v-b5f50804></polygon></g> <g class="cls-9" data-v-b5f50804><polygon points="194.97 259.587 200.341 264.575 201.876 273.973 197.08 278.929 192.669 280.303 194.97 259.587" data-v-b5f50804></polygon></g> <g class="cls-9" data-v-b5f50804><polygon points="196.393 258.598 200.47 261.691 205.414 260.144 207.395 254.608 201.876 251.626 197.272 252.786 196.393 258.598" data-v-b5f50804></polygon></g> <g class="cls-1" data-v-b5f50804><polygon points="205.763 261.785 201.894 263.063 201.399 265.451 202.798 270.391 207.904 269.403 209.797 264.38 205.763 261.785" data-v-b5f50804></polygon></g> <g class="cls-9" data-v-b5f50804><polygon points="274.745 235.059 271.884 239.64 275.242 244.988 283.078 242.123 283.078 238.023 274.745 235.059" data-v-b5f50804></polygon></g> <g class="cls-1" data-v-b5f50804><polygon points="278.204 247.102 283.078 244.034 285.978 244.988 288.799 249.028 284.819 252.699 279.11 251.626 278.204 247.102" data-v-b5f50804></polygon></g> <g class="cls-9" data-v-b5f50804><polygon points="284.723 239.235 284.124 241.712 285.978 243.079 288.799 242.123 288.172 238.854 284.723 239.235" data-v-b5f50804></polygon></g> <g class="cls-9" data-v-b5f50804><polygon points="245.146 386.093 244.547 388.569 246.401 389.937 249.222 388.981 248.595 385.712 245.146 386.093" data-v-b5f50804></polygon></g> <g class="cls-9" data-v-b5f50804><path d="M155.976,309.695c.389,0,4.278-1.556,4.278-1.556l5.057,7.001-3.76,6.223-5.575-.519-1.297-5.445,1.297-5.705Z" data-v-b5f50804></path></g> <g class="cls-1" data-v-b5f50804><polygon points="162.367 308.139 165.311 313.278 170.074 311.747 171.01 307.918 168.549 304.69 163.954 304.417 162.367 308.139" data-v-b5f50804></polygon></g> <g class="cls-9" data-v-b5f50804><polygon points="164.434 321.689 166.689 316.235 171.01 315.13 173.647 318.409 173.057 323.163 167.825 324.121 164.434 321.689" data-v-b5f50804></polygon></g> <g class="cls-1" data-v-b5f50804><polygon points="311.105 437.811 310.509 433.923 314.324 432.589 316.79 436.04 314.872 437.811 311.105 437.811" data-v-b5f50804></polygon></g> <g class="cls-1" data-v-b5f50804><polygon points="155.497 384.163 150.894 391.868 155.497 399.396 166.915 396.622 164.853 385.831 155.497 384.163" data-v-b5f50804></polygon></g> <g class="cls-9" data-v-b5f50804><polygon points="150.894 398.169 153.797 400.528 152.765 403.844 148.049 402.886 148.343 399.396 150.894 398.169" data-v-b5f50804></polygon></g></g> <g id="blades" data-v-b5f50804><g data-v-b5f50804><g data-v-b5f50804><polygon points="54.68 38.815 189.856 173.943 219.614 144.037 97.231 0 90.767 5.493 211.459 143.26 190.256 165.648 59.666 33.829 54.68 38.815" class="cls-7" data-v-b5f50804></polygon> <path d="M94.891,7.474c-.528,0-33.243,31.484-33.243,31.484l5.277,4.925L100.343,12.223l-5.453-4.749Z" class="cls-7" data-v-b5f50804></path> <path d="M109.596,22.713c-.528,0-33.243,31.484-33.243,31.484l5.277,4.925,33.419-31.66-5.453-4.749Z" class="cls-7" data-v-b5f50804></path> <path d="M125.236,40.12c-.528,0-33.243,31.484-33.243,31.484l5.277,4.925,33.419-31.66-5.453-4.749Z" class="cls-7" data-v-b5f50804></path> <path d="M139.625,58.325c-.528,0-33.243,31.484-33.243,31.484l5.277,4.925,33.419-31.66-5.453-4.749Z" class="cls-7" data-v-b5f50804></path> <path d="M158.973,76.529c-.528,0-33.243,31.484-33.243,31.484l5.277,4.925,33.419-31.66-5.452-4.749Z" class="cls-7" data-v-b5f50804></path> <path d="M176.796,95.267c-.503,0-31.718,30.342-31.718,30.342l5.035,4.746,30.784-29.457-4.101-5.631Z" class="cls-7" data-v-b5f50804></path> <path d="M190.853,112.811c-.503,0-31.718,30.342-31.718,30.342l5.035,4.746,30.784-29.457-4.101-5.631Z" class="cls-7" data-v-b5f50804></path> <path d="M204.6,127.958c-.481,0-30.278,29.314-30.278,29.314l4.806,4.585,29.387-28.459-3.915-5.44Z" class="cls-7" data-v-b5f50804></path> <polygon points="72.479 22.713 217.088 176.45 222.425 172.054 80.124 15.587 72.479 22.713" class="cls-7" data-v-b5f50804></polygon></g> <path d="M190.256,165.648c-.102,.101-29.421-29.328-65.477-65.723C88.711,63.517,59.564,33.931,59.666,33.829c.102-.101,29.415,29.321,65.483,65.729,36.056,36.395,65.209,65.988,65.107,66.089Z" class="cls-8" data-v-b5f50804></path> <path d="M208.993,167.844c-.105,.099-30.752-32.313-68.443-72.384C102.845,55.375,72.375,22.811,72.479,22.712c.105-.099,30.745,32.306,68.45,72.391,37.691,40.071,68.169,72.642,68.064,72.741Z" class="cls-8" data-v-b5f50804></path> <path d="M214.419,163.251c-.106,.097-30.275-32.983-67.374-73.876C109.932,48.468,79.943,15.239,80.05,15.142s30.268,32.976,67.381,73.883c37.1,40.893,67.095,74.129,66.989,74.226Z" class="cls-8" data-v-b5f50804></path> <path d="M211.459,143.26c-.108,.095-27.216-30.671-60.539-68.709C117.585,36.501,90.659,5.588,90.767,5.493c.108-.095,27.21,30.664,60.545,68.715,33.323,38.038,60.255,68.957,60.147,69.052Z" class="cls-8" data-v-b5f50804></path></g> <g data-v-b5f50804><g data-v-b5f50804><polygon points="368.51 3.946 239.17 144.67 270.297 173.147 409.076 44.832 403.316 38.604 270.732 164.967 247.474 144.722 373.7 8.718 368.51 3.946" class="cls-7" data-v-b5f50804></polygon> <path d="M401.51,42.807c-.022-.527-32.851-31.893-32.851-31.893l-4.699,5.479,33.034,32.062,4.516-5.647Z" class="cls-7" data-v-b5f50804></path> <path d="M386.902,58.138c-.022-.527-32.85-31.893-32.85-31.893l-4.699,5.479,33.034,32.062,4.516-5.647Z" class="cls-7" data-v-b5f50804></path> <path d="M370.165,74.494c-.022-.527-32.851-31.893-32.851-31.893l-4.699,5.479,33.034,32.062,4.516-5.647Z" class="cls-7" data-v-b5f50804></path> <path d="M352.58,89.635c-.022-.527-32.85-31.893-32.85-31.893l-4.699,5.478,33.034,32.062,4.516-5.647Z" class="cls-7" data-v-b5f50804></path> <path d="M335.203,109.729c-.022-.527-32.85-31.893-32.85-31.893l-4.699,5.479,33.034,32.062,4.516-5.647Z" class="cls-7" data-v-b5f50804></path> <path d="M317.23,128.322c-.021-.503-31.645-30.418-31.645-30.418l-4.531,5.229,30.722,29.522,5.454-4.333Z" class="cls-7" data-v-b5f50804></path> <path d="M300.29,143.103c-.021-.503-31.645-30.418-31.645-30.418l-4.531,5.229,30.722,29.522,5.454-4.333Z" class="cls-7" data-v-b5f50804></path> <path d="M285.733,157.473c-.02-.48-30.558-29.022-30.558-29.022l-4.38,4.994,29.667,28.167,5.271-4.139Z" class="cls-7" data-v-b5f50804></path> <polygon points="385.345 21.054 237.808 171.983 242.423 177.131 392.785 28.394 385.345 21.054" class="cls-7" data-v-b5f50804></polygon></g> <path d="M247.474,144.722c-.105-.098,28.068-30.625,62.919-68.176,34.863-37.564,63.201-67.926,63.307-67.828s-28.062,30.618-62.925,68.182c-34.851,37.551-63.195,67.919-63.301,67.822Z" class="cls-8" data-v-b5f50804></path> <path d="M246.066,163.535c-.103-.1,30.995-32.08,69.45-71.419,38.468-39.353,69.726-71.162,69.829-71.062,.103,.101-30.988,32.073-69.457,71.426-38.455,39.339-69.719,71.155-69.822,71.055Z" class="cls-8" data-v-b5f50804></path> <path d="M250.883,168.763c-.101-.102,31.684-31.632,70.985-70.413,39.315-38.795,71.257-70.152,71.358-70.049,.101,.102-31.677,31.625-70.992,70.42-39.301,38.782-71.25,70.145-71.351,70.043Z" class="cls-8" data-v-b5f50804></path> <path d="M270.732,164.967c-.099-.104,29.503-28.478,66.109-63.367,36.619-34.901,66.376-63.1,66.475-62.996,.099,.104-29.496,28.472-66.116,63.373-36.607,34.889-66.37,63.094-66.469,62.99Z" class="cls-8" data-v-b5f50804></path></g> <g data-v-b5f50804><g data-v-b5f50804><polygon points="404.921 326.939 269.745 191.81 239.987 221.717 362.37 365.754 368.834 360.261 248.142 222.494 269.345 200.106 399.935 331.924 404.921 326.939" class="cls-7" data-v-b5f50804></polygon> <path d="M364.71,358.28c.528,0,33.243-31.484,33.243-31.484l-5.277-4.925-33.419,31.66,5.452,4.749Z" class="cls-7" data-v-b5f50804></path> <path d="M350.005,343.041c.528,0,33.243-31.484,33.243-31.484l-5.277-4.925-33.419,31.66,5.452,4.749Z" class="cls-7" data-v-b5f50804></path> <path d="M334.365,325.633c.528,0,33.243-31.484,33.243-31.484l-5.277-4.925-33.419,31.66,5.452,4.749Z" class="cls-7" data-v-b5f50804></path> <path d="M319.976,307.429c.528,0,33.243-31.484,33.243-31.484l-5.277-4.925-33.419,31.66,5.452,4.749Z" class="cls-7" data-v-b5f50804></path> <path d="M300.628,289.224c.528,0,33.243-31.484,33.243-31.484l-5.277-4.925-33.419,31.66,5.453,4.749Z" class="cls-7" data-v-b5f50804></path> <path d="M282.805,270.487c.504,0,31.718-30.342,31.718-30.342l-5.035-4.746-30.784,29.457,4.101,5.631Z" class="cls-7" data-v-b5f50804></path> <path d="M268.748,252.943c.503,0,31.718-30.342,31.718-30.342l-5.035-4.746-30.784,29.457,4.101,5.631Z" class="cls-7" data-v-b5f50804></path> <path d="M255.001,237.796c.481,0,30.278-29.314,30.278-29.314l-4.806-4.586-29.387,28.459,3.914,5.44Z" class="cls-7" data-v-b5f50804></path> <polygon points="387.122 343.041 242.513 189.304 237.176 193.7 379.477 350.167 387.122 343.041" class="cls-7" data-v-b5f50804></polygon></g> <path d="M269.345,200.106c.102-.101,29.421,29.328,65.477,65.723,36.069,36.408,65.216,65.994,65.113,66.096-.102,.101-29.415-29.321-65.483-65.729-36.056-36.395-65.209-65.988-65.107-66.089Z" class="cls-8" data-v-b5f50804></path> <path d="M250.608,197.91c.105-.099,30.752,32.313,68.443,72.384,37.705,40.085,68.175,72.649,68.07,72.748-.105,.099-30.745-32.306-68.45-72.391-37.692-40.071-68.169-72.642-68.064-72.741Z" class="cls-8" data-v-b5f50804></path> <path d="M245.182,202.503c.106-.097,30.275,32.983,67.374,73.876,37.112,40.907,67.102,74.136,66.995,74.233-.107,.097-30.269-32.976-67.381-73.883-37.099-40.893-67.095-74.129-66.989-74.226Z" class="cls-8" data-v-b5f50804></path> <path d="M248.142,222.494c.108-.095,27.216,30.671,60.539,68.709,33.335,38.051,60.261,68.964,60.153,69.059-.108,.095-27.21-30.665-60.545-68.715-33.323-38.038-60.255-68.957-60.147-69.052Z" class="cls-8" data-v-b5f50804></path></g> <g data-v-b5f50804><g data-v-b5f50804><polygon points="91.091 361.807 220.431 221.084 189.304 192.606 50.526 320.922 56.285 327.15 188.869 200.786 212.127 221.032 85.901 357.035 91.091 361.807" class="cls-7" data-v-b5f50804></polygon> <path d="M58.091,322.947c.022,.527,32.851,31.893,32.851,31.893l4.699-5.478-33.034-32.062-4.516,5.647Z" class="cls-7" data-v-b5f50804></path> <path d="M72.7,307.616c.022,.527,32.851,31.893,32.851,31.893l4.699-5.479-33.034-32.062-4.516,5.647Z" class="cls-7" data-v-b5f50804></path> <path d="M89.436,291.259c.022,.527,32.85,31.893,32.85,31.893l4.699-5.479-33.034-32.062-4.516,5.647Z" class="cls-7" data-v-b5f50804></path> <path d="M107.021,276.119c.022,.527,32.851,31.893,32.851,31.893l4.699-5.479-33.034-32.062-4.516,5.647Z" class="cls-7" data-v-b5f50804></path> <path d="M124.398,256.025c.022,.527,32.851,31.893,32.851,31.893l4.699-5.479-33.034-32.062-4.516,5.647Z" class="cls-7" data-v-b5f50804></path> <path d="M142.372,237.432c.021,.503,31.645,30.418,31.645,30.418l4.531-5.229-30.722-29.522-5.454,4.333Z" class="cls-7" data-v-b5f50804></path> <path d="M159.311,222.651c.021,.503,31.645,30.418,31.645,30.418l4.531-5.229-30.722-29.522-5.454,4.333Z" class="cls-7" data-v-b5f50804></path> <path d="M173.868,208.281c.02,.48,30.558,29.022,30.558,29.022l4.38-4.994-29.667-28.167-5.271,4.139Z" class="cls-7" data-v-b5f50804></path> <polygon points="74.256 344.699 221.794 193.771 217.178 188.622 66.816 337.36 74.256 344.699" class="cls-7" data-v-b5f50804></polygon></g> <path d="M212.127,221.032c.105,.098-28.068,30.625-62.919,68.176-34.863,37.564-63.201,67.926-63.307,67.828-.105-.098,28.062-30.618,62.925-68.182,34.851-37.551,63.195-67.919,63.301-67.821Z" class="cls-8" data-v-b5f50804></path> <path d="M213.535,202.219c.103,.101-30.995,32.08-69.45,71.419-38.468,39.353-69.726,71.162-69.829,71.061-.103-.1,30.988-32.073,69.456-71.425,38.455-39.339,69.719-71.155,69.822-71.055Z" class="cls-8" data-v-b5f50804></path> <path d="M208.718,196.99c.101,.102-31.684,31.632-70.985,70.413-39.315,38.795-71.257,70.152-71.358,70.049-.101-.102,31.677-31.625,70.992-70.42,39.301-38.782,71.25-70.145,71.351-70.043Z" class="cls-8" data-v-b5f50804></path> <path d="M188.869,200.786c.099,.104-29.503,28.478-66.109,63.367-36.619,34.901-66.376,63.1-66.475,62.996-.099-.104,29.496-28.472,66.116-63.373,36.607-34.889,66.369-63.094,66.469-62.99Z" class="cls-8" data-v-b5f50804></path></g> <g data-v-b5f50804><circle cx="229.421" cy="183.23" r="15.386" transform="translate(11.961 380.507) rotate(-80.827)" class="cls-7" data-v-b5f50804></circle> <path d="M244.808,183.23c-.084,.008,.016-1.372-.58-3.732-.279-1.181-.841-2.575-1.72-4.051-.886-1.469-2.16-3.002-3.889-4.301-1.723-1.287-3.894-2.379-6.398-2.818-2.486-.423-5.291-.342-7.959,.676-1.343,.468-2.639,1.174-3.829,2.065-1.204,.874-2.296,1.959-3.197,3.216-1.861,2.477-2.91,5.661-2.941,8.941,.029,3.282,1.078,6.467,2.94,8.944,.901,1.258,1.994,2.343,3.197,3.217,1.19,.892,2.486,1.598,3.829,2.066,2.669,1.018,5.474,1.098,7.96,.676,2.503-.439,4.674-1.531,6.398-2.818,1.729-1.299,3.002-2.832,3.888-4.301,.879-1.476,1.441-2.869,1.72-4.05,.596-2.359,.495-3.739,.579-3.732,.009,0,.014,.085,.014,.25-.003,.196-.007,.438-.011,.734,0,.324-.017,.723-.096,1.191-.062,.469-.122,1.013-.29,1.606-.253,1.204-.795,2.632-1.666,4.15-.879,1.512-2.159,3.096-3.915,4.445-1.75,1.337-3.97,2.479-6.542,2.95-2.554,.454-5.443,.387-8.203-.649-1.388-.477-2.729-1.201-3.961-2.117-1.246-.899-2.378-2.017-3.313-3.315-1.929-2.557-3.021-5.853-3.049-9.247,.03-3.392,1.121-6.688,3.05-9.243,.934-1.297,2.066-2.415,3.312-3.314,1.232-.916,2.573-1.64,3.961-2.117,2.76-1.036,5.649-1.104,8.202-.649,2.571,.47,4.791,1.612,6.542,2.949,1.756,1.349,3.036,2.933,3.915,4.445,.872,1.518,1.414,2.946,1.667,4.15,.168,.593,.228,1.138,.29,1.607,.078,.467,.096,.867,.096,1.191,.004,.297,.008,.538,.011,.734,0,.165-.005,.25-.014,.25Z" class="cls-8" data-v-b5f50804></path></g> <g data-v-b5f50804><circle cx="229.422" cy="183.23" r="9.674" transform="translate(-1.441 364.642) rotate(-76.773)" class="cls-7" data-v-b5f50804></circle> <path d="M239.096,183.23c-.066,.005-.016-.862-.401-2.337-.381-1.447-1.354-3.569-3.532-5.206-1.079-.8-2.435-1.477-3.996-1.747-1.551-.26-3.298-.206-4.959,.43-.836,.292-1.642,.733-2.383,1.289-.749,.545-1.429,1.221-1.989,2.004-1.158,1.543-1.809,3.524-1.829,5.566,.019,2.043,.67,4.024,1.828,5.568,.56,.783,1.24,1.46,1.989,2.005,.74,.556,1.547,.997,2.383,1.289,1.661,.636,3.409,.69,4.96,.43,1.561-.27,2.917-.948,3.996-1.748,2.177-1.637,3.151-3.76,3.531-5.206,.385-1.475,.335-2.342,.401-2.337,0,0,.127,.864-.204,2.387-.328,1.491-1.273,3.709-3.504,5.449-1.105,.85-2.51,1.578-4.14,1.879-1.618,.292-3.45,.252-5.203-.403-.881-.302-1.733-.76-2.515-1.341-.791-.57-1.51-1.279-2.104-2.102-1.225-1.622-1.92-3.716-1.938-5.87,.019-2.154,.713-4.246,1.938-5.868,.594-.823,1.313-1.532,2.104-2.102,.782-.581,1.634-1.039,2.515-1.34,1.752-.655,3.584-.695,5.202-.403,1.629,.301,3.034,1.029,4.14,1.879,2.232,1.74,3.177,3.958,3.505,5.449,.331,1.522,.204,2.387,.204,2.387Z" class="cls-8" data-v-b5f50804></path></g></g> <path d="M220.147,433.857c-1.51,0-2.739-1.228-2.739-2.738s1.228-2.738,2.739-2.738,2.738,1.229,2.738,2.738-1.228,2.738-2.738,2.738Zm0-4.727c-1.097,0-1.989,.892-1.989,1.988s.892,1.988,1.989,1.988,1.988-.892,1.988-1.988-.892-1.988-1.988-1.988Z" class="cls-6" data-v-b5f50804></path></g></g></svg></div> <div class="icons"><a href="https://msg.cnblogs.com/send/%E9%BA%8B%E9%B9%BF%E9%B2%81%E5%93%9F" title="发邮件" target="_blank" class="iconfont icon-youjian"></a><a href="https://github.com/guqzhou" title="GitHub" target="_blank" class="iconfont icon-github"></a><a href="https://music.163.com/#/playlist?id=3135346461" title="听音乐" target="_blank" class="iconfont icon-erji"></a></div> 
  Theme by <a href="https://github.com/xugaoyi/vuepress-theme-vdoing" target="_blank" title="本站主题">Vdoing</a> 
     | Copyright © 2021-2026
    <span>guqzhou | <a href="https://icp.gov.moe/?keyword=20238188" target="_blank">萌ICP备20238188号</a></span></div> <div class="buttons"><div title="返回顶部" class="button blur go-to-top iconfont icon-fanhuidingbu" style="display:none;"></div> <div title="去评论" class="button blur go-to-comment iconfont icon-pinglun" style="display:none;"></div> <div title="主题模式" class="button blur theme-mode-but iconfont icon-zhuti"><ul class="select-box" style="display:none;"><li class="iconfont icon-zidong">
          跟随系统
        </li><li class="iconfont icon-rijianmoshi">
          浅色模式
        </li><li class="iconfont icon-yejianmoshi">
          深色模式
        </li><li class="iconfont icon-yuedu">
          阅读模式
        </li></ul></div></div> <!----> <div data-v-4bc2bf98></div></div><div class="global-ui"><div id="tcomment"></div><!----></div></div>
    <script src="/assets/js/app.f0d510fd.js" defer></script><script src="/assets/js/3.d1eeecfb.js" defer></script><script src="/assets/js/138.9264f3bb.js" defer></script><script src="/assets/js/1.cbee4a77.js" defer></script><script src="/assets/js/31.0fc347f8.js" defer></script>
    <meting-js
            autoplay="true"
            server="netease"
            type= "playlist"
            fixed= "true"
            mutex = "true"
            preload= "auto"
            listFolded = "true"
            order="list"
            lrc-type="1"
            id="2895345897">
    </meting-js>
  </body>
</html>
