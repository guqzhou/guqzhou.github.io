(window.webpackJsonp=window.webpackJsonp||[]).push([[89],{428:function(t,s,a){"use strict";a.r(s);var n=a(12),e=Object(n.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h2",{attrs:{id:"vue3-ts多端应用"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#vue3-ts多端应用"}},[t._v("#")]),t._v(" vue3 + ts多端应用")]),t._v(" "),s("h3",{attrs:{id:"创建uni-app项目"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#创建uni-app项目"}},[t._v("#")]),t._v(" 创建uni-app项目")]),t._v(" "),s("h4",{attrs:{id:"通过hbuilderx创建"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#通过hbuilderx创建"}},[t._v("#")]),t._v(" 通过Hbuilderx创建")]),t._v(" "),s("ol",[s("li",[t._v("插件安装\n"),s("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/guqzhou/photo_gallery@master/blog/202310021544095.png",alt:"插件图片"}})]),t._v(" "),s("li",[t._v("在微信开发者工具中记得打开服务端口\n"),s("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/guqzhou/photo_gallery@master/blog/202310021548917.png",alt:"服务端口"}})]),t._v(" "),s("li",[t._v("新建页面\n"),s("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/guqzhou/photo_gallery@master/blog/202310021604117.png",alt:"新建页面"}})])]),t._v(" "),s("h4",{attrs:{id:"通过命令行创建"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#通过命令行创建"}},[t._v("#")]),t._v(" 通过命令行创建")]),t._v(" "),s("p",[t._v("选vscode对ts支持友好，熟悉的编辑器")]),t._v(" "),s("ol",[s("li",[s("p",[t._v("安装插件\n"),s("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/guqzhou/photo_gallery@master/blog/202310021612881.png",alt:"安装插件"}}),t._v(" "),s("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/guqzhou/photo_gallery@master/blog/202310021617952.png",alt:"安装插件"}}),t._v(" "),s("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/guqzhou/photo_gallery@master/blog/202310021624661.png",alt:"安装插件"}})])]),t._v(" "),s("li",[s("p",[t._v("ctrl + i 能够唤醒代码提示")])]),t._v(" "),s("li",[s("p",[t._v("安装命令")])])]),t._v(" "),s("div",{staticClass:"language-zsh line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("npx degit dcloudio/uni-preset-vue#vite-ts app\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("p",[s("a",{attrs:{href:"https://github.com/dcloudio/uni-preset-vue/tree/master",target:"_blank",rel:"noopener noreferrer"}},[t._v("链接地址"),s("OutboundLink")],1),t._v("\n4. 安装类型声明文件")]),t._v(" "),s("div",{staticClass:"language-zsh line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("pnpm i -D @types/wechat-miniprogram @uni-helper/uni-app-types\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("ol",{attrs:{start:"5"}},[s("li",[t._v("vscode 设置进行文件关联\n"),s("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/guqzhou/photo_gallery@master/blog/202310022147644.png",alt:"文件关联"}})])]),t._v(" "),s("h3",{attrs:{id:"请求和上传文件拦截"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#请求和上传文件拦截"}},[t._v("#")]),t._v(" 请求和上传文件拦截")]),t._v(" "),s("div",{staticClass:"language-ts line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-ts"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 1.用uni.addInterceptor添加请求拦截request和上传文件拦截uploadFile")]),t._v("\nuni"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("addInterceptor")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'request'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" httpInterceptor"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nuni"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("addInterceptor")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'request'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" httpInterceptor"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 2。非htttp开头拼接地址")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("options"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("url"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("startsWith")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'http'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    options"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("url "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" baseUrl "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" options"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("url\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 3 添加请求超时")]),t._v("\noptions"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("timeout "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("10000")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 4.添加请求头信息")]),t._v("\noptions"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("header "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token string-property property"}},[t._v("'source-client'")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'miniapp'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v("options"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("header"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 5.添加token ")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" store "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("useToken")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("token"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  options"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("header"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Authorization "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" token\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br"),s("span",{staticClass:"line-number"},[t._v("15")]),s("br"),s("span",{staticClass:"line-number"},[t._v("16")]),s("br"),s("span",{staticClass:"line-number"},[t._v("17")]),s("br"),s("span",{staticClass:"line-number"},[t._v("18")]),s("br"),s("span",{staticClass:"line-number"},[t._v("19")]),s("br")])]),s("h4",{attrs:{id:"自动导入组件"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#自动导入组件"}},[t._v("#")]),t._v(" 自动导入组件")]),t._v(" "),s("h3",{attrs:{id:"登陆状态"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#登陆状态"}},[t._v("#")]),t._v(" 登陆状态")]),t._v(" "),s("h4",{attrs:{id:"小程序登陆"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#小程序登陆"}},[t._v("#")]),t._v(" 小程序登陆")])])}),[],!1,null,null,null);s.default=e.exports}}]);